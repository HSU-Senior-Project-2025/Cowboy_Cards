import{A as Ps,p as r,q as e,t as He,B as Je,L as $s,I as v,C as D,D as Ls,$ as Fs,X as Ye,E as Os,F as Rs,G as Us,H as Bs,J as _,K as F,M as O,N as P,O as Ce,P as Ms,Q as ve,R as re,S as qs,T as B,U as Gs,V as Pe,W as $e,Y as zs,Z as M,_ as fe,a0 as z,a1 as Vs,a2 as Hs,a3 as Js,a4 as Ys,a5 as Ws,a6 as Qs,a7 as Ks,a8 as We,a9 as Q,aa as Se,ab as Qe,ac as Ke,ad as ne,ae as Xe,af as Xs,ag as Zs,ah as te,ai as pe,aj as se,ak as Ze,al as et,am as je,an as st,ao as tt,ap as Le,aq as at,ar as rt,as as nt,at as lt}from"./nm-Bo9bdW_3.js";import{c as ot}from"./reactdom-VuOnq4qy.js";import{A as es,C as ss,e as ts}from"./corebig1-pgkc_sto.js";import{I as oe}from"./corebig2-BwKlYy4i.js";import{t as ct,C as as,a as rs,b as ns,c as it,d as dt}from"./twcar-Cqv3tsS0.js";import{R as ls,L as ae,V as os,a as cs,A as is,C as ds,T as ms,D as us,P as mt,b as hs,c as ut,u as ge,d as Ne,e as ht,Q as xt,I as ft,f as L}from"./react-wcxPityY.js";import{at as pt}from"./core-CMEQxuGx.js";import"./ion-OmB0FXN8.js";import"./index-Bo5EiLIW.js";import"./ionbig1-CMkZeiga.js";import"./ionbig2-DgVw8AfL.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(c){if(c.ep)return;c.ep=!0;const i=t(c);fetch(c.href,i)}})();function fa(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function R(...s){return ct(Ps(s))}const ce=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:R("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));ce.displayName="Card";const Ie=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:R("flex flex-col space-y-1.5 p-6",s),...a}));Ie.displayName="CardHeader";const Ee=r.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:R("text-2xl font-semibold leading-none tracking-tight",s),...a}));Ee.displayName="CardTitle";const ke=r.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:R("text-sm text-muted-foreground",s),...a}));ke.displayName="CardDescription";const Te=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:R("p-6 pt-0",s),...a}));Te.displayName="CardContent";const De=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:R("flex items-center p-6 pt-0",s),...a}));De.displayName="CardFooter";const K=r.forwardRef(({className:s,type:a,...t},n)=>e.jsx("input",{type:a,className:R("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));K.displayName="Input";const jt=He("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),X=r.forwardRef(({className:s,...a},t)=>e.jsx(ls,{ref:t,className:R(jt(),s),...a}));X.displayName=ls.displayName;const gt=1,Nt=1e6;let we=0;function yt(){return we=(we+1)%Number.MAX_SAFE_INTEGER,we.toString()}const be=new Map,Fe=s=>{if(be.has(s))return;const a=setTimeout(()=>{be.delete(s),le({type:"REMOVE_TOAST",toastId:s})},Nt);be.set(s,a)},wt=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,gt)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?Fe(t):s.toasts.forEach(n=>{Fe(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},he=[];let xe={toasts:[]};function le(s){xe=wt(xe,s),he.forEach(a=>{a(xe)})}function bt({...s}){const a=yt(),t=c=>le({type:"UPDATE_TOAST",toast:{...c,id:a}}),n=()=>le({type:"DISMISS_TOAST",toastId:a});return le({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:c=>{c||n()}}}),{id:a,dismiss:n,update:t}}function xs(){const[s,a]=r.useState(xe);return r.useEffect(()=>(he.push(a),()=>{const t=he.indexOf(a);t>-1&&he.splice(t,1)}),[s]),{...s,toast:bt,dismiss:t=>le({type:"DISMISS_TOAST",toastId:t})}}const vt="modulepreload",St=function(s,a){return new URL(s,a).href},Oe={},pa=function(a,t,n){let c=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),x=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));c=Promise.allSettled(t.map(d=>{if(d=St(d,n),d in Oe)return;Oe[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!n)for(let m=o.length-1;m>=0;m--){const b=o[m];if(b.href===d&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${h}`))return;const y=document.createElement("link");if(y.rel=u?"stylesheet":vt,u||(y.as="script"),y.crossOrigin="",y.href=d,x&&y.setAttribute("nonce",x),document.head.appendChild(y),u)return new Promise((m,b)=>{y.addEventListener("load",m),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return c.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return a().catch(i)})},Re="https://cowboy-cards.dsouth.org",fs=()=>{const[s,a]=r.useState(!0),[t,n]=r.useState(!1),[c,i]=r.useState(""),[o,l]=r.useState(""),[x,d]=r.useState(""),[u,h]=r.useState(""),[g,y]=r.useState(""),[m,b]=r.useState({}),N=Je(),{toast:$}=xs(),q=()=>{const f={};let j=!0;return c?/\S+@\S+\.\S+/.test(c)||(f.email="Email is invalid",j=!1):(f.email="Email is required",j=!1),o?o.length<8&&(f.password="Password must be at least 8 characters",j=!1):(f.password="Password is required",j=!1),!s&&!x&&(f.username="Username is required",j=!1),b(f),j},W=async f=>{if(f.preventDefault(),!!q()){n(!0),b({});try{let j;if(s?j=await fetch(`${Re}/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:c,password:o})}):j=await fetch(`${Re}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:x,email:c,password:o,first_name:u,last_name:g})}),!j.ok){const p=await j.json();throw p.code==="duplicate_email"?(b({email:"This email is already registered"}),new Error("This email is already registered")):p.code==="duplicate_username"?(b({username:"This username is already taken"}),new Error("This username is already taken")):p.code==="invalid_credentials"?(b({general:"Invalid email or password"}),new Error("Invalid email or password")):new Error(p.message||"Authentication failed")}const S=await j.json();$({title:s?"Welcome back!":"Account created",description:s?"You have been successfully logged in.":"Your account has been created successfully."}),N.push("/home")}catch(j){console.error("Authentication error:",j),Object.keys(m).length===0&&b({general:j.message||"An unexpected error occurred. Please try again."}),$({title:"Authentication failed",description:j.message||"Please check your credentials and try again.",variant:"destructive"})}finally{n(!1)}}},J=()=>{b({}),s?(d(""),h(""),y("")):(i(""),l(""))};return e.jsxs(ce,{className:"w-[350px]",children:[e.jsxs(Ie,{children:[e.jsx(Ee,{children:s?"Welcome back":"Create account"}),e.jsx(ke,{children:s?"Enter your credentials to continue":"Sign up for a new account"})]}),e.jsxs("form",{onSubmit:W,children:[e.jsxs(Te,{className:"space-y-4",children:[m.general&&e.jsxs(es,{variant:"destructive",className:"mb-4",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx(ts,{children:m.general})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"username",children:"Username"}),e.jsx(K,{id:"username",type:"text",placeholder:"johndoe",value:x,onChange:f=>d(f.target.value),required:!0,className:m.username?"border-red-500":""}),m.username&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"firstName",children:"First Name"}),e.jsx(K,{id:"firstName",type:"text",placeholder:"John",value:u,onChange:f=>h(f.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"lastName",children:"Last Name"}),e.jsx(K,{id:"lastName",type:"text",placeholder:"Doe",value:g,onChange:f=>y(f.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",type:"email",placeholder:"name@example.com",value:c,onChange:f=>i(f.target.value),required:!0,className:m.email?"border-red-500":""}),m.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"password",children:"Password"}),e.jsx(K,{id:"password",type:"password",value:o,onChange:f=>l(f.target.value),required:!0,className:m.password?"border-red-500":""}),m.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.password}),!s&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),s&&e.jsx(ae,{to:"/reset-password",className:"text-sm text-purple-500",children:"Forgot password?"})]}),e.jsxs(De,{className:"flex flex-col space-y-4",children:[e.jsxs(oe,{type:"submit",className:"w-full",disabled:t,children:[e.jsx($s,{className:"mr-2 h-4 w-4"}),t?s?"Signing in...":"Signing up...":s?"Sign in":"Sign up"]}),e.jsx(oe,{variant:"link",type:"button",onClick:()=>{a(!s),J()},className:"text-sm",disabled:t,children:s?"Need an account? Sign up":"Already have an account? Sign in"}),e.jsxs(v,{expand:"block",fill:"outline",className:"flex items-center justify-center space-x-2",onClick:()=>{console.log("Sign in with Google clicked")},children:[e.jsx(D,{slot:"start",src:"https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw",className:"h-5 w-5"}),e.jsx("p",{}),"Sign in with Google",e.jsx("img",{slot:"start",src:"https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw",className:"h-10 w-10"})]})]})]})]})},Ct=()=>{const[s,a]=r.useState(""),[t,n]=r.useState({}),c=i=>{i.preventDefault()};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs(ce,{className:"w-[350px]",children:[e.jsxs(Ie,{children:[e.jsx(Ee,{children:"Reset Password"}),e.jsx(ke,{children:"Enter your email to reset your password"})]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs(Te,{className:"space-y-4",children:[t.general&&e.jsxs(es,{variant:"destructive",className:"mb-4",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx(ts,{children:t.general})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",type:"email",placeholder:"name@example.com",value:s,onChange:i=>a(i.target.value),required:!0,className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email})]})]}),e.jsx(De,{className:"flex flex-col space-y-4",children:e.jsx(oe,{type:"submit",className:"w-full",children:"Send Reset Link"})})]})]})})},It=({...s})=>{const{theme:a="system"}=Ls();return e.jsx(Fs,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},Et=mt,ps=r.forwardRef(({className:s,...a},t)=>e.jsx(os,{ref:t,className:R("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a}));ps.displayName=os.displayName;const kt=He("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),js=r.forwardRef(({className:s,variant:a,...t},n)=>e.jsx(cs,{ref:n,className:R(kt({variant:a}),s),...t}));js.displayName=cs.displayName;const Tt=r.forwardRef(({className:s,...a},t)=>e.jsx(is,{ref:t,className:R("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a}));Tt.displayName=is.displayName;const gs=r.forwardRef(({className:s,...a},t)=>e.jsx(ds,{ref:t,className:R("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:e.jsx(Ye,{className:"h-4 w-4"})}));gs.displayName=ds.displayName;const Ns=r.forwardRef(({className:s,...a},t)=>e.jsx(ms,{ref:t,className:R("text-sm font-semibold",s),...a}));Ns.displayName=ms.displayName;const ys=r.forwardRef(({className:s,...a},t)=>e.jsx(us,{ref:t,className:R("text-sm opacity-90",s),...a}));ys.displayName=us.displayName;function Dt(){const{toasts:s}=xs();return e.jsxs(Et,{children:[s.map(function({id:a,title:t,description:n,action:c,...i}){return e.jsxs(js,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[t&&e.jsx(Ns,{children:t}),n&&e.jsx(ys,{children:n})]}),c,e.jsx(gs,{})]},a)}),e.jsx(ps,{})]})}const At=ut,_t=r.forwardRef(({className:s,sideOffset:a=4,...t},n)=>e.jsx(hs,{ref:n,sideOffset:a,className:R("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));_t.displayName=hs.displayName;const ws=r.createContext(void 0);function Pt({children:s}){const[a,t]=r.useState(()=>{const n=localStorage.getItem("theme");return n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return r.useEffect(()=>{localStorage.setItem("theme",a),a==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"))},[a]),e.jsx(ws.Provider,{value:{theme:a,setTheme:t},children:s})}function bs(){const s=r.useContext(ws);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s}const Ue={method:"GET",headers:{},credentials:"include"};async function T(s="",a=Ue){const t={...Ue,...a};try{const n=await fetch(s,t);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);return await n.json()}catch(n){throw console.error("API request failed:",n),n}}const $t="https://cowboy-cards.dsouth.org",vs=({front:s,back:a,onAdvance:t,cardId:n,userId:c})=>{const[i,o]=r.useState(!1),l=async u=>{try{const h=await T(`${$t}${u}`,{method:"POST",headers:{user_id:c.toString(),card_id:n.toString()}});console.log(`Score update successful for card ${n}:`,h),t==null||t()}catch(h){console.error(`Failed to update score for card ${n}:`,h)}},x=()=>{l("/api/card_history/incorrect")},d=()=>{l("/api/card_history/correct")};return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:`flip-card cursor-pointer ${i?"flipped":""}`,onClick:()=>o(!i),children:[e.jsx(ce,{className:"flip-card-front p-8 min-h-[300px] flex items-center justify-center text-center",children:e.jsx("p",{className:"text-xl",children:s})}),e.jsx(ce,{className:"flip-card-back p-8 min-h-[300px] flex items-center justify-center text-center absolute top-0 w-full",children:e.jsx("p",{className:"text-xl",children:a})})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsxs(oe,{variant:"outline",className:"w-32",onClick:x,children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Learning"]}),e.jsxs(oe,{className:"w-32",onClick:d,children:[e.jsx(Os,{className:"mr-2 h-4 w-4"}),"Mastered"]})]})]})},Lt="https://cowboy-cards.dsouth.org",Ft=s=>{const a=ge(),[t,n]=r.useState([]),[c,i]=r.useState(null);return r.useEffect(()=>{async function o(){console.log("selectedSet",c);const l=await T(`${Lt}/api/flashcards/list`,{method:"GET",headers:{set_id:c}});console.log("cards",l),n(l)}c&&o()},[c]),e.jsx("div",{className:"mt-6",children:c===null?e.jsx(Rs,{children:e.jsx(Us,{children:s.flashcardSets.sort((o,l)=>o.ID-l.ID).map(o=>e.jsx(Bs,{size:"12",sizeMd:"6",sizeLg:"4",children:e.jsxs(_,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-200 rounded-lg border shadow-sm",onClick:()=>a.push(`/set-overview/${o.ID}`),children:[e.jsx(F,{children:e.jsx(O,{className:"text-lg font-semibold",children:o.SetName})}),e.jsx(P,{children:e.jsx("p",{className:"text-muted-foreground mb-2",children:o.SetDescription})})]})},o.ID))})}):e.jsxs(e.Fragment,{children:[e.jsxs(v,{fill:"outline",onClick:()=>i(null),className:"mb-6",children:[e.jsx(D,{slot:"start",icon:Ce}),"Back to Sets"]}),e.jsxs("div",{className:"w-full max-w-2xl mx-auto relative",children:[e.jsxs(as,{orientation:"vertical",className:"w-full",setApi:s.setApi,children:[e.jsx(rs,{className:"-mt-1 h-[400px]",children:t.map(o=>e.jsx(ns,{children:e.jsx(vs,{front:o.Front,back:o.Back,cardId:o.ID,userId:1})},o.ID))}),e.jsx(it,{}),e.jsx(dt,{})]}),e.jsx("div",{className:"absolute right-[-50px] top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:t.map((o,l)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${l===s.currentCardIndex?"bg-primary":"bg-gray-300"}`},l))})]})]})})},Ss=()=>e.jsx(Ms,{children:e.jsxs(ve,{children:[e.jsx(re,{slot:"start",children:e.jsx(v,{routerLink:"/home",children:e.jsx(D,{icon:qs})})}),e.jsx(B,{className:"mx-auto text-center text-sm text-gray-500",children:"Cowboy Cards 2025. Built for learning and fun."})]})}),V=()=>{const[s,a]=r.useState(null),t=d=>a(d.nativeEvent),n=()=>a(null),c=d=>{var u;i.push(d),(u=document.querySelector("ion-menu"))==null||u.close()},i=Je(),{theme:o,setTheme:l}=bs(),x=()=>{l(o==="dark"?"light":"dark")};return e.jsxs(e.Fragment,{children:[e.jsxs(Gs,{side:"start",contentId:"main-content",children:[e.jsx(Pe,{children:e.jsx(ve,{children:e.jsx(re,{slot:"start",children:e.jsx($e,{children:e.jsx(v,{children:e.jsx(D,{icon:zs})})})})})}),e.jsx(M,{children:e.jsxs(fe,{children:[e.jsx(z,{button:!0,onClick:()=>c("/home"),children:"My Dashboard"}),e.jsx(z,{button:!0,onClick:()=>c("/public-cards"),children:"Public Cards"}),e.jsx(z,{button:!0,onClick:()=>c("/public-classes"),children:"Public Classes"}),e.jsx(z,{button:!0,onClick:()=>c("/user-account"),children:"My Account"})]})})]}),e.jsx(Pe,{children:e.jsxs(ve,{children:[e.jsx(re,{slot:"start",children:e.jsx($e,{children:e.jsx(v,{children:e.jsx(D,{icon:Vs})})})}),e.jsx(Hs,{color:"primary",className:"text-lg md:text-xl lg:text-2xl font-bold hover:translate-x-1 transition-all duration-300 cursor-pointer",onClick:()=>i.push("/home"),children:"Cowboy Cards"}),e.jsxs(re,{slot:"end",children:[e.jsx(v,{onClick:t,children:e.jsx(D,{icon:Js,className:"text-[32px] stroke-[2]"})}),e.jsx(Ys,{event:s,isOpen:!!s,onDidDismiss:n,children:e.jsx(M,{className:"p-2",children:e.jsxs(fe,{children:[e.jsx(z,{button:!0,onClick:()=>{n(),i.push("/create-set")},children:"Create Set"}),e.jsx(z,{button:!0,onClick:()=>{n(),i.push("/class/create")},children:"Create Class"}),e.jsx(z,{button:!0,onClick:()=>{n(),i.push("/public-classes")},children:"Join Class"})]})})}),e.jsx(v,{fill:"clear",onClick:x,children:e.jsx(D,{slot:"icon-only",icon:o==="dark"?Ws:Qs})})]}),e.jsx(re,{slot:"end",children:e.jsx(v,{routerLink:"/user-account",children:e.jsx(D,{icon:Ks,size:"large"})})})]})})]})},Ot=({leaderboard:s,classUsers:a})=>e.jsxs(_,{className:"rounded-lg border shadow-sm",children:[e.jsx(F,{children:e.jsx(O,{className:"text-xl font-semibold",children:"Class Leaderboard"})}),e.jsx(P,{children:e.jsx(fe,{className:"space-y-3",lines:"none",children:s.map((t,n)=>e.jsxs(z,{className:"muted-item p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-lg",children:n+1}),e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsxs("span",{slot:"end",className:"text-primary font-semibold",children:[t.totalScore," points"]})]},n))})})]}),Rt=({students:s,isTeacher:a,onDeleteStudent:t})=>e.jsxs(_,{className:"mt-6",children:[e.jsx(F,{children:e.jsx(O,{className:"text-xl font-semibold",children:"Class Students"})}),e.jsx(P,{children:e.jsx(fe,{className:"space-y-3",lines:"none",children:s.map(n=>e.jsxs(z,{className:"muted-item p-3",children:[e.jsxs("span",{className:"font-medium",children:[n.FirstName," ",n.LastName]}),e.jsx("span",{slot:"end",className:"text-muted-foreground",children:n.email}),a&&e.jsx(D,{slot:"end",icon:We,color:"danger",className:"cursor-pointer",onClick:()=>t(n.id)})]},n.id))})})]}),ee="https://cowboy-cards.dsouth.org",Ut=()=>{const{id:s}=Ne(),[a,t]=r.useState(0),[n,c]=r.useState(),[i,o]=r.useState("flashcards"),[l,x]=r.useState(!0),[d,u]=r.useState(),[h,g]=r.useState([]),[y,m]=r.useState([]),[b,N]=r.useState(null),[$,q]=r.useState(!1),[W,J]=r.useState([]),[f,j]=r.useState(!1),[S,p]=r.useState(!1),[w,C]=r.useState({class_name:"",class_description:""}),I=()=>{console.log("Handling Edit"),C({class_name:(d==null?void 0:d.ClassName)||"",class_description:(d==null?void 0:d.ClassDescription)||""}),p(!0)},[U,ye]=r.useState({}),Cs=()=>{const E={};let A=!0;return w.class_name=w.class_name.trim(),w.class_description=w.class_description.trim(),w.class_name||(E.className="Class name is required",A=!1),w.class_description||(E.classDescription="Class description is required",A=!1),ye(E),A},Is=async()=>{if(!Cs()){console.log("Form validation failed:",U);return}const E=["class_name","class_description"];try{const A=E.map(G=>T(`${ee}/api/classes/${G}`,{method:"PUT",headers:{id:s,[G]:w[G]}}));await Promise.all(A),u(G=>({...G,ClassName:w.class_name,ClassDescription:w.class_description})),p(!1)}catch(A){console.error(A),alert("Failed to update some fields. Please try again.")}},Ae=E=>{const{name:A}=E.target,G=E.detail.value;C(k=>({...k,[A]:G}))},Es=()=>{p(!1)};r.useEffect(()=>{async function E(){q(!0),N(null);try{const k=await T(`${ee}/api/classes/`,{method:"GET",headers:{id:s}});console.log("data",k),u(k)}catch(k){N(`Error fetching class: ${k.message}`)}finally{q(!1)}}async function A(){const k=await T(`${ee}/api/class_set/list_sets`,{method:"GET",headers:{class_id:s}});console.log("sets",k),g(k)}async function G(){const k=await T(`${ee}/api/class_user/members`,{method:"GET",headers:{class_id:s}});console.log("users",k),m(k)}E(),A(),G()},[s]),r.useEffect(()=>{async function E(){if(!y.length||!h.length)return;j(!0),N(null);const A=new Map;try{await Promise.all(y.map(async k=>{try{const Ds=(await Promise.all(h.map(async me=>{try{const Z=await T(`${ee}/api/card_history/set`,{method:"GET",headers:{user_id:k.UserID.toString(),set_id:me.ID.toString()}});return Array.isArray(Z)?Z.reduce((As,_s)=>As+(_s.NetScore||0),0):0}catch(Z){return console.error(`Error fetching scores for set ${me.ID}:`,Z),0}}))).reduce((me,Z)=>me+Z,0);A.set(k.UserID,Ds)}catch(de){console.error(`Error processing user ${k.UserID}:`,de),A.set(k.UserID,0)}}));const G=y.map(k=>({name:`${k.FirstName} ${k.LastName}`,totalScore:A.get(k.UserID)||0})).sort((k,de)=>de.totalScore-k.totalScore);J(G)}catch(G){N("Error calculating leaderboard scores"),console.error("Leaderboard calculation error:",G)}finally{j(!1)}}E()},[y,h]);const[_e,ie]=r.useState({isOpen:!1,studentId:null}),ks=E=>{ie(A=>({...A,isOpen:!0,studentId:E}))},Ts=E=>{try{T(`${ee}/api/class_user/`,{method:"DELETE",headers:{class_id:s,user_id:E}})}catch(A){console.error("Error deleting student:",A),N("Error deleting student")}};return r.useEffect(()=>{n&&n.on("select",()=>{t(n.selectedScrollSnap())})},[n]),e.jsxs(M,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[b&&e.jsx("div",{className:"text-red-500 mt-2",children:b}),S?e.jsxs(P,{className:"p-6 pt-0",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Update Class Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(z,{children:[e.jsx(Q,{position:"stacked",children:"Class Name"}),e.jsx(Se,{type:"text",name:"class_name",placeholder:"Enter class name",value:w==null?void 0:w.class_name,onIonChange:Ae})]}),U.className&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:U.className}),e.jsxs(z,{children:[e.jsx(Q,{position:"stacked",children:"Class Description"}),e.jsx(Se,{type:"text",name:"class_description",placeholder:"Enter class description",value:w==null?void 0:w.class_description,onIonChange:Ae})]}),U.classDescription&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:U.classDescription}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(v,{onClick:Es,fill:"outline",className:"mr-2",children:"Cancel"}),e.jsx(v,{onClick:Is,fill:"solid",color:"primary",children:"Save"})]})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:$?"Loading...":d==null?void 0:d.ClassName}),e.jsx("p",{className:"text-gray-600",children:$?"Loading...":d==null?void 0:d.ClassDescription}),l&&e.jsx(D,{icon:Qe,size:"large",color:"primary",className:"hover:transform hover:scale-110 cursor-pointer p-2",onClick:I})]}),l&&e.jsx("div",{className:"mb-8",children:e.jsx(v,{routerLink:"/create-set",fill:"solid",color:"primary",children:"Create Flashcard Set"})})]}),e.jsx("div",{className:"flex flex-row justify-between mb-6",children:e.jsxs(v,{onClick:()=>window.history.back(),fill:"outline",children:[e.jsx(D,{slot:"start",icon:Ce}),"Back"]})}),e.jsxs(Ke,{value:i,onIonChange:E=>o(E.detail.value),className:"w-full mb-6",children:[e.jsxs(ne,{value:"flashcards",children:[e.jsx(D,{icon:Xe,className:"mr-2"}),e.jsx(Q,{children:"Flashcard Sets"})]}),e.jsxs(ne,{value:"leaderboard",children:[e.jsx(D,{icon:Xs,className:"mr-2"}),e.jsx(Q,{children:"Leaderboard"})]}),e.jsxs(ne,{value:"students",children:[e.jsx(D,{icon:Zs,className:"mr-2"}),e.jsx(Q,{children:"Students"})]})]}),i==="leaderboard"&&e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(te,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Calculating scores..."})]}):e.jsx(Ot,{leaderboard:W,classUsers:y})}),i==="flashcards"&&e.jsx(Ft,{flashcardSets:h,currentCardIndex:a,setApi:c}),i==="students"&&e.jsx("div",{className:"flex flex-col",children:e.jsx(Rt,{isTeacher:l,students:y,onDeleteStudent:ks})})]}),e.jsx(pe,{isOpen:_e.isOpen,onDidDismiss:()=>ie(E=>({...E,isOpen:!1,studentId:null})),header:"Confirm Deletion",message:"Are you sure you want to delete this Student? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked"),ie(E=>({...E,isOpen:!1,studentId:null}))}},{text:"Delete",handler:()=>{Ts(_e.studentId),ie(E=>({...E,isOpen:!1,studentId:null})),console.log("Account deleted")}}]}),e.jsx(Ss,{})]})},Bt="https://cowboy-cards.dsouth.org",Mt=()=>{const[s,a]=r.useState(!1),[t,n]=r.useState(!1),[c,i]=r.useState(null),[o,l]=r.useState({className:"",description:""}),[x,d]=r.useState(!1);return r.useEffect(()=>{async function u(){if(s){n(!0),i(null);try{const h=await T(`${Bt}/api/classes`,{method:"POST",headers:{class_name:o.className,class_description:o.description}});console.log("Class created successfully:",h),a(!1),l({className:"",description:""}),d(!0),n(!1)}catch(h){i(`Failed to create class: ${h.message}`)}finally{n(!1)}}}s&&u()},[s,o]),e.jsxs(M,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[c&&e.jsx("div",{className:"text-red-500 mt-2",children:c}),e.jsxs("form",{children:[e.jsx(_,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsx(se,{placeholder:"Enter Class Name",value:o.className,onIonChange:u=>l(h=>({...h,className:u.detail.value||""})),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),e.jsx(se,{placeholder:"Enter Class Description",value:o.description,onIonChange:u=>l(h=>({...h,description:u.detail.value||""})),rows:1,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}})]})}),e.jsx("div",{className:"flex flex-col md:flex-row justify-center md:justify-end gap-4 mt-8",children:e.jsx(v,{color:"success",disabled:t,onClick:()=>a(!0),children:t?"Creating...":"Create Class"})})]}),x&&e.jsx(B,{children:e.jsx("p",{children:"Class created successfully!"})})]})]})},H="https://cowboy-cards.dsouth.org",Be=()=>{const{id:s}=Ne(),a=ge(),[t,n]=r.useState(""),[c,i]=r.useState(""),[o,l]=r.useState([{front:"",back:""}]),[x,d]=r.useState({title:"",description:""}),[u,h]=r.useState(!1),[g,y]=r.useState(!1),[m,b]=r.useState(null);r.useEffect(()=>{s&&((async()=>{try{const S=await fetch(`${H}/api/flashcards/list`,{method:"GET",headers:{set_id:s}});if(!S.ok)throw new Error("Failed to fetch flashcards");const p=await S.json();console.log(p);const w=Array.isArray(p)?p:[];w.length===0?l([{front:"",back:""}]):l(w.map(C=>({id:C.ID,front:C.Front,back:C.Back})))}catch(S){console.error("Error fetching flashcards:",S)}})(),(async()=>{try{const S=await fetch(`${H}/api/flashcards/sets/`,{method:"GET",headers:{id:s}});if(!S.ok){a.push("/create-set");return}const p=await S.json();console.log(p),n(p.SetName),i(p.SetDescription)}catch(S){console.error("Error fetching flashcard set",S)}})())},[s,a]);const N=()=>{l([...o,{front:"",back:""}])},$=f=>{l(o.filter((j,S)=>S!==f))},q=(f,j,S)=>{l(o.map((p,w)=>w===f?{...p,[j]:S}:p)),l(o.map((p,w)=>w===f?{...p,[j]:S}:p))},W=async()=>{y(!0),b(null);const f={title:"",description:""};let j=!1;if(t.trim()||(f.title="Title is required",j=!0),c.trim()||(f.description="Description is required",j=!0),d(f),j){y(!1);return}const S=o.filter(p=>p.front.trim()!==""||p.back.trim()!=="");if(s)try{await T(`${H}/api/flashcards/sets/set_name`,{method:"PUT",headers:{id:s,set_name:t}}),await T(`${H}/api/flashcards/sets/set_description`,{method:"PUT",headers:{id:s,set_description:c}});const p=await T(`${H}/api/flashcards/list`,{method:"GET",headers:{set_id:s}});for(const w of S)w.id?(await T(`${H}/api/flashcards/front`,{method:"PUT",headers:{id:w.id.toString(),front:w.front}}),await T(`${H}/api/flashcards/back`,{method:"PUT",headers:{id:w.id.toString(),back:w.back}})):await T(`${H}/api/flashcards`,{method:"POST",headers:{front:w.front.trim(),back:w.back.trim(),set_id:s.toString()}});a.push(`/flashcards/${s}`)}catch(p){console.error("Error saving flashcard set:",p),b(`Failed to save flashcard set: ${p.message}`)}finally{y(!1)}else try{const p=await fetch(`${H}/flashcards/sets/`,{method:"POST",headers:{set_name:t,set_description:c}});if(!p.ok)throw new Error(`HTTP error! Status: ${p.status}`);const C=(await p.json()).ID;for(const I of S)await fetch(`${H}/flashcards`,{method:"POST",headers:{front:I.front,back:I.back,set_id:C.toString()}});y(!1),a.push(`/flashcards/${C}`)}catch(p){console.error("Error saving flashcard set:",p),b(`Failed to save flashcard set: ${p.message}`)}finally{y(!1)}},J=()=>{n(""),i(""),l([{front:"",back:""}]),d({title:"",description:""}),console.log("Flashcard set deleted")};return e.jsxs(M,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[g&&e.jsx("div",{children:"Loading..."}),m&&e.jsx("div",{className:"text-red-500 mt-2",children:m}),e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create New Flashcard Set"}),e.jsx(_,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsx(se,{placeholder:"Enter set title",value:t,onIonChange:f=>n(f.detail.value),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),x.title&&e.jsx(B,{color:"danger",children:e.jsx("p",{className:"text-sm mt-1",children:x.title})}),e.jsx(se,{placeholder:"Enter set description",value:c,onIonChange:f=>i(f.detail.value),rows:1,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}}),x.description&&e.jsx(B,{color:"danger",children:e.jsx("p",{className:"text-sm mt-1",children:x.description})})]})}),o.map((f,j)=>e.jsx(_,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-base font-semibold",children:["Card ",j+1]}),e.jsx(v,{fill:"clear",color:"danger",onClick:()=>$(j),children:e.jsx(D,{icon:We})})]}),e.jsx(se,{placeholder:"Front of card",value:f.front,onIonChange:S=>q(j,"front",S.detail.value),rows:1,autoGrow:!0,className:"mb-4",style:{resize:"none"}}),e.jsx(se,{placeholder:"Back of card",value:f.back,onIonChange:S=>q(j,"back",S.detail.value),rows:1,autoGrow:!0,style:{resize:"none"}})]})},j)),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs(v,{color:"primary",className:"rounded-lg shadow-sm",onClick:N,children:[e.jsx(D,{slot:"start",icon:Ze})," Add Card"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center md:justify-end gap-4 mt-8",children:[e.jsx(v,{color:"danger",onClick:()=>h(!0),children:"Delete Set"}),e.jsx(v,{color:"success",className:"rounded-lg shadow-sm w-full md:w-auto",onClick:W,children:s?"Update Set":"Create Set"})]}),e.jsx(pe,{isOpen:u,onDidDismiss:()=>h(!1),header:"Confirm Set Deletion",message:"Are you sure you want to delete this flashcard set? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Delete",handler:()=>{J()}}]})]})]})},Me="https://cowboy-cards.dsouth.org",qt=()=>{const{id:s}=Ne();ge();const[a,t]=r.useState(""),[n,c]=r.useState(""),[i,o]=r.useState([]),[l,x]=r.useState(),[d,u]=r.useState(0),[h,g]=r.useState(!0);r.useEffect(()=>{const m=async()=>{try{const $=await(await fetch(`${Me}/api/flashcards/sets/`,{method:"GET",headers:{id:s}})).json();t($.SetName),c($.SetDescription)}catch(N){console.error("Failed to fetch set info",N)}},b=async()=>{g(!0);try{const $=await(await fetch(`${Me}/api/flashcards/list`,{method:"GET",headers:{set_id:s}})).json();o(Array.isArray($)?$.map(q=>({id:q.ID,front:q.Front,back:q.Back})):[])}catch(N){console.error("Failed to fetch cards",N),o([])}finally{g(!1)}};s&&(m(),b())},[s]),r.useEffect(()=>{if(!l)return;const m=()=>{u(l.selectedScrollSnap())};return m(),l.on("select",m),l.on("reInit",m),()=>{l.off("select",m),l.off("reInit",m)}},[l]);const y=()=>{l&&l.scrollNext()};return e.jsxs(M,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(v,{className:"rounded-lg",fill:"outline",style:{"--border-radius":"0.5rem"},routerLink:`/set-overview/${s}`,children:"Back"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a}),e.jsx("p",{className:"text-gray-500",children:n})]})]}),e.jsx("div",{className:"w-full max-w-xl mx-auto relative py-8 min-h-[400px] flex items-center justify-center",children:h?e.jsx(te,{name:"circular"}):i.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg py-20",children:"This set has no cards yet."}):e.jsxs(e.Fragment,{children:[e.jsx(as,{orientation:"vertical",setApi:x,className:"w-full",children:e.jsx(rs,{className:"-mt-1 h-[400px]",children:i.map((m,b)=>e.jsx(ns,{children:e.jsx(vs,{front:m.front,back:m.back,onAdvance:y,cardId:m.id,userId:1})},b))})}),e.jsx("div",{className:"absolute right-[-50px] top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:i.map((m,b)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${b===d?"bg-primary":"bg-gray-300"}`},b))})]})})]})]})},qe="https://cowboy-cards.dsouth.org",Gt=()=>{const[s,a]=r.useState("classes"),[t,n]=r.useState([]),[c,i]=r.useState([]),[o,l]=r.useState(!1),[x,d]=r.useState(!1),[u,h]=r.useState(null);return r.useEffect(()=>{const g=async()=>{l(!0),h(null);try{const m=await T(`${qe}/api/class_user/classes`);console.log(m),n(m)}catch(m){h(`Error fetching classes: ${m.message}`)}finally{l(!1)}},y=async()=>{d(!0);try{const m=await T(`${qe}/api/flashcards/sets/list`);i(m)}catch(m){h(`Error fetching sets: ${m.message}`)}finally{d(!1)}};g(),y()},[]),e.jsxs(M,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[u&&e.jsx("div",{className:"text-red-500 mt-2",children:u}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s==="classes"?"My Classes":"Personal Flashcard Sets"}),e.jsx("div",{className:"flex items-center gap-2 mt-4 md:mt-0",children:e.jsxs(v,{color:"primary",className:"rounded-lg",style:{"--border-radius":"0.5rem"},href:s==="classes"?"/class/create":"/set/create",children:[e.jsx(D,{slot:"start",icon:Ze})," ",s==="classes"?"Add Class":"Add Set"]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(Ke,{value:s,onIonChange:g=>a(g.detail.value||"classes"),style:{"--background":"var(--ion-color-light)"},children:[e.jsxs(ne,{value:"classes",children:[e.jsx(D,{icon:et,className:"mr-2"}),e.jsx(Q,{children:"My Classes"})]}),e.jsxs(ne,{value:"flashcards",children:[e.jsx(D,{icon:Xe,className:"mr-2"}),e.jsx(Q,{children:"My Cards"})]})]})}),s==="classes"&&e.jsx(e.Fragment,{children:o?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(te,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading classes..."})]}):t===null?e.jsx("div",{className:"text-center p-8 text-gray-600",children:"You are not part of any classes. Join a class to get started."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(g=>e.jsx(ae,{to:`/class/${g.ID}`,children:e.jsxs(_,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(F,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:g.ClassName}),e.jsx(je,{className:"text-sm text-muted-foreground",children:g.ClassDescription})]}),e.jsx(P,{})]})},g.ID))})}),s==="flashcards"&&e.jsx(e.Fragment,{children:x?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(te,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading sets..."})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(g=>e.jsx(ae,{to:`/set/${g.ID}`,children:e.jsxs(_,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(F,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:g.SetName}),e.jsx(je,{className:"text-sm text-muted-foreground",children:g.SetDescription})]}),e.jsx(P,{})]})},g.ID))})}),e.jsx(Ss,{})]})]})},zt=()=>e.jsx(M,{children:e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center from-white to-gray-50",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"CowboyCards"}),e.jsx("p",{children:"Master any subject with smart flashcards"})]}),e.jsx(fs,{})]})}),Vt=()=>{const s=ht();return r.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsxs(M,{children:[e.jsx(V,{}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})]})},Ht="https://cowboy-cards.dsouth.org",Jt=()=>{const[s,a]=r.useState(null),[t,n]=r.useState(!1),[c,i]=r.useState([]),[o,l]=r.useState(""),x=c.filter(d=>d.SetName.toLowerCase().includes(o.toLowerCase())||d.SetDescription&&d.SetDescription.toLowerCase().includes(o.toLowerCase()));return r.useEffect(()=>{async function d(){n(!0),a(null);try{const u=await T(`${Ht}/api/flashcards/sets/list`);i(u)}catch(u){console.error("Error fetching flashcard sets:",u),a(`Error fetching flashcard sets: ${u.message}`)}finally{n(!1)}}d()},[]),e.jsxs(M,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 w-1/2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold pb-8",children:"Public Flashcard Sets"}),t&&e.jsx("div",{children:"Loading..."}),s&&e.jsx("div",{className:"text-red-500 mt-2",children:s}),e.jsx(st,{value:o,onIonInput:d=>l(d.target.value),placeholder:"Search flashcard sets",className:"mb-4 w-1/2"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:x.map(d=>e.jsx(ae,{to:`/flashcards/${d.ID}`,children:e.jsx(_,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:e.jsxs(F,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:d.SetName}),e.jsx(je,{className:"text-sm text-gray-600",children:d.SetDescription||"No description"})]})})},d.ID))})]})]})},Ge="https://cowboy-cards.dsouth.org",Yt=()=>{const[s,a]=r.useState([]),[t,n]=r.useState(!1),[c,i]=r.useState(null);return r.useEffect(()=>{(async()=>{n(!0),i(null);try{const l=await T(`${Ge}/api/classes/list`);a(l),n(!1)}catch(l){i(`Error fetching classes: ${l.message}`)}finally{n(!1)}})()},[]),e.jsxs(M,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold pb-8",children:"Public Classes"}),t&&e.jsx("div",{children:"Loading..."}),c&&e.jsx("div",{className:"text-red-500 mt-2",children:c}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(o=>e.jsx(ae,{to:`/class/${o.ID}`,children:e.jsx(_,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:e.jsxs(F,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:o.ClassName}),e.jsx(je,{className:"text-sm text-gray-600",children:o.ClassDescription||"No description"}),e.jsx(v,{expand:"block",color:"primary",className:"mt-4",onClick:async()=>{try{const l=await T(`${Ge}/api/class_user`,{method:"POST",headers:{class_id:o.ID,role:"student"}});console.log("Join class response:",l)}catch(l){console.error("Error joining class:",l)}},children:"Join Class"})]})})},o.ID))})]})]})},ze="https://cowboy-cards.dsouth.org",Wt=()=>{const{id:s}=Ne();ge();const[a,t]=r.useState(""),[n,c]=r.useState(""),[i,o]=r.useState([]),[l,x]=r.useState(!0);return r.useEffect(()=>{const d=async()=>{try{const g=await(await fetch(`${ze}/api/flashcards/sets/`,{method:"GET",headers:{id:s}})).json();t(g.SetName),c(g.SetDescription)}catch(h){console.error("Failed to fetch set info",h)}},u=async()=>{x(!0);try{const g=await(await fetch(`${ze}/api/flashcards/list`,{method:"GET",headers:{set_id:s}})).json();o(Array.isArray(g)?g.map(y=>({front:y.Front,back:y.Back})):[])}catch(h){console.error("Failed to fetch cards",h),o([])}finally{x(!1)}};s&&(d(),u())},[s]),e.jsxs(M,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 pr-4",children:[e.jsx(v,{className:"rounded-lg",fill:"outline",style:{"--border-radius":"0.5rem"},onClick:()=>window.history.back(),children:"Back"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-3xl font-bold",children:a}),e.jsx("p",{className:"text-base mt-1 text-gray-700",children:n})]})]}),e.jsxs("div",{className:"self-start md:self-center flex gap-2 md:mt-0 mt-4 w-full md:w-auto",children:[e.jsx(v,{className:"rounded-lg w-1/2 md:w-auto",fill:"outline",style:{"--border-radius":"0.5rem"},routerLink:`/edit-set/${s}`,children:"Edit Set"}),e.jsx(v,{className:"rounded-lg w-1/2 md:w-auto",color:"primary",style:{"--border-radius":"0.5rem"},routerLink:`/flashcards/${s}`,children:"Study Set"})]})]}),e.jsx("div",{className:"mt-8 min-h-[200px] flex items-center justify-center",children:l?e.jsx(te,{name:"circular"}):i.length===0?e.jsx("div",{className:"text-center text-lg text-gray-900 dark:text-gray-400",children:"This set has no cards yet."}):e.jsx("div",{className:"w-full",children:i.map((d,u)=>e.jsx(_,{className:"mb-4 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsx("div",{className:"border-b border-gray-300 mb-3 pb-1 m-4",children:e.jsxs(B,{className:"text-md font-semibold text-gray-900 dark:text-gray-300",children:["Card ",u+1]})}),e.jsxs("div",{className:"flex flex-row justify-between items-start",children:[e.jsx("div",{className:"w-3/12 pr-4 border-r border-gray-300 m-4",children:e.jsx(B,{className:"block whitespace-pre-wrap text-lg text-gray-900 dark:text-gray-200",children:d.front})}),e.jsx("div",{className:"w-9/12 pl-4 m-4",children:e.jsx(B,{className:"block whitespace-pre-wrap text-lg text-gray-900 dark:text-gray-200",children:d.back})})]})]})},u))})})]})]})},Qt=()=>{const[s,a]=r.useState(!1),t=[{id:1,name:"Biology 101",students:25,sets:5,cardsMastered:85},{id:2,name:"Spanish Basics",students:18,sets:3,cardsMastered:78},{id:3,name:"World History",students:30,sets:7,cardsMastered:92}],n=t.length,c=t.reduce((l,x)=>l+x.students,0),i=t.reduce((l,x)=>l+x.sets,0),o=t.reduce((l,x)=>l+x.cardsMastered,0)/n;return e.jsxs(M,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Overview"}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-4 mb-8",children:[e.jsxs(_,{className:"rounded-lg border shadow-sm",children:[e.jsx(F,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Classes"})}),e.jsx(P,{children:e.jsx(B,{className:"text-2xl font-bold",children:n})})]}),e.jsxs(_,{className:"rounded-lg border shadow-sm",children:[e.jsx(F,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Students"})}),e.jsx(P,{children:e.jsx(B,{className:"text-2xl font-bold",children:c})})]}),e.jsxs(_,{className:"rounded-lg border shadow-sm",children:[e.jsx(F,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Sets"})}),e.jsx(P,{children:e.jsx(B,{className:"text-2xl font-bold",children:i})})]}),e.jsxs(_,{className:"rounded-lg border shadow-sm",children:[e.jsx(F,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Average Cards Mastered"})}),e.jsx(P,{children:e.jsx(B,{className:"text-2xl font-bold",children:o.toFixed(1)})})]})]}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Classes"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(l=>e.jsx(ae,{to:`/class/${l.id}`,children:e.jsxs(_,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(F,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(O,{className:"text-2xl font-semibold leading-none tracking-tight",children:l.name}),e.jsxs(B,{className:"text-sm text-gray-600",children:[l.students," students enrolled"]})]}),e.jsxs(P,{className:"flex flex-col gap-0 p-6 pt-0",children:[e.jsxs(B,{className:"text-sm text-gray-600",children:[l.sets," sets"]}),e.jsxs(B,{className:"text-sm text-gray-600",children:["Cards mastered: ",l.cardsMastered]})]})]})},l.id))})]})]})},ue=s=>e.jsxs("div",{children:[e.jsx(z,{children:e.jsx(Se,{type:"text",label:s.label,name:s.name,value:s.value,onIonChange:s.onChange})}),s.error&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.error})]}),Y=s=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium",children:[s.label,":"]}),e.jsx("span",{children:s.value})]}),Kt=s=>{var a,t,n,c,i,o,l,x,d,u,h,g;return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs(_,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(F,{className:"p-6",children:e.jsx(O,{className:"text-xl font-semibold text-primary",children:"Account Information"})}),e.jsx(P,{className:"p-6 pt-0",children:s.isEditing?e.jsxs("div",{className:"space-y-4",children:[e.jsx(ue,{label:"First Name",name:"first_name",value:((a=s.updatedInfo)==null?void 0:a.first_name)||"",error:s.errors.first_name,onChange:s.handleChange}),e.jsx(ue,{label:"Last Name",name:"last_name",value:((t=s.updatedInfo)==null?void 0:t.last_name)||"",error:s.errors.last_name,onChange:s.handleChange}),e.jsx(ue,{label:"Username",name:"username",value:((n=s.updatedInfo)==null?void 0:n.username)||"",error:s.errors.username,onChange:s.handleChange}),e.jsx(ue,{label:"Email",name:"email",value:((c=s.updatedInfo)==null?void 0:c.email)||"",error:s.errors.email,onChange:s.handleChange}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(v,{onClick:s.handleSave,children:"Save Changes"})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{label:"First Name",value:(i=s.userInfo)==null?void 0:i.first_name}),e.jsx(Y,{label:"Last Name",value:(o=s.userInfo)==null?void 0:o.last_name}),e.jsx(Y,{label:"Username",value:(l=s.userInfo)==null?void 0:l.username}),e.jsx(Y,{label:"Email",value:(x=s.userInfo)==null?void 0:x.email}),e.jsxs(v,{fill:"outline",onClick:s.handleEdit,className:"mt-4",children:[e.jsx(D,{slot:"start",icon:Qe}),"Edit Info"]})]})})]}),e.jsxs(_,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(F,{className:"p-6",children:e.jsx(O,{className:"text-xl font-semibold text-primary",children:"Account Stats"})}),e.jsx(P,{className:"p-6 pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(Y,{label:"Account Created",value:(d=s.userInfo)==null?void 0:d.created_at}),e.jsx(Y,{label:"Classes Taken",value:(u=s.userInfo)==null?void 0:u.numClasses}),e.jsx(Y,{label:"Cards Shown",value:(h=s.userInfo)==null?void 0:h.cardsSeen}),e.jsx(Y,{label:"Cards Mastered",value:(g=s.userInfo)==null?void 0:g.totalCardViews})]})})]})]})},Xt=s=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-6 py-6",children:e.jsxs(_,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(F,{className:"p-6",children:e.jsx(O,{className:"text-xl font-semibold text-primary",children:"Account Options"})}),e.jsx(P,{className:"p-6 pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(z,{children:e.jsxs(tt,{label:"Theme",value:s.theme,onIonChange:a=>s.setTheme(a.detail.value),interface:"popover",placeholder:"Select Theme",children:[e.jsx(Le,{value:"light",children:"Light"}),e.jsx(Le,{value:"dark",children:"Dark"})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Change Your Password"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Reset your account password."})]}),e.jsx(v,{onClick:()=>s.setShowPasswordAlert(!0),children:"Change Password"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Delete Your Account"}),e.jsx("p",{className:"text-xs text-gray-600",children:"This will delete all account data and can't be undone."})]}),e.jsx(v,{color:"danger",onClick:()=>s.setShowDeleteAlert(!0),children:"Delete Account"})]})]})})]})}),e.jsx(pe,{isOpen:s.showPasswordAlert,onDidDismiss:()=>s.setShowPasswordAlert(!1),header:"Change Password",inputs:[{name:"oldPassword",type:"password",placeholder:"Old Password"},{name:"newPassword",type:"password",placeholder:"New Password"},{name:"confirmPassword",type:"password",placeholder:"Confirm New Password"}],buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Save",handler:a=>a.newPassword!==a.confirmPassword?(s.presentToast({message:"Passwords do not match",duration:2e3,color:"danger"}),!0):(console.log("Password changed"),!0)}]}),e.jsx(pe,{isOpen:s.showDeleteAlert,onDidDismiss:()=>s.setShowDeleteAlert(!1),header:"Confirm Deletion",message:"Are you sure you want to delete your account? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Delete",handler:()=>{console.log("Account deleted")}}]})]}),Ve="https://cowboy-cards.dsouth.org",Zt=()=>{const{theme:s,setTheme:a}=bs(),[t,n]=r.useState(),[c,i]=r.useState(!0),[o,l]=r.useState(null),[x,d]=r.useState(null),[u,h]=r.useState(!1),[g,y]=r.useState(!1),[m,b]=r.useState(!1),[N,$]=r.useState(t),q=C=>{d(x===C?null:C)},W=()=>{$(t),b(!0)},J=async()=>{if(!f())return;const C=["first_name","last_name","username","email"];try{const I=C.filter(U=>N[U]!==t[U]).map(U=>T(`${Ve}/api/users/${U}`,{method:"PUT",headers:{[U]:N[U]}}));await Promise.all(I),n(N),b(!1)}catch(I){console.error(I),alert("Failed to update some fields. Please try again.")}},f=()=>{const C={};let I=!0;return N.first_name||(C.first_name="First name is required",I=!1),N.last_name||(C.last_name="Last name is required",I=!1),N.email?/\S+@\S+\.\S+/.test(N.email)||(C.email="Email is invalid",I=!1):(C.email="Email is required",I=!1),N.username||(C.username="Username is required",I=!1),N.first_name=N.first_name.trim(),N.last_name=N.last_name.trim(),N.email=N.email.trim(),N.username=N.username.trim(),S(C),I},[j,S]=r.useState({}),p=C=>{const{name:I}=C.target,U=C.detail.value;$(ye=>({...ye,[I]:U}))};r.useEffect(()=>{(async()=>{i(!0),l(null);try{const I=await T(`${Ve}/api/users/`,{method:"GET",headers:{}});n(I),$(I),console.log("data",I)}catch(I){console.log(`Failed to fetch User Data: ${I.message}`),l(`Failed to fetch User Data: ${I.message}`)}finally{i(!1)}})()},[]);const[w]=at();return e.jsxs(M,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("p",{className:"text-xl font-semibold text-primary",children:["Welcome back, ",(t==null?void 0:t.username)||"User","!"]})}),e.jsxs(v,{onClick:()=>window.history.back(),fill:"outline",className:"mb-6",children:[e.jsx(D,{slot:"start",icon:Ce}),"Back"]}),c&&e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(te,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading account details..."})]}),o&&!c&&e.jsx("div",{className:"text-red-500 text-center p-4 border border-red-500 rounded-md",children:o}),!c&&!o&&t&&e.jsxs(e.Fragment,{children:[e.jsx(Kt,{isEditing:m,errors:j,handleChange:p,handleSave:J,updatedInfo:N,userInfo:t,handleEdit:W}),e.jsx(Xt,{isEditing:m,errors:j,handleChange:p,handleSave:J,updatedInfo:N,userInfo:t,expandedClass:x,toggleClassDetails:q,showPasswordAlert:u,setShowPasswordAlert:h,showDeleteAlert:g,setShowDeleteAlert:y,theme:s,setTheme:a,presentToast:w})]})]})]})};rt();const ea=new pt;function sa(){return e.jsx(xt,{client:ea,children:e.jsx(Pt,{children:e.jsxs(At,{children:[e.jsx(nt,{children:e.jsx(ft,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsxs(lt,{children:[e.jsx(L,{exact:!0,path:"/",component:zt}),e.jsx(L,{exact:!0,path:"/home",component:Gt}),e.jsx(L,{exact:!0,path:"/class/:id",component:Ut}),e.jsx(L,{exact:!0,path:"/teacher",component:Qt}),e.jsx(L,{exact:!0,path:"/auth",component:fs}),e.jsx(L,{exact:!0,path:"/reset-password",component:Ct}),e.jsx(L,{exact:!0,path:"/public-cards",component:Jt}),e.jsx(L,{exact:!0,path:"/user-account",component:Zt}),e.jsx(L,{exact:!0,path:"/flashcards/:id",component:qt}),e.jsx(L,{exact:!0,path:"/create-set",component:Be}),e.jsx(L,{exact:!0,path:"/edit-set/:id",component:Be}),e.jsx(L,{exact:!0,path:"/class/create",component:Mt}),e.jsx(L,{exact:!0,path:"/public-classes",component:Yt}),e.jsx(L,{exact:!0,path:"/set-overview/:id",component:Wt}),e.jsx(L,{component:Vt})]})})})}),e.jsx(Dt,{}),e.jsx(It,{})]})})})}const ta=document.getElementById("root"),aa=ot(ta);aa.render(e.jsx(sa,{}));export{pa as _,R as c,fa as g};
//# sourceMappingURL=index-Bo5EiLIW.js.map
