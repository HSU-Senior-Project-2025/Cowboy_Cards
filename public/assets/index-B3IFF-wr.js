import{t as Ss,c as Cs,r,j as e,a as fe,S as Is,R as Ve,u as He,C as Je,L as ae,b as ks,I as S,d as k,e as Es,$ as Ds,V as Ye,f as We,A as Ke,g as Qe,X as Xe,T as Ze,D as es,P as Ts,h as ss,i as Ps,k as Se,l as As,m as we,n as ue,o as ts,p as ee,q as L,s as Y,v as A,w as Fs,x as oe,y as z,z as _s,B as te,E as P,F as Ce,G as Ie,H as ke,J as Ls,K as as,M as le,N as rs,O as Os,Q as Rs,U as Us,W as $s,Y as Ms,Z as Bs,_ as pe,a0 as zs,a1 as Gs,a2 as qs,a3 as T,a4 as R,a5 as U,a6 as Vs,a7 as Hs,a8 as Js,a9 as $e,aa as Ys,ab as Ws,ac as Ks,ad as Qs,ae as Xs,af as Zs,ag as et,ah as ls,ai as he,aj as je,ak as W,al as st,am as Me,an as tt,ao as xe,ap as at,aq as rt,ar as lt,as as Be,at as nt,au as ot,av as ct,aw as it,ax as dt,ay as mt,az as O,aA as ut}from"./nm-DJaZefEY.js";import"./index-B3IFF-wr.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();function ha(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function I(...s){return Ss(Cs(s))}const ht=fe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ee=r.forwardRef(({className:s,variant:a,...t},l)=>e.jsx("div",{ref:l,role:"alert",className:I(ht({variant:a}),s),...t}));Ee.displayName="Alert";const xt=r.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:I("mb-1 font-medium leading-none tracking-tight",s),...a}));xt.displayName="AlertTitle";const De=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("text-sm [&_p]:leading-relaxed",s),...a}));De.displayName="AlertDescription";const ft=fe("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=r.forwardRef(({className:s,variant:a,size:t,asChild:l=!1,...o},c)=>{const i=l?Is:"button";return e.jsx(i,{className:I(ft({variant:a,size:t,className:s})),ref:c,...o})});K.displayName="Button";const ce=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));ce.displayName="Card";const Te=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex flex-col space-y-1.5 p-6",s),...a}));Te.displayName="CardHeader";const Pe=r.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:I("text-2xl font-semibold leading-none tracking-tight",s),...a}));Pe.displayName="CardTitle";const Ae=r.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:I("text-sm text-muted-foreground",s),...a}));Ae.displayName="CardDescription";const Fe=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("p-6 pt-0",s),...a}));Fe.displayName="CardContent";const _e=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex items-center p-6 pt-0",s),...a}));_e.displayName="CardFooter";const X=r.forwardRef(({className:s,type:a,...t},l)=>e.jsx("input",{type:a,className:I("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:l,...t}));X.displayName="Input";const pt=fe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=r.forwardRef(({className:s,...a},t)=>e.jsx(Ve,{ref:t,className:I(pt(),s),...a}));Z.displayName=Ve.displayName;const jt=1,gt=1e6;let be=0;function Nt(){return be=(be+1)%Number.MAX_SAFE_INTEGER,be.toString()}const ye=new Map,ze=s=>{if(ye.has(s))return;const a=setTimeout(()=>{ye.delete(s),ne({type:"REMOVE_TOAST",toastId:s})},gt);ye.set(s,a)},vt=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,jt)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?ze(t):s.toasts.forEach(l=>{ze(l.id)}),{...s,toasts:s.toasts.map(l=>l.id===t||t===void 0?{...l,open:!1}:l)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},de=[];let me={toasts:[]};function ne(s){me=vt(me,s),de.forEach(a=>{a(me)})}function bt({...s}){const a=Nt(),t=o=>ne({type:"UPDATE_TOAST",toast:{...o,id:a}}),l=()=>ne({type:"DISMISS_TOAST",toastId:a});return ne({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:o=>{o||l()}}}),{id:a,dismiss:l,update:t}}function ns(){const[s,a]=r.useState(me);return r.useEffect(()=>(de.push(a),()=>{const t=de.indexOf(a);t>-1&&de.splice(t,1)}),[s]),{...s,toast:bt,dismiss:t=>ne({type:"DISMISS_TOAST",toastId:t})}}const Ge={method:"GET",headers:{},credentials:"include"},yt="https://cowboy-cards.dsouth.org";async function w(s="",a=Ge){const t={...Ge,...a};try{const l=await fetch(yt+s,t);if(!l.ok)throw console.log("resp",l),new Error(`HTTP error! Status: ${l.status}`);return await l.json()}catch(l){throw console.error("API request failed:",l),l}}const wt="modulepreload",St=function(s,a){return new URL(s,a).href},qe={},xa=function(a,t,l){let o=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),u=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.allSettled(t.map(d=>{if(d=St(d,l),d in qe)return;qe[d]=!0;const h=d.endsWith(".css"),N=h?'[rel="stylesheet"]':"";if(!!l)for(let m=i.length-1;m>=0;m--){const j=i[m];if(j.href===d&&(!h||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${N}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":wt,h||(g.as="script"),g.crossOrigin="",g.href=d,u&&g.setAttribute("nonce",u),document.head.appendChild(g),h)return new Promise((m,j)=>{g.addEventListener("load",m),g.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${d}`)))})}))}function c(i){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=i,window.dispatchEvent(n),!n.defaultPrevented)throw i}return o.then(i=>{for(const n of i||[])n.status==="rejected"&&c(n.reason);return a().catch(c)})},os=()=>{const[s,a]=r.useState(!0),[t,l]=r.useState(!1),[o,c]=r.useState(""),[i,n]=r.useState(""),[u,d]=r.useState(""),[h,N]=r.useState(""),[x,g]=r.useState(""),[m,j]=r.useState({}),f=He(),{toast:_}=ns(),b=()=>{const C={};let E=!0;return o?/\S+@\S+\.\S+/.test(o)||(C.email="Email is invalid",E=!1):(C.email="Email is required",E=!1),i?i.length<8&&(C.password="Password must be at least 8 characters",E=!1):(C.password="Password is required",E=!1),!s&&!u&&(C.username="Username is required",E=!1),j(C),E},$=async C=>{if(C.preventDefault(),!!b()){l(!0),j({});try{let E;s?E=await w("/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:o,password:i})}):E=await w("/signup",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:u,email:o,password:i,first_name:h,last_name:x})}),_({title:s?"Welcome back!":"Account created",description:s?"You have been successfully logged in.":"Your account has been created successfully."}),f.push("/home")}catch(E){console.error("Authentication error:",E),j(E),Object.keys(m).length===0&&j({general:E.message||"An unexpected error occurred. Please try again."}),_({title:"Authentication failed",description:E.message||"Please check your credentials and try again.",variant:"destructive"})}finally{l(!1)}}},q=()=>{j({}),s?(d(""),N(""),g("")):(c(""),n(""))};return e.jsxs(ce,{className:"w-[350px]",children:[e.jsxs(Te,{children:[e.jsx(Pe,{children:s?"Welcome back":"Create account"}),e.jsx(Ae,{children:s?"Enter your credentials to continue":"Sign up for a new account"})]}),e.jsxs("form",{onSubmit:$,children:[e.jsxs(Fe,{className:"space-y-4",children:[m.general&&e.jsxs(Ee,{variant:"destructive",className:"mb-4",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(De,{children:m.general})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"username",children:"Username"}),e.jsx(X,{id:"username",type:"text",placeholder:"johndoe",value:u,onChange:C=>d(C.target.value),required:!0,className:m.username?"border-red-500":""}),m.username&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"firstName",children:"First Name"}),e.jsx(X,{id:"firstName",type:"text",placeholder:"John",value:h,onChange:C=>N(C.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"lastName",children:"Last Name"}),e.jsx(X,{id:"lastName",type:"text",placeholder:"Doe",value:x,onChange:C=>g(C.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(X,{id:"email",type:"email",placeholder:"name@example.com",value:o,onChange:C=>c(C.target.value),required:!0,className:m.email?"border-red-500":""}),m.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"password",children:"Password"}),e.jsx(X,{id:"password",type:"password",value:i,onChange:C=>n(C.target.value),required:!0,className:m.password?"border-red-500":""}),m.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.password}),!s&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),s&&e.jsx(ae,{to:"/reset-password",className:"text-sm text-purple-500",children:"Forgot password?"})]}),e.jsxs(_e,{className:"flex flex-col space-y-4",children:[e.jsxs(K,{type:"submit",className:"w-full",disabled:t,children:[e.jsx(ks,{className:"mr-2 h-4 w-4"}),t?s?"Signing in...":"Signing up...":s?"Sign in":"Sign up"]}),e.jsx(K,{variant:"link",type:"button",onClick:()=>{a(!s),q()},className:"text-sm",disabled:t,children:s?"Need an account? Sign up":"Already have an account? Sign in"}),e.jsxs(S,{expand:"block",fill:"outline",className:"flex items-center justify-center space-x-2",onClick:()=>{console.log("Sign in with Google clicked")},children:[e.jsx(k,{slot:"start",src:"https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw",className:"h-5 w-5"}),e.jsx("p",{}),"Sign in with Google",e.jsx("img",{slot:"start",src:"https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw",className:"h-10 w-10"})]})]})]})]})},Ct=()=>{const[s,a]=r.useState(""),[t,l]=r.useState({}),o=c=>{c.preventDefault()};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs(ce,{className:"w-[350px]",children:[e.jsxs(Te,{children:[e.jsx(Pe,{children:"Reset Password"}),e.jsx(Ae,{children:"Enter your email to reset your password"})]}),e.jsxs("form",{onSubmit:o,children:[e.jsxs(Fe,{className:"space-y-4",children:[t.general&&e.jsxs(Ee,{variant:"destructive",className:"mb-4",children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(De,{children:t.general})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(X,{id:"email",type:"email",placeholder:"name@example.com",value:s,onChange:c=>a(c.target.value),required:!0,className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email})]})]}),e.jsx(_e,{className:"flex flex-col space-y-4",children:e.jsx(K,{type:"submit",className:"w-full",children:"Send Reset Link"})})]})]})})},It=({...s})=>{const{theme:a="system"}=Es();return e.jsx(Ds,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},kt=Ts,cs=r.forwardRef(({className:s,...a},t)=>e.jsx(Ye,{ref:t,className:I("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a}));cs.displayName=Ye.displayName;const Et=fe("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),is=r.forwardRef(({className:s,variant:a,...t},l)=>e.jsx(We,{ref:l,className:I(Et({variant:a}),s),...t}));is.displayName=We.displayName;const Dt=r.forwardRef(({className:s,...a},t)=>e.jsx(Ke,{ref:t,className:I("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a}));Dt.displayName=Ke.displayName;const ds=r.forwardRef(({className:s,...a},t)=>e.jsx(Qe,{ref:t,className:I("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:e.jsx(Xe,{className:"h-4 w-4"})}));ds.displayName=Qe.displayName;const ms=r.forwardRef(({className:s,...a},t)=>e.jsx(Ze,{ref:t,className:I("text-sm font-semibold",s),...a}));ms.displayName=Ze.displayName;const us=r.forwardRef(({className:s,...a},t)=>e.jsx(es,{ref:t,className:I("text-sm opacity-90",s),...a}));us.displayName=es.displayName;function Tt(){const{toasts:s}=ns();return e.jsxs(kt,{children:[s.map(function({id:a,title:t,description:l,action:o,...c}){return e.jsxs(is,{...c,children:[e.jsxs("div",{className:"grid gap-1",children:[t&&e.jsx(ms,{children:t}),l&&e.jsx(us,{children:l})]}),o,e.jsx(ds,{})]},a)}),e.jsx(cs,{})]})}const Pt=Ps,At=r.forwardRef(({className:s,sideOffset:a=4,...t},l)=>e.jsx(ss,{ref:l,sideOffset:a,className:I("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));At.displayName=ss.displayName;const hs=r.createContext(void 0);function Ft({children:s}){const[a,t]=r.useState(()=>{const l=localStorage.getItem("theme");return l||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return r.useEffect(()=>{localStorage.setItem("theme",a),a==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"))},[a]),e.jsx(hs.Provider,{value:{theme:a,setTheme:t},children:s})}function xs(){const s=r.useContext(hs);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s}const _t=({isOpen:s,onDidDismiss:a,classId:t,existingSetIds:l,onSetAdded:o})=>{const[c,i]=r.useState([]),[n,u]=r.useState([]),[d,h]=r.useState(null),[N,x]=r.useState(!1),[g,m]=r.useState(null),[j]=Se(),f=r.useCallback(async()=>{x(!0),m(null);try{const b=await w("/api/set_user/list",{method:"GET",headers:{}});i(b||[])}catch(b){console.error("Failed to fetch user sets:",b),m(`Failed to load your sets: ${b instanceof Error?b.message:"Unknown error"}`),i([])}finally{x(!1)}},[]);r.useEffect(()=>{s?f():(i([]),u([]),h(null),m(null),x(!1))},[s,f]),r.useEffect(()=>{const b=c.filter($=>!l.includes($.SetID));u(b)},[c,l]);const _=async()=>{if(!d||!t){j({message:"Please select a set to add.",duration:2e3,color:"warning"});return}x(!0),m(null);try{await w("/api/class_set/",{method:"POST",headers:{id:t,set_id:d.toString()}}),j({message:"Set added successfully!",duration:2e3,color:"success"}),o(),a()}catch(b){console.error("Failed to add set to class:",b);const $=`Failed to add set: ${b instanceof Error?b.message:"Unknown error"}`;m($),j({message:$,duration:3e3,color:"danger"})}finally{x(!1)}};return console.log(d),console.log("availableSets",n),e.jsxs(As,{isOpen:s,onDidDismiss:a,children:[e.jsx(we,{children:e.jsxs(ue,{children:[e.jsx(ts,{children:"Add Set to Class"}),e.jsx(ee,{slot:"end",children:e.jsx(S,{onClick:a,color:"medium",children:"Cancel"})})]})}),e.jsxs(L,{className:"ion-padding",children:[N&&!n.length?e.jsxs("div",{className:"flex justify-center items-center h-full",children:[e.jsx(Y,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading your sets..."})]}):g?e.jsx(A,{color:"danger",children:e.jsx("p",{children:g})}):n.length===0?e.jsx("p",{className:"text-center text-gray-500 mt-4",children:"You have no available sets to add to this class. Create a new set or check if all your sets are already added."}):e.jsx(Fs,{value:d,onIonChange:b=>{console.log("e.detail.value",b.detail.value),h(Number(b.detail.value))},children:e.jsx(oe,{children:n.map(b=>e.jsxs(z,{children:[e.jsx(_s,{slot:"start",value:b.SetID},b.SetID),e.jsxs(te,{children:[e.jsx("h2",{children:b.SetName}),e.jsx("p",{className:"text-sm text-gray-500",children:b.SetDescription})]})]},b.SetID))})}),g&&n.length>0&&e.jsx(A,{color:"danger",className:"block mt-4",children:e.jsx("p",{children:g})})]}),!N&&n.length>0&&e.jsx("div",{className:"ion-padding",children:e.jsx(S,{expand:"block",onClick:_,disabled:!d,className:"ion-margin-bottom",children:N?e.jsx(Y,{name:"dots"}):"Add Selected Set"})})]})},Lt=({isTeacher:s,classId:a,onAddSetClick:t})=>e.jsxs(P,{children:[" ",e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[" ",e.jsxs(S,{routerLink:"/home",color:"medium",children:[e.jsx(k,{slot:"start",icon:Ce}),"Back"]}),s&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(S,{onClick:t,color:"secondary",disabled:!a,children:[e.jsx(k,{slot:"start",icon:Ie}),"Add Existing Set"]}),e.jsxs(S,{routerLink:`/create-set?classId=${a}`,color:"primary",disabled:!a,children:[e.jsx(k,{slot:"start",icon:ke}),"Create New Set"]})]})]})]}),se=s=>e.jsxs("div",{children:[e.jsx(z,{children:e.jsx(Ls,{type:"text",label:s.label,name:s.name,value:s.value,onIonChange:s.onChange})}),s.error&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.error})]}),Ot=({classData:s,isTeacher:a,loading:t,handleEdit:l,isEditing:o,updatedInfo:c,errors:i,handleChange:n,handleSave:u,handleCancel:d})=>e.jsx(e.Fragment,{children:o?e.jsxs(e.Fragment,{children:[e.jsx(se,{label:"Class Name",name:"class_name",value:c.class_name,onChange:n,error:i.className}),e.jsx(se,{label:"Class Description",name:"class_description",value:c.class_description,onChange:n,error:i.classDescription}),i.general&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:i.general}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsx(S,{onClick:u,color:"primary",size:"small",children:"Save"}),e.jsx(S,{onClick:d,color:"medium",size:"small",children:"Cancel"})]})]}):t?e.jsx("div",{children:"Loading..."}):s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center",children:[" ",e.jsx("h1",{className:"text-2xl font-bold",children:t?"Loading...":s.ClassName}),a&&!o&&e.jsx(k,{icon:ke,size:"large",color:"primary",className:"hover:transform hover:scale-110 cursor-pointer p-2",onClick:l})]}),e.jsx("p",{className:"text-gray-600",children:t?"Loading...":s.ClassDescription})]}):e.jsx("h1",{children:"Class details unavailable"})}),Rt=({selectedTab:s,onTabChange:a})=>e.jsxs(as,{value:s,onIonChange:t=>a(t.detail.value),className:"w-full mb-6",children:[e.jsxs(le,{value:"flashcards",children:[e.jsx(k,{icon:rs,className:"mr-2"}),e.jsx(te,{children:"Flashcard Sets"})]}),e.jsxs(le,{value:"leaderboard",children:[e.jsx(k,{icon:Os,className:"mr-2"}),e.jsx(te,{children:"Leaderboard"})]}),e.jsxs(le,{value:"students",children:[e.jsx(k,{icon:Rs,className:"mr-2"}),e.jsx(te,{children:"Students"})]})]}),fs=({front:s,back:a,onAdvance:t,cardId:l})=>{const[o,c]=r.useState(!1),i=async d=>{try{const h=await w(`${d}`,{method:"POST",headers:{card_id:l.toString()}});console.log(`Score update successful for card ${l}:`,h),t==null||t()}catch(h){console.error(`Failed to update score for card ${l}:`,h)}},n=()=>{i("/api/card_history/incorrect")},u=()=>{i("/api/card_history/correct")};return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:`flip-card cursor-pointer ${o?"flipped":""}`,onClick:()=>c(!o),children:[e.jsx(ce,{className:"flip-card-front p-8 min-h-[300px] flex items-center justify-center text-center",children:e.jsx("p",{className:"text-xl",children:s})}),e.jsx(ce,{className:"flip-card-back p-8 min-h-[300px] flex items-center justify-center text-center absolute top-0 w-full",children:e.jsx("p",{className:"text-xl",children:a})})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsxs(K,{variant:"outline",className:"w-32",onClick:n,children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Learning"]}),e.jsxs(K,{className:"w-32",onClick:u,children:[e.jsx(Us,{className:"mr-2 h-4 w-4"}),"Mastered"]})]})]})},ps=r.createContext(null);function ge(){const s=r.useContext(ps);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const Le=r.forwardRef(({orientation:s="horizontal",opts:a,setApi:t,plugins:l,className:o,children:c,...i},n)=>{const[u,d]=$s({...a,axis:s==="horizontal"?"x":"y"},l),[h,N]=r.useState(!1),[x,g]=r.useState(!1),m=r.useCallback(b=>{b&&(N(b.canScrollPrev()),g(b.canScrollNext()))},[]),j=r.useCallback(()=>{d==null||d.scrollPrev()},[d]),f=r.useCallback(()=>{d==null||d.scrollNext()},[d]),_=r.useCallback(b=>{b.key==="ArrowLeft"?(b.preventDefault(),j()):b.key==="ArrowRight"&&(b.preventDefault(),f())},[j,f]);return r.useEffect(()=>{!d||!t||t(d)},[d,t]),r.useEffect(()=>{if(d)return m(d),d.on("reInit",m),d.on("select",m),()=>{d==null||d.off("select",m)}},[d,m]),e.jsx(ps.Provider,{value:{carouselRef:u,api:d,opts:a,orientation:s||((a==null?void 0:a.axis)==="y"?"vertical":"horizontal"),scrollPrev:j,scrollNext:f,canScrollPrev:h,canScrollNext:x},children:e.jsx("div",{ref:n,onKeyDownCapture:_,className:I("relative",o),role:"region","aria-roledescription":"carousel",...i,children:c})})});Le.displayName="Carousel";const Oe=r.forwardRef(({className:s,...a},t)=>{const{carouselRef:l,orientation:o}=ge();return e.jsx("div",{ref:l,className:"overflow-hidden",children:e.jsx("div",{ref:t,className:I("flex",o==="horizontal"?"-ml-4":"-mt-4 flex-col",s),...a})})});Oe.displayName="CarouselContent";const Re=r.forwardRef(({className:s,...a},t)=>{const{orientation:l}=ge();return e.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:I("min-w-0 shrink-0 grow-0 basis-full",l==="horizontal"?"pl-4":"pt-4",s),...a})});Re.displayName="CarouselItem";const js=r.forwardRef(({className:s,variant:a="outline",size:t="icon",...l},o)=>{const{orientation:c,scrollPrev:i,canScrollPrev:n}=ge();return e.jsxs(K,{ref:o,variant:a,size:t,className:I("absolute  h-8 w-8 rounded-full",c==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!n,onClick:i,...l,children:[e.jsx(Ms,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]})});js.displayName="CarouselPrevious";const gs=r.forwardRef(({className:s,variant:a="outline",size:t="icon",...l},o)=>{const{orientation:c,scrollNext:i,canScrollNext:n}=ge();return e.jsxs(K,{ref:o,variant:a,size:t,className:I("absolute h-8 w-8 rounded-full",c==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!n,onClick:i,...l,children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})});gs.displayName="CarouselNext";const Ut=s=>{var i;const a=pe(),[t,l]=r.useState([]),[o,c]=r.useState(null);return r.useEffect(()=>{async function n(){console.log("selectedSet",o);const u=await w("/api/flashcards/list",{method:"GET",headers:{set_id:o}});console.log("cards",u),l(u)}o&&n()},[o]),e.jsx("div",{className:"mt-6",children:s.loading?e.jsx("div",{children:"Loading..."}):o===null?(i=s.flashcardSets)!=null&&i.length?e.jsx(zs,{children:e.jsx(Gs,{children:s.flashcardSets.sort((n,u)=>n.ID-u.ID).map(n=>e.jsx(qs,{size:"12",sizeMd:"6",sizeLg:"4",children:e.jsxs(T,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-200 rounded-lg border shadow-sm",onClick:()=>a.push(`/set-overview/${n.ID}`),children:[e.jsx(R,{children:e.jsx(U,{className:"text-lg font-semibold",children:n.SetName})}),e.jsx(P,{children:e.jsx("p",{className:"text-muted-foreground mb-2",children:n.SetDescription})})]})},n.ID))})}):e.jsx("p",{children:"No flashcard sets available."}):e.jsxs(e.Fragment,{children:[e.jsxs(S,{fill:"outline",onClick:()=>c(null),className:"mb-6",children:[e.jsx(k,{slot:"start",icon:Ce}),"Back to Sets"]}),e.jsxs("div",{className:"w-full max-w-2xl mx-auto relative",children:[e.jsxs(Le,{orientation:"vertical",className:"w-full",setApi:s.setApi,children:[e.jsx(Oe,{className:"-mt-1 h-[400px]",children:t.map(n=>e.jsx(Re,{children:e.jsx(fs,{front:n.Front,back:n.Back,cardId:n.ID})},n.ID))}),e.jsx(js,{}),e.jsx(gs,{})]}),e.jsx("div",{className:"absolute right-[-50px] top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:t.map((n,u)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${u===s.currentCardIndex?"bg-primary":"bg-gray-300"}`},u))})]})]})})},$t=({flashcardSets:s,currentCardIndex:a,setApi:t,loading:l})=>e.jsx(Ut,{flashcardSets:s,currentCardIndex:a,setApi:t,loading:l}),Ue=()=>e.jsx(Vs,{className:"ion-no-border fixed bottom-0 w-full",children:e.jsxs(ue,{children:[e.jsx(ee,{slot:"start",children:e.jsx(S,{routerLink:"/home",children:e.jsx(k,{icon:Hs})})}),e.jsx(A,{className:"mx-auto text-center text-sm text-gray-500",children:"Cowboy Cards 2025. Built for learning and fun."})]})}),Mt=({leaderboard:s})=>e.jsxs(T,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{children:e.jsx(U,{className:"text-xl font-semibold",children:"Class Leaderboard"})}),e.jsx(P,{children:e.jsx(oe,{className:"space-y-3",lines:"none",children:s===null?e.jsx("h1",{className:"text-center text-gray-500",children:"No scores available"}):s.map(a=>e.jsxs(z,{className:"muted-item p-3",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:"font-medium text-lg",children:a.Username})}),e.jsxs("span",{slot:"end",className:"text-primary font-semibold",children:[a.ClassScore," points"]})]},a.UserID))})})]}),Bt=({leaderboardData:s,loadingScores:a})=>e.jsx(e.Fragment,{children:a?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(Y,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Calculating scores..."})]}):e.jsx(Mt,{leaderboard:s})}),G=()=>{const[s,a]=r.useState(null),t=d=>a(d.nativeEvent),l=()=>a(null),o=d=>{var h;c.push(d),(h=document.querySelector("ion-menu"))==null||h.close()},c=He(),{theme:i,setTheme:n}=xs(),u=()=>{n(i==="dark"?"light":"dark")};return e.jsxs(e.Fragment,{children:[e.jsxs(Js,{side:"start",contentId:"main-content",children:[e.jsx(we,{children:e.jsx(ue,{children:e.jsx(ee,{slot:"start",children:e.jsx($e,{children:e.jsx(S,{children:e.jsx(k,{icon:Ys})})})})})}),e.jsx(L,{children:e.jsxs(oe,{children:[e.jsx(z,{button:!0,onClick:()=>o("/home"),children:"My Dashboard"}),e.jsx(z,{button:!0,onClick:()=>o("/public-cards"),children:"Public Cards"}),e.jsx(z,{button:!0,onClick:()=>o("/public-classes"),children:"Public Classes"}),e.jsx(z,{button:!0,onClick:()=>o("/user-account"),children:"My Account"})]})})]}),e.jsx(we,{children:e.jsxs(ue,{children:[e.jsx(ee,{slot:"start",children:e.jsx($e,{children:e.jsx(S,{children:e.jsx(k,{icon:Ws})})})}),e.jsx(ts,{color:"primary",className:"text-lg md:text-xl lg:text-2xl font-bold hover:translate-x-1 transition-all duration-300 cursor-pointer",onClick:()=>c.push("/home"),children:"Cowboy Cards"}),e.jsxs(ee,{slot:"end",children:[e.jsx(S,{onClick:t,children:e.jsx(k,{icon:Ks,className:"text-[32px] stroke-[2]"})}),e.jsx(Qs,{event:s,isOpen:!!s,onDidDismiss:l,children:e.jsx(L,{className:"p-2",children:e.jsxs(oe,{children:[e.jsx(z,{button:!0,onClick:()=>{l(),c.push("/create-set")},children:"Create Set"}),e.jsx(z,{button:!0,onClick:()=>{l(),c.push("/class/create")},children:"Create Class"}),e.jsx(z,{button:!0,onClick:()=>{l(),c.push("/public-classes")},children:"Join Class"})]})})}),e.jsx(S,{fill:"clear",onClick:u,children:e.jsx(k,{slot:"icon-only",icon:i==="dark"?Xs:Zs})})]}),e.jsx(ee,{slot:"end",children:e.jsx(S,{routerLink:"/user-account",children:e.jsx(k,{icon:et,size:"large"})})})]})})]})},zt=({students:s,isTeacher:a,onDeleteStudent:t})=>e.jsxs(T,{className:"mt-6",children:[e.jsx(R,{children:e.jsx(U,{className:"text-xl font-semibold",children:"Class Students"})}),e.jsx(P,{children:e.jsx(oe,{className:"space-y-3",lines:"none",children:s.map(l=>e.jsxs(z,{className:"muted-item p-3",children:[e.jsxs("span",{className:"font-medium",children:[l.FirstName," ",l.LastName]}),e.jsx("span",{slot:"end",className:"text-muted-foreground",children:l.email}),a&&e.jsx(k,{slot:"end",icon:ls,color:"danger",className:"cursor-pointer",onClick:()=>t(l.UserID)})]},l.UserID))})})]}),Gt=({isTeacher:s,students:a,handleActualDelete:t})=>{const[l,o]=r.useState({isOpen:!1,studentId:null}),c=i=>{o({isOpen:!0,studentId:i})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col",children:e.jsx(zt,{isTeacher:s,students:a,onDeleteStudent:c})}),e.jsx(he,{isOpen:l.isOpen,onDidDismiss:()=>o({isOpen:!1,studentId:null}),header:"Confirm Deletion",message:"Are you sure you want to remove this student from the class? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Delete",handler:()=>{l.studentId!==null&&(t(l.studentId),console.log(`Student deletion initiated for ID: ${l.studentId}`))}}]})]})},qt=()=>{const{id:s}=je();console.log("id",s);const[a,t]=r.useState(0),[l,o]=r.useState(),[c,i]=r.useState("flashcards"),[n,u]=r.useState(!1),[d,h]=r.useState(),[N,x]=r.useState([]),[g,m]=r.useState([]),[j,f]=r.useState(null),[_,b]=r.useState(!1),[$,q]=r.useState([]),[C,E]=r.useState(!1),[re,J]=r.useState(!1),[M,p]=r.useState({class_name:"",class_description:""}),[y,v]=r.useState(!1),B=()=>{console.log("Handling Edit"),p({class_name:(d==null?void 0:d.ClassName)||"",class_description:(d==null?void 0:d.ClassDescription)||""}),J(!0)},[Q,Ne]=r.useState({}),Ns=()=>{const D={};let F=!0;return M.class_name=M.class_name.trim(),M.class_description=M.class_description.trim(),M.class_name||(D.className="Class name is required",F=!1),M.class_description||(D.classDescription="Class description is required",F=!1),Ne(D),F},vs=async()=>{if(!Ns()){console.log("Form validation failed:",Q);return}const D=["class_name","class_description"];try{const F=D.map(V=>w(`/api/classes/${V}`,{method:"PUT",headers:{id:s,[V]:M[V]}}));await Promise.all(F),h(V=>({...V,ClassName:M.class_name,ClassDescription:M.class_description})),J(!1)}catch(F){console.error(F),alert("Failed to update some fields. Please try again.")}},bs=D=>{const{name:F}=D.target,V=D.detail.value;p(ie=>({...ie,[F]:V}))},ys=()=>{J(!1)},ve=r.useCallback(async()=>{b(!0),E(!0),f(null);try{const[D,F,V,ie]=await Promise.all([w("/api/classes/",{method:"GET",headers:{id:s}}),w("/api/class_set/list_sets",{method:"GET",headers:{id:s}}),w("/api/class_user/members",{method:"GET",headers:{class_id:s}}),w("/api/classes/leaderboard",{method:"GET",headers:{id:s}})]);console.log("data",D),u(D.Role==="teacher"),h(D),console.log("sets",F),x(F||[]),console.log("users",V),m(V||[]),console.log("scores",ie),q(ie||[])}catch(D){let F="Unknown error";D instanceof Error&&(F=D.message),f(`Error fetching class data: ${F}`),h(void 0),x([]),m([]),q([])}finally{b(!1),E(!1)}},[s]);r.useEffect(()=>{ve()},[ve]);const ws=async D=>{if(D!==null)try{await w("/api/class_user/",{method:"DELETE",headers:{class_id:s,student_id:D}})}catch(F){console.error("Error deleting student:",F),f("Error deleting student")}};return r.useEffect(()=>{l&&l.on("select",()=>{t(l.selectedScrollSnap())})},[l]),e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsxs(L,{className:"ion-padding",children:[e.jsxs("div",{id:"main-content",className:"max-w-4xl mx-auto",children:[j&&e.jsx("div",{className:"text-red-500",children:j}),e.jsx(Ot,{classData:d,isTeacher:n,loading:_,handleEdit:B,isEditing:re,updatedInfo:M,errors:Q,handleChange:bs,handleSave:vs,handleCancel:ys}),e.jsx(Lt,{isTeacher:n,classId:s,onAddSetClick:()=>v(!0)}),e.jsx(Rt,{selectedTab:c,onTabChange:i}),c==="leaderboard"&&e.jsx(Bt,{leaderboardData:$,loadingScores:C}),c==="flashcards"&&e.jsx($t,{flashcardSets:N,currentCardIndex:a,setApi:o,loading:_}),c==="students"&&e.jsx(Gt,{isTeacher:n,students:g,handleActualDelete:ws})]}),e.jsx(Ue,{})]}),e.jsx(_t,{isOpen:y,onDidDismiss:()=>v(!1),classId:s,existingSetIds:N.map(D=>D.ID),onSetAdded:ve})]})},Vt=()=>{const[s,a]=r.useState(!1),[t,l]=r.useState(!1),[o,c]=r.useState(null),[i,n]=r.useState({className:"",description:""}),[u,d]=r.useState(!1);return r.useEffect(()=>{async function h(){if(s){l(!0),c(null);try{const N=await w("/api/classes",{method:"POST",headers:{class_name:i.className,class_description:i.description}});console.log("Class created successfully:",N),a(!1),n({className:"",description:""}),d(!0),l(!1)}catch(N){c(`Failed to create class: ${N.message}`)}finally{l(!1)}}}s&&h()},[s,i]),e.jsxs(L,{children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[o&&e.jsx("div",{className:"text-red-500 mt-2",children:o}),e.jsxs("form",{children:[e.jsx(T,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsx(W,{placeholder:"Enter Class Name",value:i.className,onIonChange:h=>n(N=>({...N,className:h.detail.value||""})),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),e.jsx(W,{placeholder:"Enter Class Description",value:i.description,onIonChange:h=>n(N=>({...N,description:h.detail.value||""})),rows:1,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}})]})}),e.jsx("div",{className:"flex flex-col md:flex-row justify-center md:justify-end gap-4 mt-8",children:e.jsx(S,{color:"success",disabled:t,onClick:()=>a(!0),children:t?"Creating...":"Create Class"})})]}),u&&e.jsx(A,{children:e.jsx("p",{children:"Class created successfully!"})})]})]})},Ht=()=>{const s=pe(),[a,t]=r.useState(""),[l,o]=r.useState(""),[c,i]=r.useState({title:"",description:""}),[n,u]=r.useState(!1),[d,h]=r.useState(null),N=async()=>{u(!0),h(null);const x={title:"",description:""};let g=!1;if(a.trim()||(x.title="Title is required",g=!0),l.trim()||(x.description="Description is required",g=!0),i(x),g){u(!1);return}try{const m=await w("/api/flashcards/sets",{method:"POST",headers:{set_name:a,set_description:l}});s.push(`/set-overview/${m.ID}`)}catch(m){console.error("Error saving flashcard set:",m),h(`Failed to save flashcard set: ${m.message}`)}finally{u(!1)}};return e.jsxs(L,{className:"ion-padding",children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[n&&e.jsx("div",{children:"Loading..."}),d&&e.jsx("div",{className:"text-red-500 mt-2",children:d}),e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create New Flashcard Set"}),e.jsx(T,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsx(W,{placeholder:"Enter set title",value:a,onIonChange:x=>t(x.detail.value),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),c.title&&e.jsx(A,{color:"danger",children:e.jsx("p",{className:"text-sm mt-1",children:c.title})}),e.jsx(W,{placeholder:"Enter set description",value:l,onIonChange:x=>o(x.detail.value),rows:1,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}}),c.description&&e.jsx(A,{color:"danger",children:e.jsx("p",{className:"text-sm mt-1",children:c.description})})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(S,{color:"success",className:"rounded-lg shadow-sm w-full md:w-auto",onClick:N,disabled:n,children:n?"Creating...":"Create Set"})})]})]})},Jt=({cards:s,onAddCard:a,onRemoveCard:t,onUpdateCard:l})=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Edit Cards"}),s.map((o,c)=>e.jsx(T,{className:"mb-4 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-600",children:["Card ",c+1," ",o.ID>0?"(Existing)":"(New)"]}),e.jsx(S,{fill:"clear",color:"danger",size:"small",onClick:()=>t(c),className:"-mt-2 -mr-2",children:e.jsx(k,{slot:"icon-only",icon:ls})})]}),e.jsx(W,{label:`Front (Card ${c+1})`,labelPlacement:"stacked",placeholder:"Front of card",value:o.Front,onIonChange:i=>l(c,"Front",i.detail.value),rows:2,autoGrow:!0,className:"mb-3",style:{resize:"none"}}),e.jsx(W,{label:`Back (Card ${c+1})`,labelPlacement:"stacked",placeholder:"Back of card",value:o.Back,onIonChange:i=>l(c,"Back",i.detail.value),rows:2,autoGrow:!0,style:{resize:"none"}})]})},o.ID)),e.jsx("div",{className:"flex justify-center mt-4 mb-6",children:e.jsxs(S,{onClick:a,fill:"outline",children:[" ",e.jsx(k,{slot:"start",icon:Ie})," Add Card"]})})]}),Yt=({setName:s,setDescription:a,onNameChange:t,onDescriptionChange:l})=>e.jsx(T,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsx(W,{label:"Set Title",labelPlacement:"stacked",placeholder:"Enter set title",value:s,onIonChange:o=>t(o.detail.value),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),e.jsx(W,{label:"Set Description",labelPlacement:"stacked",placeholder:"Enter set description",value:a,onIonChange:o=>l(o.detail.value),rows:2,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}})]})}),Wt=()=>{const{id:s}=je(),[a]=Se(),[t,l]=r.useState(null),[o,c]=r.useState([]),[i,n]=r.useState(""),[u,d]=r.useState(""),[h,N]=r.useState([]),[x,g]=r.useState(!0),[m,j]=r.useState(null),[f,_]=r.useState(!1),[b,$]=r.useState(null),q=r.useCallback(async()=>{if(!s){j("Set ID is missing from URL."),g(!1);return}g(!0),j(null),$(null);try{const[p,y]=await Promise.all([w("/api/flashcards/sets/",{method:"GET",headers:{id:s}}),w("/api/flashcards/list",{method:"GET",headers:{set_id:s}})]);l(p),c(y),n(p.SetName),d(p.SetDescription),N(y?y.map(v=>({...v,ID:v.ID||0})):[])}catch(p){console.error("Error fetching data for EditSet:",p);let y="Unknown error";p instanceof Error&&(y=p.message),j(`Failed to load set data: ${y}`)}finally{g(!1)}},[s]);r.useEffect(()=>{q()},[q]);const C=(p,y)=>{const v=y??"";p==="SetName"?n(v):d(v)},E=()=>{if(!t)return;const p={ID:0,Front:"",Back:"",SetID:t.ID,CreatedAt:new Date().toISOString(),UpdatedAt:new Date().toISOString()};N([...h,p])},re=p=>{N(h.filter((y,v)=>v!==p))},J=(p,y,v)=>{const B=v??"";N(h.map((Q,Ne)=>Ne===p?{...Q,[y]:B}:Q))},M=async()=>{if(!t||f)return;_(!0),$(null);const p=[];i!==t.SetName&&p.push(w("/api/flashcards/sets/set_name",{method:"PUT",headers:{id:t.ID,set_name:i}})),u!==t.SetDescription&&p.push(w("/api/flashcards/sets/set_description",{method:"PUT",headers:{id:t.ID,set_description:u}}));const y=new Set(h.map(v=>v.ID).filter(v=>v>0));o&&o.forEach(v=>{y.has(v.ID)||p.push(w("/api/flashcards",{method:"DELETE",headers:{id:v.ID}}))}),h.forEach(v=>{if(v.ID<=0)p.push(w("/api/flashcards",{method:"POST",headers:{front:v.Front,back:v.Back,id:t.ID}}));else{const B=o.find(Q=>Q.ID===v.ID);B&&(v.Front!==B.Front&&p.push(w("/api/flashcards/front",{method:"PUT",headers:{id:v.ID,front:v.Front}})),v.Back!==B.Back&&p.push(w("/api/flashcards/back",{method:"PUT",headers:{id:v.ID,back:v.Back}})))}});try{await Promise.all(p),a({message:"Changes saved successfully!",duration:2e3,color:"success"}),await q()}catch(v){console.error("Error saving changes:",v);let B="Unknown error during save";v instanceof Error&&(B=v.message),$(`Failed to save changes: ${B}`),a({message:`Save failed: ${B}`,duration:3e3,color:"danger"})}finally{_(!1)}};return e.jsxs(st,{children:[e.jsx(G,{}),e.jsx(L,{className:"ion-padding",children:e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Edit Flashcard Set"}),e.jsx(Me,{isOpen:x,message:"Loading set data..."}),e.jsx(Me,{isOpen:f,message:"Saving changes..."}),m&&!x&&e.jsx(A,{color:"danger",className:"block mb-4",children:e.jsxs("p",{children:["Error loading data: ",m]})}),b&&!f&&e.jsx(A,{color:"danger",className:"block mb-4",children:e.jsxs("p",{children:["Error saving: ",b]})}),!x&&!m&&t&&e.jsxs(e.Fragment,{children:[e.jsx(Yt,{setName:i,setDescription:u,onNameChange:p=>C("SetName",p),onDescriptionChange:p=>C("SetDescription",p)}),e.jsx(Jt,{cards:h,onAddCard:E,onRemoveCard:re,onUpdateCard:J}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:M,color:"primary",disabled:f,children:f?"Saving...":"Save Changes"})})]})]})}),e.jsx(Ue,{})]})},Kt=()=>{const{id:s}=je();pe();const[a,t]=r.useState(""),[l,o]=r.useState(""),[c,i]=r.useState([]),[n,u]=r.useState(),[d,h]=r.useState(0),[N,x]=r.useState(!0);r.useEffect(()=>{const m=async()=>{try{const f=await w("/api/flashcards/sets",{method:"GET",headers:{id:s}});t(f.SetName),o(f.SetDescription)}catch(f){console.error("Failed to fetch set info",f)}},j=async()=>{x(!0);try{const f=await w("/api/flashcards/list",{method:"GET",headers:{set_id:s}});i(Array.isArray(f)?f:[])}catch(f){console.error("Failed to fetch cards",f),i([])}finally{x(!1)}};s&&(m(),j())},[s]),r.useEffect(()=>{if(!n)return;const m=()=>{h(n.selectedScrollSnap())};return m(),n.on("select",m),n.on("reInit",m),()=>{n.off("select",m),n.off("reInit",m)}},[n]);const g=()=>{n&&n.scrollNext()};return e.jsxs(L,{className:"ion-padding",children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(S,{className:"rounded-lg",fill:"outline",style:{"--border-radius":"0.5rem"},routerLink:`/set-overview/${s}`,children:"Back"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a}),e.jsx("p",{className:"text-gray-500",children:l})]})]}),e.jsx("div",{className:"w-full max-w-xl mx-auto relative py-8 min-h-[400px] flex items-center justify-center",children:N?e.jsx(Y,{name:"circular"}):c.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg py-20",children:"This set has no cards yet."}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{orientation:"vertical",setApi:u,className:"w-full",children:e.jsx(Oe,{className:"-mt-1 h-[400px]",children:c.map((m,j)=>e.jsx(Re,{children:e.jsx(fs,{front:m.Front,back:m.Back,onAdvance:g,cardId:m.ID})},j))})}),e.jsx("div",{className:"absolute right-[-50px] top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:c.map((m,j)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${j===d?"bg-primary":"bg-gray-300"}`},j))})]})})]})]})},Qt=()=>{const[s,a]=r.useState("classes"),[t,l]=r.useState([]),[o,c]=r.useState([]),[i,n]=r.useState(!1),[u,d]=r.useState(!1),[h,N]=r.useState(null);return r.useEffect(()=>{console.log("Classes state updated:",t)},[t]),r.useEffect(()=>{const x=async()=>{n(!0),N(null);try{const m=await w("/api/class_user/classes");console.log("Classes: ",m),l(m)}catch(m){N(`Error fetching classes: ${m.message}`)}finally{n(!1)}},g=async()=>{d(!0);try{const m=await w("/api/set_user/list");console.log("Sets: ",m),c(m)}catch(m){N(`Error fetching sets: ${m.message}`)}finally{d(!1)}};x(),g()},[]),e.jsx(e.Fragment,{children:e.jsxs(L,{className:"ion-padding flex flex-col min-h-screen",fullscreen:!0,children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 flex-grow",children:[h&&e.jsx("div",{className:"text-red-500 mt-2",children:h}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s==="classes"?"My Classes":"Personal Flashcard Sets"}),e.jsx("div",{className:"flex items-center gap-2 mt-4 md:mt-0",children:e.jsxs(S,{color:"primary",className:"rounded-lg",style:{"--border-radius":"0.5rem"},href:s==="classes"?"/create-class":"/create-set",children:[e.jsx(k,{slot:"start",icon:Ie})," ",s==="classes"?"Add Class":"Add Set"]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(as,{value:s,onIonChange:x=>a(x.detail.value||"classes"),style:{"--background":"var(--ion-color-light)"},children:[e.jsxs(le,{value:"classes",children:[e.jsx(k,{icon:tt,className:"mr-2"}),e.jsx(te,{children:"My Classes"})]}),e.jsxs(le,{value:"flashcards",children:[e.jsx(k,{icon:rs,className:"mr-2"}),e.jsx(te,{children:"My Cards"})]})]})}),s==="classes"&&e.jsx(e.Fragment,{children:i?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(Y,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading classes..."})]}):t===null?e.jsx("div",{className:"text-center p-8 text-gray-600",children:"You are not part of any classes. Join a class to get started."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(x=>e.jsx(ae,{to:`/class/${x.ClassID}`,children:e.jsxs(T,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:x.ClassName}),e.jsx(xe,{className:"text-sm text-muted-foreground",children:x.ClassDescription})]}),e.jsx(P,{})]})},x.ClassID))})}),s==="flashcards"&&e.jsx(e.Fragment,{children:u?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(Y,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading sets..."})]}):o===null?e.jsx("div",{className:"text-center p-8 text-gray-600",children:"You are not part of any sets. Join a set to get started."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(x=>e.jsx(ae,{to:`/set-overview/${x.SetID}`,children:e.jsxs(T,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:x.SetName}),e.jsx(xe,{className:"text-sm text-muted-foreground",children:x.SetDescription})]}),e.jsx(P,{})]})},x.SetID))})})]}),e.jsx(Ue,{})]})})},Xt=()=>e.jsx(L,{children:e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center from-white to-gray-50",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"CowboyCards"}),e.jsx("p",{children:"Master any subject with smart flashcards"})]}),e.jsx(os,{})]})}),Zt=()=>{const s=at();return r.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsxs(L,{children:[e.jsx(G,{}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})]})},ea=()=>{const[s,a]=r.useState(null),[t,l]=r.useState(!1),[o,c]=r.useState([]),[i,n]=r.useState(""),u=o.filter(d=>d.SetName.toLowerCase().includes(i.toLowerCase())||d.SetDescription&&d.SetDescription.toLowerCase().includes(i.toLowerCase()));return r.useEffect(()=>{async function d(){l(!0),a(null);try{const h=await w("/api/flashcards/sets/list");c(h)}catch(h){console.error("Error fetching flashcard sets:",h),a(`Error fetching flashcard sets: ${h.message}`)}finally{l(!1)}}d()},[]),e.jsxs(L,{children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 w-1/2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold pb-8",children:"Public Flashcard Sets"}),t&&e.jsx("div",{children:"Loading..."}),s&&e.jsx("div",{className:"text-red-500 mt-2",children:s}),e.jsx(rt,{value:i,onIonInput:d=>n(d.target.value),placeholder:"Search flashcard sets",className:"mb-4 w-1/2"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:u.map(d=>e.jsx(ae,{to:`/flashcards/${d.ID}`,children:e.jsx(T,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:d.SetName}),e.jsx(xe,{className:"text-sm text-gray-600",children:d.SetDescription||"No description"})]})})},d.ID))})]})]})},sa=()=>{const[s,a]=r.useState([]),[t,l]=r.useState(!1),[o,c]=r.useState(null);return r.useEffect(()=>{(async()=>{l(!0),c(null);try{const n=await w("/api/classes/list");a(n),l(!1)}catch(n){c(`Error fetching classes: ${n.message}`)}finally{l(!1)}})()},[]),e.jsxs(L,{children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold pb-8",children:"Public Classes"}),t&&e.jsx("div",{children:"Loading..."}),o&&e.jsx("div",{className:"text-red-500 mt-2",children:o}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(i=>e.jsx(ae,{to:`/class/${i.ID}`,children:e.jsx(T,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:i.ClassName}),e.jsx(xe,{className:"text-sm text-gray-600",children:i.ClassDescription||"No description"}),e.jsx(S,{expand:"block",color:"primary",className:"mt-4",onClick:async()=>{try{const n=await w("/api/class_user",{method:"POST",headers:{class_id:i.ID,role:"student"}});console.log("Join class response:",n)}catch(n){console.error("Error joining class:",n)}},children:"Join Class"})]})})},i.ID))})]})]})},ta=()=>{const{id:s}=je(),a=pe(),[t,l]=r.useState(""),[o,c]=r.useState(""),[i,n]=r.useState([]),[u,d]=r.useState(!0),[h,N]=r.useState(!1);r.useEffect(()=>{const g=async()=>{try{const j=await w("/api/flashcards/sets/",{method:"GET",headers:{id:s}});l(j.SetName),c(j.SetDescription)}catch(j){console.error("Failed to fetch set info",j)}},m=async()=>{d(!0);try{const j=await w("/api/flashcards/list",{method:"GET",headers:{set_id:s}});n(Array.isArray(j)?j:[])}catch(j){console.error("Failed to fetch cards",j),n([])}finally{d(!1)}};s&&(g(),m())},[s]);const x=async()=>{if(!s){console.error("Cannot delete set: ID is missing.");return}try{await w("/api/flashcards/sets/",{method:"DELETE",headers:{id:s}}),a.push("/student-dashboard")}catch(g){console.error("Failed to delete set:",g)}};return e.jsxs(L,{className:"ion-padding",children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 pr-4",children:[e.jsx(S,{className:"rounded-lg",fill:"outline",style:{"--border-radius":"0.5rem"},onClick:()=>window.history.back(),children:"Back"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-3xl font-bold",children:t}),e.jsx("p",{className:"text-base mt-1 text-gray-700",children:o})]})]}),e.jsxs("div",{className:"self-start md:self-center flex gap-2 md:mt-0 mt-4 w-full md:w-auto",children:[e.jsx(S,{className:"rounded-lg w-1/3 md:w-auto",fill:"outline",style:{"--border-radius":"0.5rem"},routerLink:`/edit-set/${s}`,children:"Edit Set"}),e.jsx(S,{className:"rounded-lg w-1/3 md:w-auto",color:"primary",style:{"--border-radius":"0.5rem"},routerLink:`/flashcards/${s}`,children:"Study Set"}),e.jsx(S,{className:"rounded-lg w-1/3 md:w-auto",color:"danger",style:{"--border-radius":"0.5rem"},onClick:()=>N(!0),children:"Delete Set"})]})]}),e.jsx("div",{className:"mt-8 min-h-[200px] flex items-center justify-center",children:u?e.jsx(Y,{name:"circular"}):i.length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg text-gray-900 dark:text-gray-400 mb-4",children:"This set has no cards yet."}),e.jsx(S,{color:"primary",className:"rounded-lg",style:{"--border-radius":"0.5rem"},routerLink:`/edit-set/${s}`,children:"Add Cards"})]}):e.jsx("div",{className:"w-full",children:i.map((g,m)=>e.jsx(T,{className:"mb-4 rounded-lg border shadow-sm",children:e.jsxs(P,{children:[e.jsx("div",{className:"border-b border-gray-300 mb-3 pb-1 m-4",children:e.jsxs(A,{className:"text-md font-semibold text-gray-900 dark:text-gray-300",children:["Card ",m+1]})}),e.jsxs("div",{className:"flex flex-row justify-between items-start",children:[e.jsx("div",{className:"w-3/12 pr-4 border-r border-gray-300 m-4",children:e.jsx(A,{className:"block whitespace-pre-wrap text-lg text-gray-900 dark:text-gray-200",children:g.Front})}),e.jsx("div",{className:"w-9/12 pl-4 m-4",children:e.jsx(A,{className:"block whitespace-pre-wrap text-lg text-gray-900 dark:text-gray-200",children:g.Back})})]})]})},m))})})]}),e.jsx(he,{isOpen:h,onDidDismiss:()=>N(!1),header:"Confirm Deletion",message:"Are you sure you want to delete this set? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Delete canceled")}},{text:"Delete",role:"destructive",handler:()=>{x()}}]})]})},aa=()=>{const[s,a]=r.useState(!1),t=[{id:1,name:"Biology 101",students:25,sets:5,cardsMastered:85},{id:2,name:"Spanish Basics",students:18,sets:3,cardsMastered:78},{id:3,name:"World History",students:30,sets:7,cardsMastered:92}],l=t.length,o=t.reduce((n,u)=>n+u.students,0),c=t.reduce((n,u)=>n+u.sets,0),i=t.reduce((n,u)=>n+u.cardsMastered,0)/l;return e.jsxs(L,{children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Overview"}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-4 mb-8",children:[e.jsxs(T,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Classes"})}),e.jsx(P,{children:e.jsx(A,{className:"text-2xl font-bold",children:l})})]}),e.jsxs(T,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Students"})}),e.jsx(P,{children:e.jsx(A,{className:"text-2xl font-bold",children:o})})]}),e.jsxs(T,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Sets"})}),e.jsx(P,{children:e.jsx(A,{className:"text-2xl font-bold",children:c})})]}),e.jsxs(T,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Average Cards Mastered"})}),e.jsx(P,{children:e.jsx(A,{className:"text-2xl font-bold",children:i.toFixed(1)})})]})]}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Classes"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(n=>e.jsx(ae,{to:`/class/${n.id}`,children:e.jsxs(T,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:n.name}),e.jsxs(A,{className:"text-sm text-gray-600",children:[n.students," students enrolled"]})]}),e.jsxs(P,{className:"flex flex-col gap-0 p-6 pt-0",children:[e.jsxs(A,{className:"text-sm text-gray-600",children:[n.sets," sets"]}),e.jsxs(A,{className:"text-sm text-gray-600",children:["Cards mastered: ",n.cardsMastered]})]})]})},n.id))})]})]})},H=s=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium",children:[s.label,":"]}),e.jsx("span",{children:s.value})]}),ra=s=>{var a,t,l,o,c,i,n,u,d,h,N,x,g,m;return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs(T,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Information"})}),e.jsx(P,{className:"p-6 pt-0",children:s.isEditing?e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{label:"First Name",name:"first_name",value:((a=s.updatedInfo)==null?void 0:a.first_name)||"",error:s.errors.first_name,onChange:s.handleChange}),e.jsx(se,{label:"Last Name",name:"last_name",value:((t=s.updatedInfo)==null?void 0:t.last_name)||"",error:s.errors.last_name,onChange:s.handleChange}),e.jsx(se,{label:"Username",name:"username",value:((l=s.updatedInfo)==null?void 0:l.username)||"",error:s.errors.username,onChange:s.handleChange}),e.jsx(se,{label:"Email",name:"email",value:((o=s.updatedInfo)==null?void 0:o.email)||"",error:s.errors.email,onChange:s.handleChange}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(S,{onClick:s.handleSave,children:"Save Changes"})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(H,{label:"First Name",value:(c=s.userInfo)==null?void 0:c.first_name}),e.jsx(H,{label:"Last Name",value:(i=s.userInfo)==null?void 0:i.last_name}),e.jsx(H,{label:"Username",value:(n=s.userInfo)==null?void 0:n.username}),e.jsx(H,{label:"Email",value:(u=s.userInfo)==null?void 0:u.email}),e.jsxs(S,{fill:"outline",onClick:s.handleEdit,className:"mt-4",children:[e.jsx(k,{slot:"start",icon:ke}),"Edit Info"]})]})})]}),e.jsxs(T,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Stats"})}),e.jsx(P,{className:"p-6 pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(H,{label:"Account Created",value:(d=s.userInfo)==null?void 0:d.created_at}),e.jsx(H,{label:"Login Streak",value:(h=s.userInfo)==null?void 0:h.login_streak}),e.jsx(H,{label:"Classes Taken",value:(N=s.userInfo)==null?void 0:N.numClasses}),e.jsx(H,{label:"Cards Mastered/Studied",value:`${(x=s.userInfo)==null?void 0:x.cardsMastered} / ${(g=s.userInfo)==null?void 0:g.cardsStudied}`}),e.jsx(H,{label:"Total Card Views",value:(m=s.userInfo)==null?void 0:m.totalCardViews})]})})]})]})},la=s=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-6 py-6",children:e.jsxs(T,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Options"})}),e.jsx(P,{className:"p-6 pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(z,{children:e.jsxs(lt,{label:"Theme",value:s.theme,onIonChange:a=>s.setTheme(a.detail.value),interface:"popover",placeholder:"Select Theme",children:[e.jsx(Be,{value:"light",children:"Light"}),e.jsx(Be,{value:"dark",children:"Dark"})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Change Your Password"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Reset your account password."})]}),e.jsx(S,{onClick:()=>s.setShowPasswordAlert(!0),children:"Change Password"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Delete Your Account"}),e.jsx("p",{className:"text-xs text-gray-600",children:"This will delete all account data and can't be undone."})]}),e.jsx(S,{color:"danger",onClick:()=>s.setShowDeleteAlert(!0),children:"Delete Account"})]})]})})]})}),e.jsx(he,{isOpen:s.showPasswordAlert,onDidDismiss:()=>s.setShowPasswordAlert(!1),header:"Change Password",inputs:[{name:"oldPassword",type:"password",placeholder:"Old Password"},{name:"newPassword",type:"password",placeholder:"New Password"},{name:"confirmPassword",type:"password",placeholder:"Confirm New Password"}],buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Save",handler:a=>a.newPassword!==a.confirmPassword?(s.presentToast({message:"Passwords do not match",duration:2e3,color:"danger"}),!0):(console.log("Password changed"),!0)}]}),e.jsx(he,{isOpen:s.showDeleteAlert,onDidDismiss:()=>s.setShowDeleteAlert(!1),header:"Confirm Deletion",message:"Are you sure you want to delete your account? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Delete",handler:()=>{console.log("Account deleted")}}]})]}),na=()=>{const{theme:s,setTheme:a}=xs(),[t,l]=r.useState(),[o,c]=r.useState(!0),[i,n]=r.useState(null),[u,d]=r.useState(null),[h,N]=r.useState(!1),[x,g]=r.useState(!1),[m,j]=r.useState(!1),[f,_]=r.useState(t),b=p=>{d(u===p?null:p)},$=()=>{_(t),j(!0)},q=async()=>{if(!C())return;const p=["first_name","last_name","username","email"];try{const y=p.filter(v=>f[v]!==t[v]).map(v=>w(`/api/users/${v}`,{method:"PUT",headers:{[v]:f[v]}}));await Promise.all(y),l(f),j(!1)}catch(y){console.error(y),alert("Failed to update some fields. Please try again.")}},C=()=>{const p={};let y=!0;return f.first_name||(p.first_name="First name is required",y=!1),f.last_name||(p.last_name="Last name is required",y=!1),f.email?/\S+@\S+\.\S+/.test(f.email)||(p.email="Email is invalid",y=!1):(p.email="Email is required",y=!1),f.username||(p.username="Username is required",y=!1),f.first_name=f.first_name.trim(),f.last_name=f.last_name.trim(),f.email=f.email.trim(),f.username=f.username.trim(),re(p),y},[E,re]=r.useState({}),J=p=>{const{name:y}=p.target,v=p.detail.value;_(B=>({...B,[y]:v}))};r.useEffect(()=>{(async()=>{c(!0),n(null);try{const y=await w("/api/users/",{method:"GET",headers:{}});l(y),_(y),console.log("data",y)}catch(y){console.log(`Failed to fetch User Data: ${y.message}`),n(`Failed to fetch User Data: ${y.message}`)}finally{c(!1)}})()},[]);const[M]=Se();return e.jsxs(L,{children:[e.jsx(G,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("p",{className:"text-xl font-semibold text-primary",children:["Welcome back, ",(t==null?void 0:t.username)||"User","!"]})}),e.jsxs(S,{onClick:()=>window.history.back(),fill:"outline",className:"mb-6",children:[e.jsx(k,{slot:"start",icon:Ce}),"Back"]}),o&&e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(Y,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading account details..."})]}),i&&!o&&e.jsx("div",{className:"text-red-500 text-center p-4 border border-red-500 rounded-md",children:i}),!o&&!i&&t&&e.jsxs(e.Fragment,{children:[e.jsx(ra,{isEditing:m,errors:E,handleChange:J,handleSave:q,updatedInfo:f,userInfo:t,handleEdit:$}),e.jsx(la,{isEditing:m,errors:E,handleChange:J,handleSave:q,updatedInfo:f,userInfo:t,expandedClass:u,toggleClassDetails:b,showPasswordAlert:h,setShowPasswordAlert:N,showDeleteAlert:x,setShowDeleteAlert:g,theme:s,setTheme:a,presentToast:M})]})]})]})};nt();const oa=new ot;function ca(){return e.jsx(ct,{client:oa,children:e.jsx(Ft,{children:e.jsxs(Pt,{children:[e.jsx(it,{children:e.jsx(dt,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsxs(mt,{children:[e.jsx(O,{exact:!0,path:"/",component:Xt}),e.jsx(O,{exact:!0,path:"/home",component:Qt}),e.jsx(O,{exact:!0,path:"/class/:id",component:qt}),e.jsx(O,{exact:!0,path:"/teacher",component:aa}),e.jsx(O,{exact:!0,path:"/auth",component:os}),e.jsx(O,{exact:!0,path:"/reset-password",component:Ct}),e.jsx(O,{exact:!0,path:"/public-cards",component:ea}),e.jsx(O,{exact:!0,path:"/user-account",component:na}),e.jsx(O,{exact:!0,path:"/flashcards/:id",component:Kt}),e.jsx(O,{exact:!0,path:"/create-set",component:Ht}),e.jsx(O,{exact:!0,path:"/edit-set/:id",component:Wt}),e.jsx(O,{exact:!0,path:"/create-class",component:Vt}),e.jsx(O,{exact:!0,path:"/public-classes",component:sa}),e.jsx(O,{exact:!0,path:"/set-overview/:id",component:ta}),e.jsx(O,{component:Zt})]})})})}),e.jsx(Tt,{}),e.jsx(It,{})]})})})}const ia=document.getElementById("root"),da=ut(ia);da.render(e.jsx(ca,{}));export{xa as _,ha as g};
//# sourceMappingURL=index-B3IFF-wr.js.map
