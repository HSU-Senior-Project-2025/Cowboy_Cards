import{r,j as e,S as Os,R as Ze,u as es,C as ss,L as ae,a as Rs,I as v,b as _,V as ts,c as as,A as rs,d as ns,X as ls,T as os,D as cs,P as Us,e as is,f as Bs,g as Ms,h as zs,i as Gs,k as qs,l as ge,m as Vs,n as Hs,o as Js,p as L,q as R,s as U,t as F,v as Ys,w as Ce,x as ne,y as M,z as Ws,B as Be,E as Me,F as z,G as fe,H as q,J as Ks,K as Qs,M as Ne,N as Q,O as ke,Q as ds,U as le,W as re,Y as pe,Z as te,_ as je,$ as Xs,a0 as Zs,a1 as et,a2 as ze,a3 as st,a4 as tt,a5 as at,a6 as rt,a7 as nt,a8 as lt,a9 as O,aa as ot}from"./react-Dzf1xyo4.js";import{w as ct,x as it,y as ye,z as dt,$ as mt,A as Ee,B as ut,C as ht,D as xt,E as ft,F as pt,G as jt,H as gt,I as ms,J as us,K as hs,L as Nt,M as yt,N as xs,O as bt}from"./nm-pHSaSHEl.js";import{aQ as wt}from"./core-CtHTzbUJ.js";import"./index-DX9vWrAe.js";import"./ion-DEhI_mZR.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(c){if(c.ep)return;c.ep=!0;const d=t(c);fetch(c.href,d)}})();function ga(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function I(...s){return ct(it(s))}const vt=ye("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ie=r.forwardRef(({className:s,variant:a,...t},n)=>e.jsx("div",{ref:n,role:"alert",className:I(vt({variant:a}),s),...t}));Ie.displayName="Alert";const St=r.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:I("mb-1 font-medium leading-none tracking-tight",s),...a}));St.displayName="AlertTitle";const Te=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("text-sm [&_p]:leading-relaxed",s),...a}));Te.displayName="AlertDescription";const Ct=ye("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=r.forwardRef(({className:s,variant:a,size:t,asChild:n=!1,...c},d)=>{const o=n?Os:"button";return e.jsx(o,{className:I(Ct({variant:a,size:t,className:s})),ref:d,...c})});W.displayName="Button";const ce=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));ce.displayName="Card";const De=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex flex-col space-y-1.5 p-6",s),...a}));De.displayName="CardHeader";const Ae=r.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:I("text-2xl font-semibold leading-none tracking-tight",s),...a}));Ae.displayName="CardTitle";const _e=r.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:I("text-sm text-muted-foreground",s),...a}));_e.displayName="CardDescription";const Pe=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("p-6 pt-0",s),...a}));Pe.displayName="CardContent";const $e=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex items-center p-6 pt-0",s),...a}));$e.displayName="CardFooter";const X=r.forwardRef(({className:s,type:a,...t},n)=>e.jsx("input",{type:a,className:I("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));X.displayName="Input";const kt=ye("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=r.forwardRef(({className:s,...a},t)=>e.jsx(Ze,{ref:t,className:I(kt(),s),...a}));Z.displayName=Ze.displayName;const Et=1,It=1e6;let ve=0;function Tt(){return ve=(ve+1)%Number.MAX_SAFE_INTEGER,ve.toString()}const Se=new Map,Ge=s=>{if(Se.has(s))return;const a=setTimeout(()=>{Se.delete(s),oe({type:"REMOVE_TOAST",toastId:s})},It);Se.set(s,a)},Dt=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,Et)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?Ge(t):s.toasts.forEach(n=>{Ge(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},he=[];let xe={toasts:[]};function oe(s){xe=Dt(xe,s),he.forEach(a=>{a(xe)})}function At({...s}){const a=Tt(),t=c=>oe({type:"UPDATE_TOAST",toast:{...c,id:a}}),n=()=>oe({type:"DISMISS_TOAST",toastId:a});return oe({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:c=>{c||n()}}}),{id:a,dismiss:n,update:t}}function fs(){const[s,a]=r.useState(xe);return r.useEffect(()=>(he.push(a),()=>{const t=he.indexOf(a);t>-1&&he.splice(t,1)}),[s]),{...s,toast:At,dismiss:t=>oe({type:"DISMISS_TOAST",toastId:t})}}const _t="modulepreload",Pt=function(s,a){return new URL(s,a).href},qe={},Na=function(a,t,n){let c=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),x=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));c=Promise.allSettled(t.map(i=>{if(i=Pt(i,n),i in qe)return;qe[i]=!0;const u=i.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!n)for(let m=o.length-1;m>=0;m--){const b=o[m];if(b.href===i&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${h}`))return;const y=document.createElement("link");if(y.rel=u?"stylesheet":_t,u||(y.as="script"),y.crossOrigin="",y.href=i,x&&y.setAttribute("nonce",x),document.head.appendChild(y),u)return new Promise((m,b)=>{y.addEventListener("load",m),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${i}`)))})}))}function d(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return c.then(o=>{for(const l of o||[])l.status==="rejected"&&d(l.reason);return a().catch(d)})},Ve="https://cowboy-cards.dsouth.org",ps=()=>{const[s,a]=r.useState(!0),[t,n]=r.useState(!1),[c,d]=r.useState(""),[o,l]=r.useState(""),[x,i]=r.useState(""),[u,h]=r.useState(""),[g,y]=r.useState(""),[m,b]=r.useState({}),j=es(),{toast:P}=fs(),D=()=>{const f={};let N=!0;return c?/\S+@\S+\.\S+/.test(c)||(f.email="Email is invalid",N=!1):(f.email="Email is required",N=!1),o?o.length<8&&(f.password="Password must be at least 8 characters",N=!1):(f.password="Password is required",N=!1),!s&&!x&&(f.username="Username is required",N=!1),b(f),N},K=async f=>{if(f.preventDefault(),!!D()){n(!0),b({});try{let N;if(s?N=await fetch(`${Ve}/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:c,password:o})}):N=await fetch(`${Ve}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:x,email:c,password:o,first_name:u,last_name:g})}),!N.ok){const p=await N.json();throw p.code==="duplicate_email"?(b({email:"This email is already registered"}),new Error("This email is already registered")):p.code==="duplicate_username"?(b({username:"This username is already taken"}),new Error("This username is already taken")):p.code==="invalid_credentials"?(b({general:"Invalid email or password"}),new Error("Invalid email or password")):new Error(p.message||"Authentication failed")}const S=await N.json();P({title:s?"Welcome back!":"Account created",description:s?"You have been successfully logged in.":"Your account has been created successfully."}),j.push("/home")}catch(N){console.error("Authentication error:",N),Object.keys(m).length===0&&b({general:N.message||"An unexpected error occurred. Please try again."}),P({title:"Authentication failed",description:N.message||"Please check your credentials and try again.",variant:"destructive"})}finally{n(!1)}}},J=()=>{b({}),s?(i(""),h(""),y("")):(d(""),l(""))};return e.jsxs(ce,{className:"w-[350px]",children:[e.jsxs(De,{children:[e.jsx(Ae,{children:s?"Welcome back":"Create account"}),e.jsx(_e,{children:s?"Enter your credentials to continue":"Sign up for a new account"})]}),e.jsxs("form",{onSubmit:K,children:[e.jsxs(Pe,{className:"space-y-4",children:[m.general&&e.jsxs(Ie,{variant:"destructive",className:"mb-4",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx(Te,{children:m.general})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"username",children:"Username"}),e.jsx(X,{id:"username",type:"text",placeholder:"johndoe",value:x,onChange:f=>i(f.target.value),required:!0,className:m.username?"border-red-500":""}),m.username&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"firstName",children:"First Name"}),e.jsx(X,{id:"firstName",type:"text",placeholder:"John",value:u,onChange:f=>h(f.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"lastName",children:"Last Name"}),e.jsx(X,{id:"lastName",type:"text",placeholder:"Doe",value:g,onChange:f=>y(f.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(X,{id:"email",type:"email",placeholder:"name@example.com",value:c,onChange:f=>d(f.target.value),required:!0,className:m.email?"border-red-500":""}),m.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"password",children:"Password"}),e.jsx(X,{id:"password",type:"password",value:o,onChange:f=>l(f.target.value),required:!0,className:m.password?"border-red-500":""}),m.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.password}),!s&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),s&&e.jsx(ae,{to:"/reset-password",className:"text-sm text-purple-500",children:"Forgot password?"})]}),e.jsxs($e,{className:"flex flex-col space-y-4",children:[e.jsxs(W,{type:"submit",className:"w-full",disabled:t,children:[e.jsx(Rs,{className:"mr-2 h-4 w-4"}),t?s?"Signing in...":"Signing up...":s?"Sign in":"Sign up"]}),e.jsx(W,{variant:"link",type:"button",onClick:()=>{a(!s),J()},className:"text-sm",disabled:t,children:s?"Need an account? Sign up":"Already have an account? Sign in"}),e.jsxs(v,{expand:"block",fill:"outline",className:"flex items-center justify-center space-x-2",onClick:()=>{console.log("Sign in with Google clicked")},children:[e.jsx(_,{slot:"start",src:"https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw",className:"h-5 w-5"}),e.jsx("p",{}),"Sign in with Google",e.jsx("img",{slot:"start",src:"https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw",className:"h-10 w-10"})]})]})]})]})},$t=()=>{const[s,a]=r.useState(""),[t,n]=r.useState({}),c=d=>{d.preventDefault()};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs(ce,{className:"w-[350px]",children:[e.jsxs(De,{children:[e.jsx(Ae,{children:"Reset Password"}),e.jsx(_e,{children:"Enter your email to reset your password"})]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs(Pe,{className:"space-y-4",children:[t.general&&e.jsxs(Ie,{variant:"destructive",className:"mb-4",children:[e.jsx(ss,{className:"h-4 w-4"}),e.jsx(Te,{children:t.general})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(X,{id:"email",type:"email",placeholder:"name@example.com",value:s,onChange:d=>a(d.target.value),required:!0,className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email})]})]}),e.jsx($e,{className:"flex flex-col space-y-4",children:e.jsx(W,{type:"submit",className:"w-full",children:"Send Reset Link"})})]})]})})},Lt=({...s})=>{const{theme:a="system"}=dt();return e.jsx(mt,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},Ft=Us,js=r.forwardRef(({className:s,...a},t)=>e.jsx(ts,{ref:t,className:I("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a}));js.displayName=ts.displayName;const Ot=ye("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),gs=r.forwardRef(({className:s,variant:a,...t},n)=>e.jsx(as,{ref:n,className:I(Ot({variant:a}),s),...t}));gs.displayName=as.displayName;const Rt=r.forwardRef(({className:s,...a},t)=>e.jsx(rs,{ref:t,className:I("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a}));Rt.displayName=rs.displayName;const Ns=r.forwardRef(({className:s,...a},t)=>e.jsx(ns,{ref:t,className:I("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:e.jsx(ls,{className:"h-4 w-4"})}));Ns.displayName=ns.displayName;const ys=r.forwardRef(({className:s,...a},t)=>e.jsx(os,{ref:t,className:I("text-sm font-semibold",s),...a}));ys.displayName=os.displayName;const bs=r.forwardRef(({className:s,...a},t)=>e.jsx(cs,{ref:t,className:I("text-sm opacity-90",s),...a}));bs.displayName=cs.displayName;function Ut(){const{toasts:s}=fs();return e.jsxs(Ft,{children:[s.map(function({id:a,title:t,description:n,action:c,...d}){return e.jsxs(gs,{...d,children:[e.jsxs("div",{className:"grid gap-1",children:[t&&e.jsx(ys,{children:t}),n&&e.jsx(bs,{children:n})]}),c,e.jsx(Ns,{})]},a)}),e.jsx(js,{})]})}const Bt=Bs,Mt=r.forwardRef(({className:s,sideOffset:a=4,...t},n)=>e.jsx(is,{ref:n,sideOffset:a,className:I("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Mt.displayName=is.displayName;const ws=r.createContext(void 0);function zt({children:s}){const[a,t]=r.useState(()=>{const n=localStorage.getItem("theme");return n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return r.useEffect(()=>{localStorage.setItem("theme",a),a==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"))},[a]),e.jsx(ws.Provider,{value:{theme:a,setTheme:t},children:s})}function vs(){const s=r.useContext(ws);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s}const He={method:"GET",headers:{},credentials:"include"};async function A(s="",a=He){const t={...He,...a};try{const n=await fetch(s,t);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);return await n.json()}catch(n){throw console.error("API request failed:",n),n}}const Ss=r.createContext(null);function be(){const s=r.useContext(Ss);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const Le=r.forwardRef(({orientation:s="horizontal",opts:a,setApi:t,plugins:n,className:c,children:d,...o},l)=>{const[x,i]=Ms({...a,axis:s==="horizontal"?"x":"y"},n),[u,h]=r.useState(!1),[g,y]=r.useState(!1),m=r.useCallback(D=>{D&&(h(D.canScrollPrev()),y(D.canScrollNext()))},[]),b=r.useCallback(()=>{i==null||i.scrollPrev()},[i]),j=r.useCallback(()=>{i==null||i.scrollNext()},[i]),P=r.useCallback(D=>{D.key==="ArrowLeft"?(D.preventDefault(),b()):D.key==="ArrowRight"&&(D.preventDefault(),j())},[b,j]);return r.useEffect(()=>{!i||!t||t(i)},[i,t]),r.useEffect(()=>{if(i)return m(i),i.on("reInit",m),i.on("select",m),()=>{i==null||i.off("select",m)}},[i,m]),e.jsx(Ss.Provider,{value:{carouselRef:x,api:i,opts:a,orientation:s||((a==null?void 0:a.axis)==="y"?"vertical":"horizontal"),scrollPrev:b,scrollNext:j,canScrollPrev:u,canScrollNext:g},children:e.jsx("div",{ref:l,onKeyDownCapture:P,className:I("relative",c),role:"region","aria-roledescription":"carousel",...o,children:d})})});Le.displayName="Carousel";const Fe=r.forwardRef(({className:s,...a},t)=>{const{carouselRef:n,orientation:c}=be();return e.jsx("div",{ref:n,className:"overflow-hidden",children:e.jsx("div",{ref:t,className:I("flex",c==="horizontal"?"-ml-4":"-mt-4 flex-col",s),...a})})});Fe.displayName="CarouselContent";const Oe=r.forwardRef(({className:s,...a},t)=>{const{orientation:n}=be();return e.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:I("min-w-0 shrink-0 grow-0 basis-full",n==="horizontal"?"pl-4":"pt-4",s),...a})});Oe.displayName="CarouselItem";const Cs=r.forwardRef(({className:s,variant:a="outline",size:t="icon",...n},c)=>{const{orientation:d,scrollPrev:o,canScrollPrev:l}=be();return e.jsxs(W,{ref:c,variant:a,size:t,className:I("absolute  h-8 w-8 rounded-full",d==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!l,onClick:o,...n,children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]})});Cs.displayName="CarouselPrevious";const ks=r.forwardRef(({className:s,variant:a="outline",size:t="icon",...n},c)=>{const{orientation:d,scrollNext:o,canScrollNext:l}=be();return e.jsxs(W,{ref:c,variant:a,size:t,className:I("absolute h-8 w-8 rounded-full",d==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!l,onClick:o,...n,children:[e.jsx(Gs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})});ks.displayName="CarouselNext";const Gt="https://cowboy-cards.dsouth.org",Es=({front:s,back:a,onAdvance:t,cardId:n,userId:c})=>{const[d,o]=r.useState(!1),l=async u=>{try{const h=await A(`${Gt}${u}`,{method:"POST",headers:{user_id:c.toString(),card_id:n.toString()}});console.log(`Score update successful for card ${n}:`,h),t==null||t()}catch(h){console.error(`Failed to update score for card ${n}:`,h)}},x=()=>{l("/api/card_history/incorrect")},i=()=>{l("/api/card_history/correct")};return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:`flip-card cursor-pointer ${d?"flipped":""}`,onClick:()=>o(!d),children:[e.jsx(ce,{className:"flip-card-front p-8 min-h-[300px] flex items-center justify-center text-center",children:e.jsx("p",{className:"text-xl",children:s})}),e.jsx(ce,{className:"flip-card-back p-8 min-h-[300px] flex items-center justify-center text-center absolute top-0 w-full",children:e.jsx("p",{className:"text-xl",children:a})})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsxs(W,{variant:"outline",className:"w-32",onClick:x,children:[e.jsx(ls,{className:"mr-2 h-4 w-4"}),"Learning"]}),e.jsxs(W,{className:"w-32",onClick:i,children:[e.jsx(qs,{className:"mr-2 h-4 w-4"}),"Mastered"]})]})]})},qt="https://cowboy-cards.dsouth.org",Vt=s=>{const a=ge(),[t,n]=r.useState([]),[c,d]=r.useState(null);return r.useEffect(()=>{async function o(){console.log("selectedSet",c);const l=await A(`${qt}/api/flashcards/list`,{method:"GET",headers:{set_id:c}});console.log("cards",l),n(l)}c&&o()},[c]),e.jsx("div",{className:"mt-6",children:c===null?e.jsx(Vs,{children:e.jsx(Hs,{children:s.flashcardSets.sort((o,l)=>o.ID-l.ID).map(o=>e.jsx(Js,{size:"12",sizeMd:"6",sizeLg:"4",children:e.jsxs(L,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-200 rounded-lg border shadow-sm",onClick:()=>a.push(`/set-overview/${o.ID}`),children:[e.jsx(R,{children:e.jsx(U,{className:"text-lg font-semibold",children:o.SetName})}),e.jsx(F,{children:e.jsx("p",{className:"text-muted-foreground mb-2",children:o.SetDescription})})]})},o.ID))})}):e.jsxs(e.Fragment,{children:[e.jsxs(v,{fill:"outline",onClick:()=>d(null),className:"mb-6",children:[e.jsx(_,{slot:"start",icon:Ee}),"Back to Sets"]}),e.jsxs("div",{className:"w-full max-w-2xl mx-auto relative",children:[e.jsxs(Le,{orientation:"vertical",className:"w-full",setApi:s.setApi,children:[e.jsx(Fe,{className:"-mt-1 h-[400px]",children:t.map(o=>e.jsx(Oe,{children:e.jsx(Es,{front:o.Front,back:o.Back,cardId:o.ID,userId:1})},o.ID))}),e.jsx(Cs,{}),e.jsx(ks,{})]}),e.jsx("div",{className:"absolute right-[-50px] top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:t.map((o,l)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${l===s.currentCardIndex?"bg-primary":"bg-gray-300"}`},l))})]})]})})},Is=()=>e.jsx(Ys,{children:e.jsxs(Ce,{children:[e.jsx(ne,{slot:"start",children:e.jsx(v,{routerLink:"/home",children:e.jsx(_,{icon:ut})})}),e.jsx(M,{className:"mx-auto text-center text-sm text-gray-500",children:"Cowboy Cards 2025. Built for learning and fun."})]})}),V=()=>{const[s,a]=r.useState(null),t=i=>a(i.nativeEvent),n=()=>a(null),c=i=>{var u;d.push(i),(u=document.querySelector("ion-menu"))==null||u.close()},d=es(),{theme:o,setTheme:l}=vs(),x=()=>{l(o==="dark"?"light":"dark")};return e.jsxs(e.Fragment,{children:[e.jsxs(Ws,{side:"start",contentId:"main-content",children:[e.jsx(Be,{children:e.jsx(Ce,{children:e.jsx(ne,{slot:"start",children:e.jsx(Me,{children:e.jsx(v,{children:e.jsx(_,{icon:ht})})})})})}),e.jsx(z,{children:e.jsxs(fe,{children:[e.jsx(q,{button:!0,onClick:()=>c("/home"),children:"My Dashboard"}),e.jsx(q,{button:!0,onClick:()=>c("/public-cards"),children:"Public Cards"}),e.jsx(q,{button:!0,onClick:()=>c("/public-classes"),children:"Public Classes"}),e.jsx(q,{button:!0,onClick:()=>c("/user-account"),children:"My Account"})]})})]}),e.jsx(Be,{children:e.jsxs(Ce,{children:[e.jsx(ne,{slot:"start",children:e.jsx(Me,{children:e.jsx(v,{children:e.jsx(_,{icon:xt})})})}),e.jsx(Ks,{color:"primary",className:"text-lg md:text-xl lg:text-2xl font-bold hover:translate-x-1 transition-all duration-300 cursor-pointer",onClick:()=>d.push("/home"),children:"Cowboy Cards"}),e.jsxs(ne,{slot:"end",children:[e.jsx(v,{onClick:t,children:e.jsx(_,{icon:ft,className:"text-[32px] stroke-[2]"})}),e.jsx(Qs,{event:s,isOpen:!!s,onDidDismiss:n,children:e.jsx(z,{className:"p-2",children:e.jsxs(fe,{children:[e.jsx(q,{button:!0,onClick:()=>{n(),d.push("/create-set")},children:"Create Set"}),e.jsx(q,{button:!0,onClick:()=>{n(),d.push("/class/create")},children:"Create Class"}),e.jsx(q,{button:!0,onClick:()=>{n(),d.push("/public-classes")},children:"Join Class"})]})})}),e.jsx(v,{fill:"clear",onClick:x,children:e.jsx(_,{slot:"icon-only",icon:o==="dark"?pt:jt})})]}),e.jsx(ne,{slot:"end",children:e.jsx(v,{routerLink:"/user-account",children:e.jsx(_,{icon:gt,size:"large"})})})]})})]})},Ht=({leaderboard:s,classUsers:a})=>e.jsxs(L,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{children:e.jsx(U,{className:"text-xl font-semibold",children:"Class Leaderboard"})}),e.jsx(F,{children:e.jsx(fe,{className:"space-y-3",lines:"none",children:s.map((t,n)=>e.jsxs(q,{className:"muted-item p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-lg",children:n+1}),e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsxs("span",{slot:"end",className:"text-primary font-semibold",children:[t.totalScore," points"]})]},n))})})]}),Jt=({students:s,isTeacher:a,onDeleteStudent:t})=>e.jsxs(L,{className:"mt-6",children:[e.jsx(R,{children:e.jsx(U,{className:"text-xl font-semibold",children:"Class Students"})}),e.jsx(F,{children:e.jsx(fe,{className:"space-y-3",lines:"none",children:s.map(n=>e.jsxs(q,{className:"muted-item p-3",children:[e.jsxs("span",{className:"font-medium",children:[n.FirstName," ",n.LastName]}),e.jsx("span",{slot:"end",className:"text-muted-foreground",children:n.email}),a&&e.jsx(_,{slot:"end",icon:ms,color:"danger",className:"cursor-pointer",onClick:()=>t(n.id)})]},n.id))})})]}),se="https://cowboy-cards.dsouth.org",Yt=()=>{const{id:s}=Ne(),[a,t]=r.useState(0),[n,c]=r.useState(),[d,o]=r.useState("flashcards"),[l,x]=r.useState(!0),[i,u]=r.useState(),[h,g]=r.useState([]),[y,m]=r.useState([]),[b,j]=r.useState(null),[P,D]=r.useState(!1),[K,J]=r.useState([]),[f,N]=r.useState(!1),[S,p]=r.useState(!1),[w,C]=r.useState({class_name:"",class_description:""}),k=()=>{console.log("Handling Edit"),C({class_name:(i==null?void 0:i.ClassName)||"",class_description:(i==null?void 0:i.ClassDescription)||""}),p(!0)},[B,we]=r.useState({}),Ts=()=>{const E={};let $=!0;return w.class_name=w.class_name.trim(),w.class_description=w.class_description.trim(),w.class_name||(E.className="Class name is required",$=!1),w.class_description||(E.classDescription="Class description is required",$=!1),we(E),$},Ds=async()=>{if(!Ts()){console.log("Form validation failed:",B);return}const E=["class_name","class_description"];try{const $=E.map(G=>A(`${se}/api/classes/${G}`,{method:"PUT",headers:{id:s,[G]:w[G]}}));await Promise.all($),u(G=>({...G,ClassName:w.class_name,ClassDescription:w.class_description})),p(!1)}catch($){console.error($),alert("Failed to update some fields. Please try again.")}},Re=E=>{const{name:$}=E.target,G=E.detail.value;C(T=>({...T,[$]:G}))},As=()=>{p(!1)};r.useEffect(()=>{async function E(){D(!0),j(null);try{const T=await A(`${se}/api/classes/`,{method:"GET",headers:{id:s}});console.log("data",T),u(T)}catch(T){j(`Error fetching class: ${T.message}`)}finally{D(!1)}}async function $(){const T=await A(`${se}/api/class_set/list_sets`,{method:"GET",headers:{class_id:s}});console.log("sets",T),g(T)}async function G(){const T=await A(`${se}/api/class_user/members`,{method:"GET",headers:{class_id:s}});console.log("users",T),m(T)}E(),$(),G()},[s]),r.useEffect(()=>{async function E(){if(!y.length||!h.length)return;N(!0),j(null);const $=new Map;try{await Promise.all(y.map(async T=>{try{const $s=(await Promise.all(h.map(async me=>{try{const ee=await A(`${se}/api/card_history/set`,{method:"GET",headers:{user_id:T.UserID.toString(),set_id:me.ID.toString()}});return Array.isArray(ee)?ee.reduce((Ls,Fs)=>Ls+(Fs.NetScore||0),0):0}catch(ee){return console.error(`Error fetching scores for set ${me.ID}:`,ee),0}}))).reduce((me,ee)=>me+ee,0);$.set(T.UserID,$s)}catch(de){console.error(`Error processing user ${T.UserID}:`,de),$.set(T.UserID,0)}}));const G=y.map(T=>({name:`${T.FirstName} ${T.LastName}`,totalScore:$.get(T.UserID)||0})).sort((T,de)=>de.totalScore-T.totalScore);J(G)}catch(G){j("Error calculating leaderboard scores"),console.error("Leaderboard calculation error:",G)}finally{N(!1)}}E()},[y,h]);const[Ue,ie]=r.useState({isOpen:!1,studentId:null}),_s=E=>{ie($=>({...$,isOpen:!0,studentId:E}))},Ps=E=>{try{A(`${se}/api/class_user/`,{method:"DELETE",headers:{class_id:s,user_id:E}})}catch($){console.error("Error deleting student:",$),j("Error deleting student")}};return r.useEffect(()=>{n&&n.on("select",()=>{t(n.selectedScrollSnap())})},[n]),e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[b&&e.jsx("div",{className:"text-red-500 mt-2",children:b}),S?e.jsxs(F,{className:"p-6 pt-0",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Update Class Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(q,{children:[e.jsx(Q,{position:"stacked",children:"Class Name"}),e.jsx(ke,{type:"text",name:"class_name",placeholder:"Enter class name",value:w==null?void 0:w.class_name,onIonChange:Re})]}),B.className&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:B.className}),e.jsxs(q,{children:[e.jsx(Q,{position:"stacked",children:"Class Description"}),e.jsx(ke,{type:"text",name:"class_description",placeholder:"Enter class description",value:w==null?void 0:w.class_description,onIonChange:Re})]}),B.classDescription&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:B.classDescription}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(v,{onClick:As,fill:"outline",className:"mr-2",children:"Cancel"}),e.jsx(v,{onClick:Ds,fill:"solid",color:"primary",children:"Save"})]})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:P?"Loading...":i==null?void 0:i.ClassName}),e.jsx("p",{className:"text-gray-600",children:P?"Loading...":i==null?void 0:i.ClassDescription}),l&&e.jsx(_,{icon:us,size:"large",color:"primary",className:"hover:transform hover:scale-110 cursor-pointer p-2",onClick:k})]}),l&&e.jsx("div",{className:"mb-8",children:e.jsx(v,{routerLink:"/create-set",fill:"solid",color:"primary",children:"Create Flashcard Set"})})]}),e.jsx("div",{className:"flex flex-row justify-between mb-6",children:e.jsxs(v,{onClick:()=>window.history.back(),fill:"outline",children:[e.jsx(_,{slot:"start",icon:Ee}),"Back"]})}),e.jsxs(ds,{value:d,onIonChange:E=>o(E.detail.value),className:"w-full mb-6",children:[e.jsxs(le,{value:"flashcards",children:[e.jsx(_,{icon:hs,className:"mr-2"}),e.jsx(Q,{children:"Flashcard Sets"})]}),e.jsxs(le,{value:"leaderboard",children:[e.jsx(_,{icon:Nt,className:"mr-2"}),e.jsx(Q,{children:"Leaderboard"})]}),e.jsxs(le,{value:"students",children:[e.jsx(_,{icon:yt,className:"mr-2"}),e.jsx(Q,{children:"Students"})]})]}),d==="leaderboard"&&e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(re,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Calculating scores..."})]}):e.jsx(Ht,{leaderboard:K,classUsers:y})}),d==="flashcards"&&e.jsx(Vt,{flashcardSets:h,currentCardIndex:a,setApi:c}),d==="students"&&e.jsx("div",{className:"flex flex-col",children:e.jsx(Jt,{isTeacher:l,students:y,onDeleteStudent:_s})})]}),e.jsx(pe,{isOpen:Ue.isOpen,onDidDismiss:()=>ie(E=>({...E,isOpen:!1,studentId:null})),header:"Confirm Deletion",message:"Are you sure you want to delete this Student? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked"),ie(E=>({...E,isOpen:!1,studentId:null}))}},{text:"Delete",handler:()=>{Ps(Ue.studentId),ie(E=>({...E,isOpen:!1,studentId:null})),console.log("Account deleted")}}]}),e.jsx(Is,{})]})},Wt="https://cowboy-cards.dsouth.org",Kt=()=>{const[s,a]=r.useState(!1),[t,n]=r.useState(!1),[c,d]=r.useState(null),[o,l]=r.useState({className:"",description:""}),[x,i]=r.useState(!1);return r.useEffect(()=>{async function u(){if(s){n(!0),d(null);try{const h=await A(`${Wt}/api/classes`,{method:"POST",headers:{class_name:o.className,class_description:o.description}});console.log("Class created successfully:",h),a(!1),l({className:"",description:""}),i(!0),n(!1)}catch(h){d(`Failed to create class: ${h.message}`)}finally{n(!1)}}}s&&u()},[s,o]),e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[c&&e.jsx("div",{className:"text-red-500 mt-2",children:c}),e.jsxs("form",{children:[e.jsx(L,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(F,{children:[e.jsx(te,{placeholder:"Enter Class Name",value:o.className,onIonChange:u=>l(h=>({...h,className:u.detail.value||""})),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),e.jsx(te,{placeholder:"Enter Class Description",value:o.description,onIonChange:u=>l(h=>({...h,description:u.detail.value||""})),rows:1,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}})]})}),e.jsx("div",{className:"flex flex-col md:flex-row justify-center md:justify-end gap-4 mt-8",children:e.jsx(v,{color:"success",disabled:t,onClick:()=>a(!0),children:t?"Creating...":"Create Class"})})]}),x&&e.jsx(M,{children:e.jsx("p",{children:"Class created successfully!"})})]})]})},H="https://cowboy-cards.dsouth.org",Je=()=>{const{id:s}=Ne(),a=ge(),[t,n]=r.useState(""),[c,d]=r.useState(""),[o,l]=r.useState([{front:"",back:""}]),[x,i]=r.useState({title:"",description:""}),[u,h]=r.useState(!1),[g,y]=r.useState(!1),[m,b]=r.useState(null);r.useEffect(()=>{s&&((async()=>{try{const S=await fetch(`${H}/api/flashcards/list`,{method:"GET",headers:{set_id:s}});if(!S.ok)throw new Error("Failed to fetch flashcards");const p=await S.json();console.log(p);const w=Array.isArray(p)?p:[];w.length===0?l([{front:"",back:""}]):l(w.map(C=>({id:C.ID,front:C.Front,back:C.Back})))}catch(S){console.error("Error fetching flashcards:",S)}})(),(async()=>{try{const S=await fetch(`${H}/api/flashcards/sets/`,{method:"GET",headers:{id:s}});if(!S.ok){a.push("/create-set");return}const p=await S.json();console.log(p),n(p.SetName),d(p.SetDescription)}catch(S){console.error("Error fetching flashcard set",S)}})())},[s,a]);const j=()=>{l([...o,{front:"",back:""}])},P=f=>{l(o.filter((N,S)=>S!==f))},D=(f,N,S)=>{l(o.map((p,w)=>w===f?{...p,[N]:S}:p)),l(o.map((p,w)=>w===f?{...p,[N]:S}:p))},K=async()=>{y(!0),b(null);const f={title:"",description:""};let N=!1;if(t.trim()||(f.title="Title is required",N=!0),c.trim()||(f.description="Description is required",N=!0),i(f),N){y(!1);return}const S=o.filter(p=>p.front.trim()!==""||p.back.trim()!=="");if(s)try{await A(`${H}/api/flashcards/sets/set_name`,{method:"PUT",headers:{id:s,set_name:t}}),await A(`${H}/api/flashcards/sets/set_description`,{method:"PUT",headers:{id:s,set_description:c}});const p=await A(`${H}/api/flashcards/list`,{method:"GET",headers:{set_id:s}});for(const w of S)w.id?(await A(`${H}/api/flashcards/front`,{method:"PUT",headers:{id:w.id.toString(),front:w.front}}),await A(`${H}/api/flashcards/back`,{method:"PUT",headers:{id:w.id.toString(),back:w.back}})):await A(`${H}/api/flashcards`,{method:"POST",headers:{front:w.front.trim(),back:w.back.trim(),set_id:s.toString()}});a.push(`/flashcards/${s}`)}catch(p){console.error("Error saving flashcard set:",p),b(`Failed to save flashcard set: ${p.message}`)}finally{y(!1)}else try{const p=await fetch(`${H}/flashcards/sets/`,{method:"POST",headers:{set_name:t,set_description:c}});if(!p.ok)throw new Error(`HTTP error! Status: ${p.status}`);const C=(await p.json()).ID;for(const k of S)await fetch(`${H}/flashcards`,{method:"POST",headers:{front:k.front,back:k.back,set_id:C.toString()}});y(!1),a.push(`/flashcards/${C}`)}catch(p){console.error("Error saving flashcard set:",p),b(`Failed to save flashcard set: ${p.message}`)}finally{y(!1)}},J=()=>{n(""),d(""),l([{front:"",back:""}]),i({title:"",description:""}),console.log("Flashcard set deleted")};return e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[g&&e.jsx("div",{children:"Loading..."}),m&&e.jsx("div",{className:"text-red-500 mt-2",children:m}),e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create New Flashcard Set"}),e.jsx(L,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(F,{children:[e.jsx(te,{placeholder:"Enter set title",value:t,onIonChange:f=>n(f.detail.value),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),x.title&&e.jsx(M,{color:"danger",children:e.jsx("p",{className:"text-sm mt-1",children:x.title})}),e.jsx(te,{placeholder:"Enter set description",value:c,onIonChange:f=>d(f.detail.value),rows:1,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}}),x.description&&e.jsx(M,{color:"danger",children:e.jsx("p",{className:"text-sm mt-1",children:x.description})})]})}),o.map((f,N)=>e.jsx(L,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(F,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-base font-semibold",children:["Card ",N+1]}),e.jsx(v,{fill:"clear",color:"danger",onClick:()=>P(N),children:e.jsx(_,{icon:ms})})]}),e.jsx(te,{placeholder:"Front of card",value:f.front,onIonChange:S=>D(N,"front",S.detail.value),rows:1,autoGrow:!0,className:"mb-4",style:{resize:"none"}}),e.jsx(te,{placeholder:"Back of card",value:f.back,onIonChange:S=>D(N,"back",S.detail.value),rows:1,autoGrow:!0,style:{resize:"none"}})]})},N)),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs(v,{color:"primary",className:"rounded-lg shadow-sm",onClick:j,children:[e.jsx(_,{slot:"start",icon:xs})," Add Card"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center md:justify-end gap-4 mt-8",children:[e.jsx(v,{color:"danger",onClick:()=>h(!0),children:"Delete Set"}),e.jsx(v,{color:"success",className:"rounded-lg shadow-sm w-full md:w-auto",onClick:K,children:s?"Update Set":"Create Set"})]}),e.jsx(pe,{isOpen:u,onDidDismiss:()=>h(!1),header:"Confirm Set Deletion",message:"Are you sure you want to delete this flashcard set? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Delete",handler:()=>{J()}}]})]})]})},Ye="https://cowboy-cards.dsouth.org",Qt=()=>{const{id:s}=Ne();ge();const[a,t]=r.useState(""),[n,c]=r.useState(""),[d,o]=r.useState([]),[l,x]=r.useState(),[i,u]=r.useState(0),[h,g]=r.useState(!0);r.useEffect(()=>{const m=async()=>{try{const P=await(await fetch(`${Ye}/api/flashcards/sets/`,{method:"GET",headers:{id:s}})).json();t(P.SetName),c(P.SetDescription)}catch(j){console.error("Failed to fetch set info",j)}},b=async()=>{g(!0);try{const P=await(await fetch(`${Ye}/api/flashcards/list`,{method:"GET",headers:{set_id:s}})).json();o(Array.isArray(P)?P.map(D=>({id:D.ID,front:D.Front,back:D.Back})):[])}catch(j){console.error("Failed to fetch cards",j),o([])}finally{g(!1)}};s&&(m(),b())},[s]),r.useEffect(()=>{if(!l)return;const m=()=>{u(l.selectedScrollSnap())};return m(),l.on("select",m),l.on("reInit",m),()=>{l.off("select",m),l.off("reInit",m)}},[l]);const y=()=>{l&&l.scrollNext()};return e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(v,{className:"rounded-lg",fill:"outline",style:{"--border-radius":"0.5rem"},routerLink:`/set-overview/${s}`,children:"Back"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a}),e.jsx("p",{className:"text-gray-500",children:n})]})]}),e.jsx("div",{className:"w-full max-w-xl mx-auto relative py-8 min-h-[400px] flex items-center justify-center",children:h?e.jsx(re,{name:"circular"}):d.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg py-20",children:"This set has no cards yet."}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{orientation:"vertical",setApi:x,className:"w-full",children:e.jsx(Fe,{className:"-mt-1 h-[400px]",children:d.map((m,b)=>e.jsx(Oe,{children:e.jsx(Es,{front:m.front,back:m.back,onAdvance:y,cardId:m.id,userId:1})},b))})}),e.jsx("div",{className:"absolute right-[-50px] top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:d.map((m,b)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${b===i?"bg-primary":"bg-gray-300"}`},b))})]})})]})]})},We="https://cowboy-cards.dsouth.org",Xt=()=>{const[s,a]=r.useState("classes"),[t,n]=r.useState([]),[c,d]=r.useState([]),[o,l]=r.useState(!1),[x,i]=r.useState(!1),[u,h]=r.useState(null);return r.useEffect(()=>{const g=async()=>{l(!0),h(null);try{const m=await A(`${We}/api/class_user/classes`);console.log(m),n(m)}catch(m){h(`Error fetching classes: ${m.message}`)}finally{l(!1)}},y=async()=>{i(!0);try{const m=await A(`${We}/api/flashcards/sets/list`);d(m)}catch(m){h(`Error fetching sets: ${m.message}`)}finally{i(!1)}};g(),y()},[]),e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[u&&e.jsx("div",{className:"text-red-500 mt-2",children:u}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s==="classes"?"My Classes":"Personal Flashcard Sets"}),e.jsx("div",{className:"flex items-center gap-2 mt-4 md:mt-0",children:e.jsxs(v,{color:"primary",className:"rounded-lg",style:{"--border-radius":"0.5rem"},href:s==="classes"?"/class/create":"/set/create",children:[e.jsx(_,{slot:"start",icon:xs})," ",s==="classes"?"Add Class":"Add Set"]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(ds,{value:s,onIonChange:g=>a(g.detail.value||"classes"),style:{"--background":"var(--ion-color-light)"},children:[e.jsxs(le,{value:"classes",children:[e.jsx(_,{icon:bt,className:"mr-2"}),e.jsx(Q,{children:"My Classes"})]}),e.jsxs(le,{value:"flashcards",children:[e.jsx(_,{icon:hs,className:"mr-2"}),e.jsx(Q,{children:"My Cards"})]})]})}),s==="classes"&&e.jsx(e.Fragment,{children:o?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(re,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading classes..."})]}):t===null?e.jsx("div",{className:"text-center p-8 text-gray-600",children:"You are not part of any classes. Join a class to get started."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(g=>e.jsx(ae,{to:`/class/${g.ID}`,children:e.jsxs(L,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:g.ClassName}),e.jsx(je,{className:"text-sm text-muted-foreground",children:g.ClassDescription})]}),e.jsx(F,{})]})},g.ID))})}),s==="flashcards"&&e.jsx(e.Fragment,{children:x?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(re,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading sets..."})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(g=>e.jsx(ae,{to:`/set/${g.ID}`,children:e.jsxs(L,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:g.SetName}),e.jsx(je,{className:"text-sm text-muted-foreground",children:g.SetDescription})]}),e.jsx(F,{})]})},g.ID))})}),e.jsx(Is,{})]})]})},Zt=()=>e.jsx(z,{children:e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center from-white to-gray-50",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"CowboyCards"}),e.jsx("p",{children:"Master any subject with smart flashcards"})]}),e.jsx(ps,{})]})}),ea=()=>{const s=Xs();return r.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsxs(z,{children:[e.jsx(V,{}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})]})},sa="https://cowboy-cards.dsouth.org",ta=()=>{const[s,a]=r.useState(null),[t,n]=r.useState(!1),[c,d]=r.useState([]),[o,l]=r.useState(""),x=c.filter(i=>i.SetName.toLowerCase().includes(o.toLowerCase())||i.SetDescription&&i.SetDescription.toLowerCase().includes(o.toLowerCase()));return r.useEffect(()=>{async function i(){n(!0),a(null);try{const u=await A(`${sa}/api/flashcards/sets/list`);d(u)}catch(u){console.error("Error fetching flashcard sets:",u),a(`Error fetching flashcard sets: ${u.message}`)}finally{n(!1)}}i()},[]),e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 w-1/2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold pb-8",children:"Public Flashcard Sets"}),t&&e.jsx("div",{children:"Loading..."}),s&&e.jsx("div",{className:"text-red-500 mt-2",children:s}),e.jsx(Zs,{value:o,onIonInput:i=>l(i.target.value),placeholder:"Search flashcard sets",className:"mb-4 w-1/2"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:x.map(i=>e.jsx(ae,{to:`/flashcards/${i.ID}`,children:e.jsx(L,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:i.SetName}),e.jsx(je,{className:"text-sm text-gray-600",children:i.SetDescription||"No description"})]})})},i.ID))})]})]})},Ke="https://cowboy-cards.dsouth.org",aa=()=>{const[s,a]=r.useState([]),[t,n]=r.useState(!1),[c,d]=r.useState(null);return r.useEffect(()=>{(async()=>{n(!0),d(null);try{const l=await A(`${Ke}/api/classes/list`);a(l),n(!1)}catch(l){d(`Error fetching classes: ${l.message}`)}finally{n(!1)}})()},[]),e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold pb-8",children:"Public Classes"}),t&&e.jsx("div",{children:"Loading..."}),c&&e.jsx("div",{className:"text-red-500 mt-2",children:c}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(o=>e.jsx(ae,{to:`/class/${o.ID}`,children:e.jsx(L,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:o.ClassName}),e.jsx(je,{className:"text-sm text-gray-600",children:o.ClassDescription||"No description"}),e.jsx(v,{expand:"block",color:"primary",className:"mt-4",onClick:async()=>{try{const l=await A(`${Ke}/api/class_user`,{method:"POST",headers:{class_id:o.ID,role:"student"}});console.log("Join class response:",l)}catch(l){console.error("Error joining class:",l)}},children:"Join Class"})]})})},o.ID))})]})]})},Qe="https://cowboy-cards.dsouth.org",ra=()=>{const{id:s}=Ne();ge();const[a,t]=r.useState(""),[n,c]=r.useState(""),[d,o]=r.useState([]),[l,x]=r.useState(!0);return r.useEffect(()=>{const i=async()=>{try{const g=await(await fetch(`${Qe}/api/flashcards/sets/`,{method:"GET",headers:{id:s}})).json();t(g.SetName),c(g.SetDescription)}catch(h){console.error("Failed to fetch set info",h)}},u=async()=>{x(!0);try{const g=await(await fetch(`${Qe}/api/flashcards/list`,{method:"GET",headers:{set_id:s}})).json();o(Array.isArray(g)?g.map(y=>({front:y.Front,back:y.Back})):[])}catch(h){console.error("Failed to fetch cards",h),o([])}finally{x(!1)}};s&&(i(),u())},[s]),e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 pr-4",children:[e.jsx(v,{className:"rounded-lg",fill:"outline",style:{"--border-radius":"0.5rem"},onClick:()=>window.history.back(),children:"Back"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-3xl font-bold",children:a}),e.jsx("p",{className:"text-base mt-1 text-gray-700",children:n})]})]}),e.jsxs("div",{className:"self-start md:self-center flex gap-2 md:mt-0 mt-4 w-full md:w-auto",children:[e.jsx(v,{className:"rounded-lg w-1/2 md:w-auto",fill:"outline",style:{"--border-radius":"0.5rem"},routerLink:`/edit-set/${s}`,children:"Edit Set"}),e.jsx(v,{className:"rounded-lg w-1/2 md:w-auto",color:"primary",style:{"--border-radius":"0.5rem"},routerLink:`/flashcards/${s}`,children:"Study Set"})]})]}),e.jsx("div",{className:"mt-8 min-h-[200px] flex items-center justify-center",children:l?e.jsx(re,{name:"circular"}):d.length===0?e.jsx("div",{className:"text-center text-lg text-gray-900 dark:text-gray-400",children:"This set has no cards yet."}):e.jsx("div",{className:"w-full",children:d.map((i,u)=>e.jsx(L,{className:"mb-4 rounded-lg border shadow-sm",children:e.jsxs(F,{children:[e.jsx("div",{className:"border-b border-gray-300 mb-3 pb-1 m-4",children:e.jsxs(M,{className:"text-md font-semibold text-gray-900 dark:text-gray-300",children:["Card ",u+1]})}),e.jsxs("div",{className:"flex flex-row justify-between items-start",children:[e.jsx("div",{className:"w-3/12 pr-4 border-r border-gray-300 m-4",children:e.jsx(M,{className:"block whitespace-pre-wrap text-lg text-gray-900 dark:text-gray-200",children:i.front})}),e.jsx("div",{className:"w-9/12 pl-4 m-4",children:e.jsx(M,{className:"block whitespace-pre-wrap text-lg text-gray-900 dark:text-gray-200",children:i.back})})]})]})},u))})})]})]})},na=()=>{const[s,a]=r.useState(!1),t=[{id:1,name:"Biology 101",students:25,sets:5,cardsMastered:85},{id:2,name:"Spanish Basics",students:18,sets:3,cardsMastered:78},{id:3,name:"World History",students:30,sets:7,cardsMastered:92}],n=t.length,c=t.reduce((l,x)=>l+x.students,0),d=t.reduce((l,x)=>l+x.sets,0),o=t.reduce((l,x)=>l+x.cardsMastered,0)/n;return e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Overview"}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-4 mb-8",children:[e.jsxs(L,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Classes"})}),e.jsx(F,{children:e.jsx(M,{className:"text-2xl font-bold",children:n})})]}),e.jsxs(L,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Students"})}),e.jsx(F,{children:e.jsx(M,{className:"text-2xl font-bold",children:c})})]}),e.jsxs(L,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Sets"})}),e.jsx(F,{children:e.jsx(M,{className:"text-2xl font-bold",children:d})})]}),e.jsxs(L,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Average Cards Mastered"})}),e.jsx(F,{children:e.jsx(M,{className:"text-2xl font-bold",children:o.toFixed(1)})})]})]}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Classes"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(l=>e.jsx(ae,{to:`/class/${l.id}`,children:e.jsxs(L,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:l.name}),e.jsxs(M,{className:"text-sm text-gray-600",children:[l.students," students enrolled"]})]}),e.jsxs(F,{className:"flex flex-col gap-0 p-6 pt-0",children:[e.jsxs(M,{className:"text-sm text-gray-600",children:[l.sets," sets"]}),e.jsxs(M,{className:"text-sm text-gray-600",children:["Cards mastered: ",l.cardsMastered]})]})]})},l.id))})]})]})},ue=s=>e.jsxs("div",{children:[e.jsx(q,{children:e.jsx(ke,{type:"text",label:s.label,name:s.name,value:s.value,onIonChange:s.onChange})}),s.error&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.error})]}),Y=s=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium",children:[s.label,":"]}),e.jsx("span",{children:s.value})]}),la=s=>{var a,t,n,c,d,o,l,x,i,u,h,g;return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs(L,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Information"})}),e.jsx(F,{className:"p-6 pt-0",children:s.isEditing?e.jsxs("div",{className:"space-y-4",children:[e.jsx(ue,{label:"First Name",name:"first_name",value:((a=s.updatedInfo)==null?void 0:a.first_name)||"",error:s.errors.first_name,onChange:s.handleChange}),e.jsx(ue,{label:"Last Name",name:"last_name",value:((t=s.updatedInfo)==null?void 0:t.last_name)||"",error:s.errors.last_name,onChange:s.handleChange}),e.jsx(ue,{label:"Username",name:"username",value:((n=s.updatedInfo)==null?void 0:n.username)||"",error:s.errors.username,onChange:s.handleChange}),e.jsx(ue,{label:"Email",name:"email",value:((c=s.updatedInfo)==null?void 0:c.email)||"",error:s.errors.email,onChange:s.handleChange}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(v,{onClick:s.handleSave,children:"Save Changes"})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{label:"First Name",value:(d=s.userInfo)==null?void 0:d.first_name}),e.jsx(Y,{label:"Last Name",value:(o=s.userInfo)==null?void 0:o.last_name}),e.jsx(Y,{label:"Username",value:(l=s.userInfo)==null?void 0:l.username}),e.jsx(Y,{label:"Email",value:(x=s.userInfo)==null?void 0:x.email}),e.jsxs(v,{fill:"outline",onClick:s.handleEdit,className:"mt-4",children:[e.jsx(_,{slot:"start",icon:us}),"Edit Info"]})]})})]}),e.jsxs(L,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Stats"})}),e.jsx(F,{className:"p-6 pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(Y,{label:"Account Created",value:(i=s.userInfo)==null?void 0:i.created_at}),e.jsx(Y,{label:"Classes Taken",value:(u=s.userInfo)==null?void 0:u.numClasses}),e.jsx(Y,{label:"Cards Shown",value:(h=s.userInfo)==null?void 0:h.cardsSeen}),e.jsx(Y,{label:"Cards Mastered",value:(g=s.userInfo)==null?void 0:g.totalCardViews})]})})]})]})},oa=s=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-6 py-6",children:e.jsxs(L,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Options"})}),e.jsx(F,{className:"p-6 pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{children:e.jsxs(et,{label:"Theme",value:s.theme,onIonChange:a=>s.setTheme(a.detail.value),interface:"popover",placeholder:"Select Theme",children:[e.jsx(ze,{value:"light",children:"Light"}),e.jsx(ze,{value:"dark",children:"Dark"})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Change Your Password"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Reset your account password."})]}),e.jsx(v,{onClick:()=>s.setShowPasswordAlert(!0),children:"Change Password"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Delete Your Account"}),e.jsx("p",{className:"text-xs text-gray-600",children:"This will delete all account data and can't be undone."})]}),e.jsx(v,{color:"danger",onClick:()=>s.setShowDeleteAlert(!0),children:"Delete Account"})]})]})})]})}),e.jsx(pe,{isOpen:s.showPasswordAlert,onDidDismiss:()=>s.setShowPasswordAlert(!1),header:"Change Password",inputs:[{name:"oldPassword",type:"password",placeholder:"Old Password"},{name:"newPassword",type:"password",placeholder:"New Password"},{name:"confirmPassword",type:"password",placeholder:"Confirm New Password"}],buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Save",handler:a=>a.newPassword!==a.confirmPassword?(s.presentToast({message:"Passwords do not match",duration:2e3,color:"danger"}),!0):(console.log("Password changed"),!0)}]}),e.jsx(pe,{isOpen:s.showDeleteAlert,onDidDismiss:()=>s.setShowDeleteAlert(!1),header:"Confirm Deletion",message:"Are you sure you want to delete your account? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Delete",handler:()=>{console.log("Account deleted")}}]})]}),Xe="https://cowboy-cards.dsouth.org",ca=()=>{const{theme:s,setTheme:a}=vs(),[t,n]=r.useState(),[c,d]=r.useState(!0),[o,l]=r.useState(null),[x,i]=r.useState(null),[u,h]=r.useState(!1),[g,y]=r.useState(!1),[m,b]=r.useState(!1),[j,P]=r.useState(t),D=C=>{i(x===C?null:C)},K=()=>{P(t),b(!0)},J=async()=>{if(!f())return;const C=["first_name","last_name","username","email"];try{const k=C.filter(B=>j[B]!==t[B]).map(B=>A(`${Xe}/api/users/${B}`,{method:"PUT",headers:{[B]:j[B]}}));await Promise.all(k),n(j),b(!1)}catch(k){console.error(k),alert("Failed to update some fields. Please try again.")}},f=()=>{const C={};let k=!0;return j.first_name||(C.first_name="First name is required",k=!1),j.last_name||(C.last_name="Last name is required",k=!1),j.email?/\S+@\S+\.\S+/.test(j.email)||(C.email="Email is invalid",k=!1):(C.email="Email is required",k=!1),j.username||(C.username="Username is required",k=!1),j.first_name=j.first_name.trim(),j.last_name=j.last_name.trim(),j.email=j.email.trim(),j.username=j.username.trim(),S(C),k},[N,S]=r.useState({}),p=C=>{const{name:k}=C.target,B=C.detail.value;P(we=>({...we,[k]:B}))};r.useEffect(()=>{(async()=>{d(!0),l(null);try{const k=await A(`${Xe}/api/users/`,{method:"GET",headers:{}});n(k),P(k),console.log("data",k)}catch(k){console.log(`Failed to fetch User Data: ${k.message}`),l(`Failed to fetch User Data: ${k.message}`)}finally{d(!1)}})()},[]);const[w]=st();return e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("p",{className:"text-xl font-semibold text-primary",children:["Welcome back, ",(t==null?void 0:t.username)||"User","!"]})}),e.jsxs(v,{onClick:()=>window.history.back(),fill:"outline",className:"mb-6",children:[e.jsx(_,{slot:"start",icon:Ee}),"Back"]}),c&&e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(re,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading account details..."})]}),o&&!c&&e.jsx("div",{className:"text-red-500 text-center p-4 border border-red-500 rounded-md",children:o}),!c&&!o&&t&&e.jsxs(e.Fragment,{children:[e.jsx(la,{isEditing:m,errors:N,handleChange:p,handleSave:J,updatedInfo:j,userInfo:t,handleEdit:K}),e.jsx(oa,{isEditing:m,errors:N,handleChange:p,handleSave:J,updatedInfo:j,userInfo:t,expandedClass:x,toggleClassDetails:D,showPasswordAlert:u,setShowPasswordAlert:h,showDeleteAlert:g,setShowDeleteAlert:y,theme:s,setTheme:a,presentToast:w})]})]})]})};tt();const ia=new wt;function da(){return e.jsx(at,{client:ia,children:e.jsx(zt,{children:e.jsxs(Bt,{children:[e.jsx(rt,{children:e.jsx(nt,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsxs(lt,{children:[e.jsx(O,{exact:!0,path:"/",component:Zt}),e.jsx(O,{exact:!0,path:"/home",component:Xt}),e.jsx(O,{exact:!0,path:"/class/:id",component:Yt}),e.jsx(O,{exact:!0,path:"/teacher",component:na}),e.jsx(O,{exact:!0,path:"/auth",component:ps}),e.jsx(O,{exact:!0,path:"/reset-password",component:$t}),e.jsx(O,{exact:!0,path:"/public-cards",component:ta}),e.jsx(O,{exact:!0,path:"/user-account",component:ca}),e.jsx(O,{exact:!0,path:"/flashcards/:id",component:Qt}),e.jsx(O,{exact:!0,path:"/create-set",component:Je}),e.jsx(O,{exact:!0,path:"/edit-set/:id",component:Je}),e.jsx(O,{exact:!0,path:"/class/create",component:Kt}),e.jsx(O,{exact:!0,path:"/public-classes",component:aa}),e.jsx(O,{exact:!0,path:"/set-overview/:id",component:ra}),e.jsx(O,{component:ea})]})})})}),e.jsx(Ut,{}),e.jsx(Lt,{})]})})})}const ma=document.getElementById("root"),ua=ot(ma);ua.render(e.jsx(da,{}));export{Na as _,ga as g};
//# sourceMappingURL=index-DX9vWrAe.js.map
