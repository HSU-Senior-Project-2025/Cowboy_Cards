import{t as Rs,c as Us,r,j as e,a as Ne,S as Bs,R as es,u as ss,C as ts,L as ae,b as Ms,I as v,d as _,e as zs,$ as qs,V as as,f as rs,A as ns,g as ls,X as os,T as cs,D as is,P as Gs,h as ds,i as Vs,k as Hs,l as Js,m as Ys,n as Ws,o as ye,p as Ks,q as Qs,s as Xs,v as F,w as R,x as U,y as L,z as Ee,B as Zs,E as ke,F as ne,G as et,H as M,J as st,K as Me,M as ze,N as tt,O as z,Q as pe,U as G,W as at,Y as rt,Z as nt,_ as lt,a0 as ot,a1 as ct,a2 as it,a3 as ms,a4 as we,a5 as Q,a6 as Ie,a7 as us,a8 as hs,a9 as le,aa as xs,ab as dt,ac as mt,ad as re,ae as je,af as te,ag as fs,ah as ut,ai as ge,aj as ht,ak as xt,al as ft,am as qe,an as pt,ao as jt,ap as gt,aq as Nt,ar as yt,as as wt,at as bt,au as O,av as vt}from"./nm-C4upAEiK.js";import"./index-DDWFvaQP.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(c){if(c.ep)return;c.ep=!0;const d=t(c);fetch(c.href,d)}})();function pa(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function I(...s){return Rs(Us(s))}const St=Ne("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Te=r.forwardRef(({className:s,variant:a,...t},n)=>e.jsx("div",{ref:n,role:"alert",className:I(St({variant:a}),s),...t}));Te.displayName="Alert";const Ct=r.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:I("mb-1 font-medium leading-none tracking-tight",s),...a}));Ct.displayName="AlertTitle";const De=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("text-sm [&_p]:leading-relaxed",s),...a}));De.displayName="AlertDescription";const kt=Ne("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=r.forwardRef(({className:s,variant:a,size:t,asChild:n=!1,...c},d)=>{const o=n?Bs:"button";return e.jsx(o,{className:I(kt({variant:a,size:t,className:s})),ref:d,...c})});W.displayName="Button";const ce=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a}));ce.displayName="Card";const Ae=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex flex-col space-y-1.5 p-6",s),...a}));Ae.displayName="CardHeader";const _e=r.forwardRef(({className:s,...a},t)=>e.jsx("h3",{ref:t,className:I("text-2xl font-semibold leading-none tracking-tight",s),...a}));_e.displayName="CardTitle";const Pe=r.forwardRef(({className:s,...a},t)=>e.jsx("p",{ref:t,className:I("text-sm text-muted-foreground",s),...a}));Pe.displayName="CardDescription";const $e=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("p-6 pt-0",s),...a}));$e.displayName="CardContent";const Fe=r.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:I("flex items-center p-6 pt-0",s),...a}));Fe.displayName="CardFooter";const X=r.forwardRef(({className:s,type:a,...t},n)=>e.jsx("input",{type:a,className:I("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:n,...t}));X.displayName="Input";const It=Ne("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=r.forwardRef(({className:s,...a},t)=>e.jsx(es,{ref:t,className:I(It(),s),...a}));Z.displayName=es.displayName;const Et=1,Tt=1e6;let Se=0;function Dt(){return Se=(Se+1)%Number.MAX_SAFE_INTEGER,Se.toString()}const Ce=new Map,Ge=s=>{if(Ce.has(s))return;const a=setTimeout(()=>{Ce.delete(s),oe({type:"REMOVE_TOAST",toastId:s})},Tt);Ce.set(s,a)},At=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,Et)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?Ge(t):s.toasts.forEach(n=>{Ge(n.id)}),{...s,toasts:s.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},xe=[];let fe={toasts:[]};function oe(s){fe=At(fe,s),xe.forEach(a=>{a(fe)})}function _t({...s}){const a=Dt(),t=c=>oe({type:"UPDATE_TOAST",toast:{...c,id:a}}),n=()=>oe({type:"DISMISS_TOAST",toastId:a});return oe({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:c=>{c||n()}}}),{id:a,dismiss:n,update:t}}function ps(){const[s,a]=r.useState(fe);return r.useEffect(()=>(xe.push(a),()=>{const t=xe.indexOf(a);t>-1&&xe.splice(t,1)}),[s]),{...s,toast:_t,dismiss:t=>oe({type:"DISMISS_TOAST",toastId:t})}}const Pt="modulepreload",$t=function(s,a){return new URL(s,a).href},Ve={},ja=function(a,t,n){let c=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),x=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));c=Promise.allSettled(t.map(i=>{if(i=$t(i,n),i in Ve)return;Ve[i]=!0;const u=i.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!n)for(let m=o.length-1;m>=0;m--){const w=o[m];if(w.href===i&&(!u||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${h}`))return;const j=document.createElement("link");if(j.rel=u?"stylesheet":Pt,u||(j.as="script"),j.crossOrigin="",j.href=i,x&&j.setAttribute("nonce",x),document.head.appendChild(j),u)return new Promise((m,w)=>{j.addEventListener("load",m),j.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${i}`)))})}))}function d(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return c.then(o=>{for(const l of o||[])l.status==="rejected"&&d(l.reason);return a().catch(d)})},He="https://cowboy-cards.dsouth.org",js=()=>{const[s,a]=r.useState(!0),[t,n]=r.useState(!1),[c,d]=r.useState(""),[o,l]=r.useState(""),[x,i]=r.useState(""),[u,h]=r.useState(""),[N,j]=r.useState(""),[m,w]=r.useState({}),g=ss(),{toast:P}=ps(),T=()=>{const f={};let y=!0;return c?/\S+@\S+\.\S+/.test(c)||(f.email="Email is invalid",y=!1):(f.email="Email is required",y=!1),o?o.length<8&&(f.password="Password must be at least 8 characters",y=!1):(f.password="Password is required",y=!1),!s&&!x&&(f.username="Username is required",y=!1),w(f),y},K=async f=>{if(f.preventDefault(),!!T()){n(!0),w({});try{let y;if(s?y=await fetch(`${He}/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:c,password:o})}):y=await fetch(`${He}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:x,email:c,password:o,first_name:u,last_name:N})}),!y.ok){const p=await y.json();throw p.code==="duplicate_email"?(w({email:"This email is already registered"}),new Error("This email is already registered")):p.code==="duplicate_username"?(w({username:"This username is already taken"}),new Error("This username is already taken")):p.code==="invalid_credentials"?(w({general:"Invalid email or password"}),new Error("Invalid email or password")):new Error(p.message||"Authentication failed")}const S=await y.json();P({title:s?"Welcome back!":"Account created",description:s?"You have been successfully logged in.":"Your account has been created successfully."}),g.push("/home")}catch(y){console.error("Authentication error:",y),Object.keys(m).length===0&&w({general:y.message||"An unexpected error occurred. Please try again."}),P({title:"Authentication failed",description:y.message||"Please check your credentials and try again.",variant:"destructive"})}finally{n(!1)}}},Y=()=>{w({}),s?(i(""),h(""),j("")):(d(""),l(""))};return e.jsxs(ce,{className:"w-[350px]",children:[e.jsxs(Ae,{children:[e.jsx(_e,{children:s?"Welcome back":"Create account"}),e.jsx(Pe,{children:s?"Enter your credentials to continue":"Sign up for a new account"})]}),e.jsxs("form",{onSubmit:K,children:[e.jsxs($e,{className:"space-y-4",children:[m.general&&e.jsxs(Te,{variant:"destructive",className:"mb-4",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx(De,{children:m.general})]}),!s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"username",children:"Username"}),e.jsx(X,{id:"username",type:"text",placeholder:"johndoe",value:x,onChange:f=>i(f.target.value),required:!0,className:m.username?"border-red-500":""}),m.username&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.username})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"firstName",children:"First Name"}),e.jsx(X,{id:"firstName",type:"text",placeholder:"John",value:u,onChange:f=>h(f.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"lastName",children:"Last Name"}),e.jsx(X,{id:"lastName",type:"text",placeholder:"Doe",value:N,onChange:f=>j(f.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(X,{id:"email",type:"email",placeholder:"name@example.com",value:c,onChange:f=>d(f.target.value),required:!0,className:m.email?"border-red-500":""}),m.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"password",children:"Password"}),e.jsx(X,{id:"password",type:"password",value:o,onChange:f=>l(f.target.value),required:!0,className:m.password?"border-red-500":""}),m.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:m.password}),!s&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),s&&e.jsx(ae,{to:"/reset-password",className:"text-sm text-purple-500",children:"Forgot password?"})]}),e.jsxs(Fe,{className:"flex flex-col space-y-4",children:[e.jsxs(W,{type:"submit",className:"w-full",disabled:t,children:[e.jsx(Ms,{className:"mr-2 h-4 w-4"}),t?s?"Signing in...":"Signing up...":s?"Sign in":"Sign up"]}),e.jsx(W,{variant:"link",type:"button",onClick:()=>{a(!s),Y()},className:"text-sm",disabled:t,children:s?"Need an account? Sign up":"Already have an account? Sign in"}),e.jsxs(v,{expand:"block",fill:"outline",className:"flex items-center justify-center space-x-2",onClick:()=>{console.log("Sign in with Google clicked")},children:[e.jsx(_,{slot:"start",src:"https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw",className:"h-5 w-5"}),e.jsx("p",{}),"Sign in with Google",e.jsx("img",{slot:"start",src:"https://www.gstatic.com/marketing-cms/assets/images/d5/dc/cfe9ce8b4425b410b49b7f2dd3f3/g.webp=s96-fcrop64=1,00000000ffffffff-rw",className:"h-10 w-10"})]})]})]})]})},Ft=()=>{const[s,a]=r.useState(""),[t,n]=r.useState({}),c=d=>{d.preventDefault()};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs(ce,{className:"w-[350px]",children:[e.jsxs(Ae,{children:[e.jsx(_e,{children:"Reset Password"}),e.jsx(Pe,{children:"Enter your email to reset your password"})]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs($e,{className:"space-y-4",children:[t.general&&e.jsxs(Te,{variant:"destructive",className:"mb-4",children:[e.jsx(ts,{className:"h-4 w-4"}),e.jsx(De,{children:t.general})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(X,{id:"email",type:"email",placeholder:"name@example.com",value:s,onChange:d=>a(d.target.value),required:!0,className:t.email?"border-red-500":""}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email})]})]}),e.jsx(Fe,{className:"flex flex-col space-y-4",children:e.jsx(W,{type:"submit",className:"w-full",children:"Send Reset Link"})})]})]})})},Lt=({...s})=>{const{theme:a="system"}=zs();return e.jsx(qs,{theme:a,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},Ot=Gs,gs=r.forwardRef(({className:s,...a},t)=>e.jsx(as,{ref:t,className:I("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a}));gs.displayName=as.displayName;const Rt=Ne("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Ns=r.forwardRef(({className:s,variant:a,...t},n)=>e.jsx(rs,{ref:n,className:I(Rt({variant:a}),s),...t}));Ns.displayName=rs.displayName;const Ut=r.forwardRef(({className:s,...a},t)=>e.jsx(ns,{ref:t,className:I("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...a}));Ut.displayName=ns.displayName;const ys=r.forwardRef(({className:s,...a},t)=>e.jsx(ls,{ref:t,className:I("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...a,children:e.jsx(os,{className:"h-4 w-4"})}));ys.displayName=ls.displayName;const ws=r.forwardRef(({className:s,...a},t)=>e.jsx(cs,{ref:t,className:I("text-sm font-semibold",s),...a}));ws.displayName=cs.displayName;const bs=r.forwardRef(({className:s,...a},t)=>e.jsx(is,{ref:t,className:I("text-sm opacity-90",s),...a}));bs.displayName=is.displayName;function Bt(){const{toasts:s}=ps();return e.jsxs(Ot,{children:[s.map(function({id:a,title:t,description:n,action:c,...d}){return e.jsxs(Ns,{...d,children:[e.jsxs("div",{className:"grid gap-1",children:[t&&e.jsx(ws,{children:t}),n&&e.jsx(bs,{children:n})]}),c,e.jsx(ys,{})]},a)}),e.jsx(gs,{})]})}const Mt=Vs,zt=r.forwardRef(({className:s,sideOffset:a=4,...t},n)=>e.jsx(ds,{ref:n,sideOffset:a,className:I("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));zt.displayName=ds.displayName;const vs=r.createContext(void 0);function qt({children:s}){const[a,t]=r.useState(()=>{const n=localStorage.getItem("theme");return n||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});return r.useEffect(()=>{localStorage.setItem("theme",a),a==="dark"?(document.documentElement.classList.add("dark"),document.body.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.body.classList.remove("dark"))},[a]),e.jsx(vs.Provider,{value:{theme:a,setTheme:t},children:s})}function Ss(){const s=r.useContext(vs);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s}const Je={method:"GET",headers:{},credentials:"include"};async function D(s="",a=Je){const t={...Je,...a};try{const n=await fetch(s,t);if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);return await n.json()}catch(n){throw console.error("API request failed:",n),n}}const Cs=r.createContext(null);function be(){const s=r.useContext(Cs);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const Le=r.forwardRef(({orientation:s="horizontal",opts:a,setApi:t,plugins:n,className:c,children:d,...o},l)=>{const[x,i]=Hs({...a,axis:s==="horizontal"?"x":"y"},n),[u,h]=r.useState(!1),[N,j]=r.useState(!1),m=r.useCallback(T=>{T&&(h(T.canScrollPrev()),j(T.canScrollNext()))},[]),w=r.useCallback(()=>{i==null||i.scrollPrev()},[i]),g=r.useCallback(()=>{i==null||i.scrollNext()},[i]),P=r.useCallback(T=>{T.key==="ArrowLeft"?(T.preventDefault(),w()):T.key==="ArrowRight"&&(T.preventDefault(),g())},[w,g]);return r.useEffect(()=>{!i||!t||t(i)},[i,t]),r.useEffect(()=>{if(i)return m(i),i.on("reInit",m),i.on("select",m),()=>{i==null||i.off("select",m)}},[i,m]),e.jsx(Cs.Provider,{value:{carouselRef:x,api:i,opts:a,orientation:s||((a==null?void 0:a.axis)==="y"?"vertical":"horizontal"),scrollPrev:w,scrollNext:g,canScrollPrev:u,canScrollNext:N},children:e.jsx("div",{ref:l,onKeyDownCapture:P,className:I("relative",c),role:"region","aria-roledescription":"carousel",...o,children:d})})});Le.displayName="Carousel";const Oe=r.forwardRef(({className:s,...a},t)=>{const{carouselRef:n,orientation:c}=be();return e.jsx("div",{ref:n,className:"overflow-hidden",children:e.jsx("div",{ref:t,className:I("flex",c==="horizontal"?"-ml-4":"-mt-4 flex-col",s),...a})})});Oe.displayName="CarouselContent";const Re=r.forwardRef(({className:s,...a},t)=>{const{orientation:n}=be();return e.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:I("min-w-0 shrink-0 grow-0 basis-full",n==="horizontal"?"pl-4":"pt-4",s),...a})});Re.displayName="CarouselItem";const ks=r.forwardRef(({className:s,variant:a="outline",size:t="icon",...n},c)=>{const{orientation:d,scrollPrev:o,canScrollPrev:l}=be();return e.jsxs(W,{ref:c,variant:a,size:t,className:I("absolute  h-8 w-8 rounded-full",d==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!l,onClick:o,...n,children:[e.jsx(Js,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]})});ks.displayName="CarouselPrevious";const Is=r.forwardRef(({className:s,variant:a="outline",size:t="icon",...n},c)=>{const{orientation:d,scrollNext:o,canScrollNext:l}=be();return e.jsxs(W,{ref:c,variant:a,size:t,className:I("absolute h-8 w-8 rounded-full",d==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!l,onClick:o,...n,children:[e.jsx(Ys,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})});Is.displayName="CarouselNext";const Gt="https://cowboy-cards.dsouth.org",Es=({front:s,back:a,onAdvance:t,cardId:n,userId:c})=>{const[d,o]=r.useState(!1),l=async u=>{try{const h=await D(`${Gt}${u}`,{method:"POST",headers:{user_id:c.toString(),card_id:n.toString()}});console.log(`Score update successful for card ${n}:`,h),t==null||t()}catch(h){console.error(`Failed to update score for card ${n}:`,h)}},x=()=>{l("/api/card_history/incorrect")},i=()=>{l("/api/card_history/correct")};return e.jsxs("div",{className:"w-full max-w-md mx-auto",children:[e.jsxs("div",{className:`flip-card cursor-pointer ${d?"flipped":""}`,onClick:()=>o(!d),children:[e.jsx(ce,{className:"flip-card-front p-8 min-h-[300px] flex items-center justify-center text-center",children:e.jsx("p",{className:"text-xl",children:s})}),e.jsx(ce,{className:"flip-card-back p-8 min-h-[300px] flex items-center justify-center text-center absolute top-0 w-full",children:e.jsx("p",{className:"text-xl",children:a})})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-6",children:[e.jsxs(W,{variant:"outline",className:"w-32",onClick:x,children:[e.jsx(os,{className:"mr-2 h-4 w-4"}),"Learning"]}),e.jsxs(W,{className:"w-32",onClick:i,children:[e.jsx(Ws,{className:"mr-2 h-4 w-4"}),"Mastered"]})]})]})},Vt="https://cowboy-cards.dsouth.org",Ht=s=>{const a=ye(),[t,n]=r.useState([]),[c,d]=r.useState(null);return r.useEffect(()=>{async function o(){console.log("selectedSet",c);const l=await D(`${Vt}/api/flashcards/list`,{method:"GET",headers:{set_id:c}});console.log("cards",l),n(l)}c&&o()},[c]),e.jsx("div",{className:"mt-6",children:c===null?e.jsx(Ks,{children:e.jsx(Qs,{children:s.flashcardSets.sort((o,l)=>o.ID-l.ID).map(o=>e.jsx(Xs,{size:"12",sizeMd:"6",sizeLg:"4",children:e.jsxs(F,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-all duration-200 rounded-lg border shadow-sm",onClick:()=>a.push(`/set-overview/${o.ID}`),children:[e.jsx(R,{children:e.jsx(U,{className:"text-lg font-semibold",children:o.SetName})}),e.jsx(L,{children:e.jsx("p",{className:"text-muted-foreground mb-2",children:o.SetDescription})})]})},o.ID))})}):e.jsxs(e.Fragment,{children:[e.jsxs(v,{fill:"outline",onClick:()=>d(null),className:"mb-6",children:[e.jsx(_,{slot:"start",icon:Ee}),"Back to Sets"]}),e.jsxs("div",{className:"w-full max-w-2xl mx-auto relative",children:[e.jsxs(Le,{orientation:"vertical",className:"w-full",setApi:s.setApi,children:[e.jsx(Oe,{className:"-mt-1 h-[400px]",children:t.map(o=>e.jsx(Re,{children:e.jsx(Es,{front:o.Front,back:o.Back,cardId:o.ID,userId:1})},o.ID))}),e.jsx(ks,{}),e.jsx(Is,{})]}),e.jsx("div",{className:"absolute right-[-50px] top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:t.map((o,l)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${l===s.currentCardIndex?"bg-primary":"bg-gray-300"}`},l))})]})]})})},Ts=()=>e.jsx(Zs,{children:e.jsxs(ke,{children:[e.jsx(ne,{slot:"start",children:e.jsx(v,{routerLink:"/home",children:e.jsx(_,{icon:et})})}),e.jsx(M,{className:"mx-auto text-center text-sm text-gray-500",children:"Cowboy Cards 2025. Built for learning and fun."})]})}),V=()=>{const[s,a]=r.useState(null),t=i=>a(i.nativeEvent),n=()=>a(null),c=i=>{var u;d.push(i),(u=document.querySelector("ion-menu"))==null||u.close()},d=ss(),{theme:o,setTheme:l}=Ss(),x=()=>{l(o==="dark"?"light":"dark")};return e.jsxs(e.Fragment,{children:[e.jsxs(st,{side:"start",contentId:"main-content",children:[e.jsx(Me,{children:e.jsx(ke,{children:e.jsx(ne,{slot:"start",children:e.jsx(ze,{children:e.jsx(v,{children:e.jsx(_,{icon:tt})})})})})}),e.jsx(z,{children:e.jsxs(pe,{children:[e.jsx(G,{button:!0,onClick:()=>c("/home"),children:"My Dashboard"}),e.jsx(G,{button:!0,onClick:()=>c("/public-cards"),children:"Public Cards"}),e.jsx(G,{button:!0,onClick:()=>c("/public-classes"),children:"Public Classes"}),e.jsx(G,{button:!0,onClick:()=>c("/user-account"),children:"My Account"})]})})]}),e.jsx(Me,{children:e.jsxs(ke,{children:[e.jsx(ne,{slot:"start",children:e.jsx(ze,{children:e.jsx(v,{children:e.jsx(_,{icon:at})})})}),e.jsx(rt,{color:"primary",className:"text-lg md:text-xl lg:text-2xl font-bold hover:translate-x-1 transition-all duration-300 cursor-pointer",onClick:()=>d.push("/home"),children:"Cowboy Cards"}),e.jsxs(ne,{slot:"end",children:[e.jsx(v,{onClick:t,children:e.jsx(_,{icon:nt,className:"text-[32px] stroke-[2]"})}),e.jsx(lt,{event:s,isOpen:!!s,onDidDismiss:n,children:e.jsx(z,{className:"p-2",children:e.jsxs(pe,{children:[e.jsx(G,{button:!0,onClick:()=>{n(),d.push("/create-set")},children:"Create Set"}),e.jsx(G,{button:!0,onClick:()=>{n(),d.push("/class/create")},children:"Create Class"}),e.jsx(G,{button:!0,onClick:()=>{n(),d.push("/public-classes")},children:"Join Class"})]})})}),e.jsx(v,{fill:"clear",onClick:x,children:e.jsx(_,{slot:"icon-only",icon:o==="dark"?ot:ct})})]}),e.jsx(ne,{slot:"end",children:e.jsx(v,{routerLink:"/user-account",children:e.jsx(_,{icon:it,size:"large"})})})]})})]})},Jt=({leaderboard:s,classUsers:a})=>e.jsxs(F,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{children:e.jsx(U,{className:"text-xl font-semibold",children:"Class Leaderboard"})}),e.jsx(L,{children:e.jsx(pe,{className:"space-y-3",lines:"none",children:s.map((t,n)=>e.jsxs(G,{className:"muted-item p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-lg",children:n+1}),e.jsx("span",{className:"font-medium",children:t.name})]}),e.jsxs("span",{slot:"end",className:"text-primary font-semibold",children:[t.totalScore," points"]})]},n))})})]}),Yt=({students:s,isTeacher:a,onDeleteStudent:t})=>e.jsxs(F,{className:"mt-6",children:[e.jsx(R,{children:e.jsx(U,{className:"text-xl font-semibold",children:"Class Students"})}),e.jsx(L,{children:e.jsx(pe,{className:"space-y-3",lines:"none",children:s.map(n=>e.jsxs(G,{className:"muted-item p-3",children:[e.jsxs("span",{className:"font-medium",children:[n.FirstName," ",n.LastName]}),e.jsx("span",{slot:"end",className:"text-muted-foreground",children:n.email}),a&&e.jsx(_,{slot:"end",icon:ms,color:"danger",className:"cursor-pointer",onClick:()=>t(n.id)})]},n.id))})})]}),se="https://cowboy-cards.dsouth.org",Wt=()=>{const{id:s}=we(),[a,t]=r.useState(0),[n,c]=r.useState(),[d,o]=r.useState("flashcards"),[l,x]=r.useState(!0),[i,u]=r.useState(),[h,N]=r.useState([]),[j,m]=r.useState([]),[w,g]=r.useState(null),[P,T]=r.useState(!1),[K,Y]=r.useState([]),[f,y]=r.useState(!1),[S,p]=r.useState(!1),[b,A]=r.useState({class_name:"",class_description:""}),C=()=>{console.log("Handling Edit"),A({class_name:(i==null?void 0:i.ClassName)||"",class_description:(i==null?void 0:i.ClassDescription)||""}),p(!0)},[B,ve]=r.useState({}),Ds=()=>{const k={};let $=!0;return b.class_name=b.class_name.trim(),b.class_description=b.class_description.trim(),b.class_name||(k.className="Class name is required",$=!1),b.class_description||(k.classDescription="Class description is required",$=!1),ve(k),$},As=async()=>{if(!Ds()){console.log("Form validation failed:",B);return}const k=["class_name","class_description"];try{const $=k.map(q=>D(`${se}/api/classes/${q}`,{method:"PUT",headers:{id:s,[q]:b[q]}}));await Promise.all($),u(q=>({...q,ClassName:b.class_name,ClassDescription:b.class_description})),p(!1)}catch($){console.error($),alert("Failed to update some fields. Please try again.")}},Ue=k=>{const{name:$}=k.target,q=k.detail.value;A(E=>({...E,[$]:q}))},_s=()=>{p(!1)};r.useEffect(()=>{async function k(){T(!0),g(null);try{const E=await D(`${se}/api/classes/`,{method:"GET",headers:{id:s}});console.log("data",E),u(E)}catch(E){g(`Error fetching class: ${E.message}`)}finally{T(!1)}}async function $(){const E=await D(`${se}/api/class_set/list_sets`,{method:"GET",headers:{class_id:s}});console.log("sets",E),N(E)}async function q(){const E=await D(`${se}/api/class_user/members`,{method:"GET",headers:{class_id:s}});console.log("users",E),m(E)}k(),$(),q()},[s]),r.useEffect(()=>{async function k(){if(!j.length||!h.length)return;y(!0),g(null);const $=new Map;try{await Promise.all(j.map(async E=>{try{const Fs=(await Promise.all(h.map(async me=>{try{const ee=await D(`${se}/api/card_history/set`,{method:"GET",headers:{user_id:E.UserID.toString(),set_id:me.ID.toString()}});return Array.isArray(ee)?ee.reduce((Ls,Os)=>Ls+(Os.NetScore||0),0):0}catch(ee){return console.error(`Error fetching scores for set ${me.ID}:`,ee),0}}))).reduce((me,ee)=>me+ee,0);$.set(E.UserID,Fs)}catch(de){console.error(`Error processing user ${E.UserID}:`,de),$.set(E.UserID,0)}}));const q=j.map(E=>({name:`${E.FirstName} ${E.LastName}`,totalScore:$.get(E.UserID)||0})).sort((E,de)=>de.totalScore-E.totalScore);Y(q)}catch(q){g("Error calculating leaderboard scores"),console.error("Leaderboard calculation error:",q)}finally{y(!1)}}k()},[j,h]);const[Be,ie]=r.useState({isOpen:!1,studentId:null}),Ps=k=>{ie($=>({...$,isOpen:!0,studentId:k}))},$s=k=>{try{D(`${se}/api/class_user/`,{method:"DELETE",headers:{class_id:s,user_id:k}})}catch($){console.error("Error deleting student:",$),g("Error deleting student")}};return r.useEffect(()=>{n&&n.on("select",()=>{t(n.selectedScrollSnap())})},[n]),e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[w&&e.jsx("div",{className:"text-red-500 mt-2",children:w}),S?e.jsxs(L,{className:"p-6 pt-0",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Update Class Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(G,{children:[e.jsx(Q,{position:"stacked",children:"Class Name"}),e.jsx(Ie,{type:"text",name:"class_name",placeholder:"Enter class name",value:b==null?void 0:b.class_name,onIonChange:Ue})]}),B.className&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:B.className}),e.jsxs(G,{children:[e.jsx(Q,{position:"stacked",children:"Class Description"}),e.jsx(Ie,{type:"text",name:"class_description",placeholder:"Enter class description",value:b==null?void 0:b.class_description,onIonChange:Ue})]}),B.classDescription&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:B.classDescription}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(v,{onClick:_s,fill:"outline",className:"mr-2",children:"Cancel"}),e.jsx(v,{onClick:As,fill:"solid",color:"primary",children:"Save"})]})]})]}):e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:P?"Loading...":i==null?void 0:i.ClassName}),e.jsx("p",{className:"text-gray-600",children:P?"Loading...":i==null?void 0:i.ClassDescription}),l&&e.jsx(_,{icon:us,size:"large",color:"primary",className:"hover:transform hover:scale-110 cursor-pointer p-2",onClick:C})]}),l&&e.jsx("div",{className:"mb-8",children:e.jsx(v,{routerLink:"/create-set",fill:"solid",color:"primary",children:"Create Flashcard Set"})})]}),e.jsx("div",{className:"flex flex-row justify-between mb-6",children:e.jsxs(v,{onClick:()=>window.history.back(),fill:"outline",children:[e.jsx(_,{slot:"start",icon:Ee}),"Back"]})}),e.jsxs(hs,{value:d,onIonChange:k=>o(k.detail.value),className:"w-full mb-6",children:[e.jsxs(le,{value:"flashcards",children:[e.jsx(_,{icon:xs,className:"mr-2"}),e.jsx(Q,{children:"Flashcard Sets"})]}),e.jsxs(le,{value:"leaderboard",children:[e.jsx(_,{icon:dt,className:"mr-2"}),e.jsx(Q,{children:"Leaderboard"})]}),e.jsxs(le,{value:"students",children:[e.jsx(_,{icon:mt,className:"mr-2"}),e.jsx(Q,{children:"Students"})]})]}),d==="leaderboard"&&e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(re,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Calculating scores..."})]}):e.jsx(Jt,{leaderboard:K,classUsers:j})}),d==="flashcards"&&e.jsx(Ht,{flashcardSets:h,currentCardIndex:a,setApi:c}),d==="students"&&e.jsx("div",{className:"flex flex-col",children:e.jsx(Yt,{isTeacher:l,students:j,onDeleteStudent:Ps})})]}),e.jsx(je,{isOpen:Be.isOpen,onDidDismiss:()=>ie(k=>({...k,isOpen:!1,studentId:null})),header:"Confirm Deletion",message:"Are you sure you want to delete this Student? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked"),ie(k=>({...k,isOpen:!1,studentId:null}))}},{text:"Delete",handler:()=>{$s(Be.studentId),ie(k=>({...k,isOpen:!1,studentId:null})),console.log("Account deleted")}}]}),e.jsx(Ts,{})]})},Kt="https://cowboy-cards.dsouth.org",Qt=()=>{const[s,a]=r.useState(!1),[t,n]=r.useState(!1),[c,d]=r.useState(null),[o,l]=r.useState({className:"",description:""}),[x,i]=r.useState(!1);return r.useEffect(()=>{async function u(){if(s){n(!0),d(null);try{const h=await D(`${Kt}/api/classes`,{method:"POST",headers:{class_name:o.className,class_description:o.description}});console.log("Class created successfully:",h),a(!1),l({className:"",description:""}),i(!0),n(!1)}catch(h){d(`Failed to create class: ${h.message}`)}finally{n(!1)}}}s&&u()},[s,o]),e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[c&&e.jsx("div",{className:"text-red-500 mt-2",children:c}),e.jsxs("form",{children:[e.jsx(F,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(L,{children:[e.jsx(te,{placeholder:"Enter Class Name",value:o.className,onIonChange:u=>l(h=>({...h,className:u.detail.value||""})),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),e.jsx(te,{placeholder:"Enter Class Description",value:o.description,onIonChange:u=>l(h=>({...h,description:u.detail.value||""})),rows:1,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}})]})}),e.jsx("div",{className:"flex flex-col md:flex-row justify-center md:justify-end gap-4 mt-8",children:e.jsx(v,{color:"success",disabled:t,onClick:()=>a(!0),children:t?"Creating...":"Create Class"})})]}),x&&e.jsx(M,{children:e.jsx("p",{children:"Class created successfully!"})})]})]})},ue={ID:-1,Front:"",Back:"",SetID:-1,CreatedAt:"",UpdatedAt:""},H="https://cowboy-cards.dsouth.org",Ye=()=>{const{id:s}=we(),a=ye(),[t,n]=r.useState(""),[c,d]=r.useState(""),[o,l]=r.useState([ue]),[x,i]=r.useState({title:"",description:""}),[u,h]=r.useState(!1),[N,j]=r.useState(!1),[m,w]=r.useState(null);r.useEffect(()=>{s&&((async()=>{try{const S=await fetch(`${H}/api/flashcards/list`,{method:"GET",headers:{set_id:s}});if(!S.ok)throw new Error("Failed to fetch flashcards");const p=await S.json();console.log(p);const b=Array.isArray(p)?p:[];b.length===0?l([ue]):l(b)}catch(S){console.error("Error fetching flashcards:",S)}})(),(async()=>{try{const S=await fetch(`${H}/api/flashcards/sets/`,{method:"GET",headers:{id:s}});if(!S.ok){a.push("/create-set");return}const p=await S.json();console.log(p),n(p.SetName),d(p.SetDescription)}catch(S){console.error("Error fetching flashcard set",S)}})())},[s,a]);const g=()=>{l([...o,ue])},P=f=>{l(o.filter((y,S)=>S!==f))},T=(f,y,S)=>{l(o.map((p,b)=>b===f?{...p,[y]:S}:p)),l(o.map((p,b)=>b===f?{...p,[y]:S}:p))},K=async()=>{j(!0),w(null);const f={title:"",description:""};let y=!1;if(t.trim()||(f.title="Title is required",y=!0),c.trim()||(f.description="Description is required",y=!0),i(f),y){j(!1);return}const S=o.filter(p=>p.Front.trim()!==""||p.Back.trim()!=="");if(s)try{await D(`${H}/api/flashcards/sets/set_name`,{method:"PUT",headers:{id:s,set_name:t}}),await D(`${H}/api/flashcards/sets/set_description`,{method:"PUT",headers:{id:s,set_description:c}});const p=await D(`${H}/api/flashcards/list`,{method:"GET",headers:{set_id:s}});for(const b of S)b.ID?(await D(`${H}/api/flashcards/front`,{method:"PUT",headers:{id:b.ID.toString(),front:b.Front}}),await D(`${H}/api/flashcards/back`,{method:"PUT",headers:{id:b.ID.toString(),back:b.Back}})):await D(`${H}/api/flashcards`,{method:"POST",headers:{front:b.Front.trim(),back:b.Back.trim(),set_id:s.toString()}});a.push(`/flashcards/${s}`)}catch(p){console.error("Error saving flashcard set:",p),w(`Failed to save flashcard set: ${p.message}`)}finally{j(!1)}else try{const p=await fetch(`${H}/flashcards/sets/`,{method:"POST",headers:{set_name:t,set_description:c}});if(!p.ok)throw new Error(`HTTP error! Status: ${p.status}`);const A=(await p.json()).ID;for(const C of S)await fetch(`${H}/flashcards`,{method:"POST",headers:{front:C.Front,back:C.Back,set_id:A.toString()}});j(!1),a.push(`/flashcards/${A}`)}catch(p){console.error("Error saving flashcard set:",p),w(`Failed to save flashcard set: ${p.message}`)}finally{j(!1)}},Y=()=>{n(""),d(""),l([ue]),i({title:"",description:""}),console.log("Flashcard set deleted")};return e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[N&&e.jsx("div",{children:"Loading..."}),m&&e.jsx("div",{className:"text-red-500 mt-2",children:m}),e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Create New Flashcard Set"}),e.jsx(F,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(L,{children:[e.jsx(te,{placeholder:"Enter set title",value:t,onIonChange:f=>n(f.detail.value),rows:1,autoGrow:!0,className:"w-full text-xl font-bold mb-2",style:{resize:"none"}}),x.title&&e.jsx(M,{color:"danger",children:e.jsx("p",{className:"text-sm mt-1",children:x.title})}),e.jsx(te,{placeholder:"Enter set description",value:c,onIonChange:f=>d(f.detail.value),rows:1,autoGrow:!0,className:"w-full text-base mt-4",style:{resize:"none"}}),x.description&&e.jsx(M,{color:"danger",children:e.jsx("p",{className:"text-sm mt-1",children:x.description})})]})}),o.map((f,y)=>e.jsx(F,{className:"mb-6 rounded-lg border shadow-sm",children:e.jsxs(L,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-base font-semibold",children:["Card ",y+1]}),e.jsx(v,{fill:"clear",color:"danger",onClick:()=>P(y),children:e.jsx(_,{icon:ms})})]}),e.jsx(te,{placeholder:"Front of card",value:f.Front,onIonChange:S=>T(y,"front",S.detail.value),rows:1,autoGrow:!0,className:"mb-4",style:{resize:"none"}}),e.jsx(te,{placeholder:"Back of card",value:f.Back,onIonChange:S=>T(y,"back",S.detail.value),rows:1,autoGrow:!0,style:{resize:"none"}})]})},y)),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs(v,{color:"primary",className:"rounded-lg shadow-sm",onClick:g,children:[e.jsx(_,{slot:"start",icon:fs})," Add Card"]})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center md:justify-end gap-4 mt-8",children:[e.jsx(v,{color:"danger",onClick:()=>h(!0),children:"Delete Set"}),e.jsx(v,{color:"success",className:"rounded-lg shadow-sm w-full md:w-auto",onClick:K,children:s?"Update Set":"Create Set"})]}),e.jsx(je,{isOpen:u,onDidDismiss:()=>h(!1),header:"Confirm Set Deletion",message:"Are you sure you want to delete this flashcard set? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Delete",handler:()=>{Y()}}]})]})]})},We="https://cowboy-cards.dsouth.org",Xt=()=>{const{id:s}=we();ye();const[a,t]=r.useState(""),[n,c]=r.useState(""),[d,o]=r.useState([]),[l,x]=r.useState(),[i,u]=r.useState(0),[h,N]=r.useState(!0);r.useEffect(()=>{const m=async()=>{try{const P=await(await fetch(`${We}/api/flashcards/sets/`,{method:"GET",headers:{id:s}})).json();t(P.SetName),c(P.SetDescription)}catch(g){console.error("Failed to fetch set info",g)}},w=async()=>{N(!0);try{const P=await(await fetch(`${We}/api/flashcards/list`,{method:"GET",headers:{set_id:s}})).json();o(Array.isArray(P)?P.map(T=>({id:T.ID,front:T.Front,back:T.Back})):[])}catch(g){console.error("Failed to fetch cards",g),o([])}finally{N(!1)}};s&&(m(),w())},[s]),r.useEffect(()=>{if(!l)return;const m=()=>{u(l.selectedScrollSnap())};return m(),l.on("select",m),l.on("reInit",m),()=>{l.off("select",m),l.off("reInit",m)}},[l]);const j=()=>{l&&l.scrollNext()};return e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(v,{className:"rounded-lg",fill:"outline",style:{"--border-radius":"0.5rem"},routerLink:`/set-overview/${s}`,children:"Back"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:a}),e.jsx("p",{className:"text-gray-500",children:n})]})]}),e.jsx("div",{className:"w-full max-w-xl mx-auto relative py-8 min-h-[400px] flex items-center justify-center",children:h?e.jsx(re,{name:"circular"}):d.length===0?e.jsx("div",{className:"text-center text-gray-500 text-lg py-20",children:"This set has no cards yet."}):e.jsxs(e.Fragment,{children:[e.jsx(Le,{orientation:"vertical",setApi:x,className:"w-full",children:e.jsx(Oe,{className:"-mt-1 h-[400px]",children:d.map((m,w)=>e.jsx(Re,{children:e.jsx(Es,{front:m.front,back:m.back,onAdvance:j,cardId:m.id,userId:1})},w))})}),e.jsx("div",{className:"absolute right-[-50px] top-1/2 transform -translate-y-1/2 flex flex-col gap-2",children:d.map((m,w)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${w===i?"bg-primary":"bg-gray-300"}`},w))})]})})]})]})},Ke="https://cowboy-cards.dsouth.org",Zt=()=>{const[s,a]=r.useState("classes"),[t,n]=r.useState([]),[c,d]=r.useState([]),[o,l]=r.useState(!1),[x,i]=r.useState(!1),[u,h]=r.useState(null);return r.useEffect(()=>{const N=async()=>{l(!0),h(null);try{const m=await D(`${Ke}/api/class_user/classes`);console.log(m),n(m)}catch(m){h(`Error fetching classes: ${m.message}`)}finally{l(!1)}},j=async()=>{i(!0);try{const m=await D(`${Ke}/api/set_user/list`);d(m)}catch(m){h(`Error fetching sets: ${m.message}`)}finally{i(!1)}};N(),j()},[]),e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[u&&e.jsx("div",{className:"text-red-500 mt-2",children:u}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s==="classes"?"My Classes":"Personal Flashcard Sets"}),e.jsx("div",{className:"flex items-center gap-2 mt-4 md:mt-0",children:e.jsxs(v,{color:"primary",className:"rounded-lg",style:{"--border-radius":"0.5rem"},href:s==="classes"?"/class/create":"/set/create",children:[e.jsx(_,{slot:"start",icon:fs})," ",s==="classes"?"Add Class":"Add Set"]})})]}),e.jsx("div",{className:"mb-8",children:e.jsxs(hs,{value:s,onIonChange:N=>a(N.detail.value||"classes"),style:{"--background":"var(--ion-color-light)"},children:[e.jsxs(le,{value:"classes",children:[e.jsx(_,{icon:ut,className:"mr-2"}),e.jsx(Q,{children:"My Classes"})]}),e.jsxs(le,{value:"flashcards",children:[e.jsx(_,{icon:xs,className:"mr-2"}),e.jsx(Q,{children:"My Cards"})]})]})}),s==="classes"&&e.jsx(e.Fragment,{children:o?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(re,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading classes..."})]}):t===null?e.jsx("div",{className:"text-center p-8 text-gray-600",children:"You are not part of any classes. Join a class to get started."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(N=>e.jsx(ae,{to:`/class/${N.ID}`,children:e.jsxs(F,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:N.ClassName}),e.jsx(ge,{className:"text-sm text-muted-foreground",children:N.ClassDescription})]}),e.jsx(L,{})]})},N.ID))})}),s==="flashcards"&&e.jsx(e.Fragment,{children:x?e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(re,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading sets..."})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(N=>e.jsx(ae,{to:`/set/${N.ID}`,children:e.jsxs(F,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:N.SetName}),e.jsx(ge,{className:"text-sm text-muted-foreground",children:N.SetDescription})]}),e.jsx(L,{})]})},N.ID))})}),e.jsx(Ts,{})]})]})},ea=()=>e.jsx(z,{children:e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center from-white to-gray-50",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-primary mb-2",children:"CowboyCards"}),e.jsx("p",{children:"Master any subject with smart flashcards"})]}),e.jsx(js,{})]})}),sa=()=>{const s=ht();return r.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsxs(z,{children:[e.jsx(V,{}),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})]})},ta="https://cowboy-cards.dsouth.org",aa=()=>{const[s,a]=r.useState(null),[t,n]=r.useState(!1),[c,d]=r.useState([]),[o,l]=r.useState(""),x=c.filter(i=>i.SetName.toLowerCase().includes(o.toLowerCase())||i.SetDescription&&i.SetDescription.toLowerCase().includes(o.toLowerCase()));return r.useEffect(()=>{async function i(){n(!0),a(null);try{const u=await D(`${ta}/api/flashcards/sets/list`);d(u)}catch(u){console.error("Error fetching flashcard sets:",u),a(`Error fetching flashcard sets: ${u.message}`)}finally{n(!1)}}i()},[]),e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8 w-1/2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold pb-8",children:"Public Flashcard Sets"}),t&&e.jsx("div",{children:"Loading..."}),s&&e.jsx("div",{className:"text-red-500 mt-2",children:s}),e.jsx(xt,{value:o,onIonInput:i=>l(i.target.value),placeholder:"Search flashcard sets",className:"mb-4 w-1/2"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:x.map(i=>e.jsx(ae,{to:`/flashcards/${i.ID}`,children:e.jsx(F,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:i.SetName}),e.jsx(ge,{className:"text-sm text-gray-600",children:i.SetDescription||"No description"})]})})},i.ID))})]})]})},Qe="https://cowboy-cards.dsouth.org",ra=()=>{const[s,a]=r.useState([]),[t,n]=r.useState(!1),[c,d]=r.useState(null);return r.useEffect(()=>{(async()=>{n(!0),d(null);try{const l=await D(`${Qe}/api/classes/list`);a(l),n(!1)}catch(l){d(`Error fetching classes: ${l.message}`)}finally{n(!1)}})()},[]),e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold pb-8",children:"Public Classes"}),t&&e.jsx("div",{children:"Loading..."}),c&&e.jsx("div",{className:"text-red-500 mt-2",children:c}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(o=>e.jsx(ae,{to:`/class/${o.ID}`,children:e.jsx(F,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:o.ClassName}),e.jsx(ge,{className:"text-sm text-gray-600",children:o.ClassDescription||"No description"}),e.jsx(v,{expand:"block",color:"primary",className:"mt-4",onClick:async()=>{try{const l=await D(`${Qe}/api/class_user`,{method:"POST",headers:{class_id:o.ID,role:"student"}});console.log("Join class response:",l)}catch(l){console.error("Error joining class:",l)}},children:"Join Class"})]})})},o.ID))})]})]})},Xe="https://cowboy-cards.dsouth.org",na=()=>{const{id:s}=we();ye();const[a,t]=r.useState(""),[n,c]=r.useState(""),[d,o]=r.useState([]),[l,x]=r.useState(!0);return r.useEffect(()=>{const i=async()=>{try{const N=await(await fetch(`${Xe}/api/flashcards/sets/`,{method:"GET",headers:{id:s}})).json();t(N.SetName),c(N.SetDescription)}catch(h){console.error("Failed to fetch set info",h)}},u=async()=>{x(!0);try{const N=await(await fetch(`${Xe}/api/flashcards/list`,{method:"GET",headers:{set_id:s}})).json();o(Array.isArray(N)?N.map(j=>({front:j.Front,back:j.Back})):[])}catch(h){console.error("Failed to fetch cards",h),o([])}finally{x(!1)}};s&&(i(),u())},[s]),e.jsxs(z,{className:"ion-padding",children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1 pr-4",children:[e.jsx(v,{className:"rounded-lg",fill:"outline",style:{"--border-radius":"0.5rem"},onClick:()=>window.history.back(),children:"Back"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{className:"text-3xl font-bold",children:a}),e.jsx("p",{className:"text-base mt-1 text-gray-700",children:n})]})]}),e.jsxs("div",{className:"self-start md:self-center flex gap-2 md:mt-0 mt-4 w-full md:w-auto",children:[e.jsx(v,{className:"rounded-lg w-1/2 md:w-auto",fill:"outline",style:{"--border-radius":"0.5rem"},routerLink:`/edit-set/${s}`,children:"Edit Set"}),e.jsx(v,{className:"rounded-lg w-1/2 md:w-auto",color:"primary",style:{"--border-radius":"0.5rem"},routerLink:`/flashcards/${s}`,children:"Study Set"})]})]}),e.jsx("div",{className:"mt-8 min-h-[200px] flex items-center justify-center",children:l?e.jsx(re,{name:"circular"}):d.length===0?e.jsx("div",{className:"text-center text-lg text-gray-900 dark:text-gray-400",children:"This set has no cards yet."}):e.jsx("div",{className:"w-full",children:d.map((i,u)=>e.jsx(F,{className:"mb-4 rounded-lg border shadow-sm",children:e.jsxs(L,{children:[e.jsx("div",{className:"border-b border-gray-300 mb-3 pb-1 m-4",children:e.jsxs(M,{className:"text-md font-semibold text-gray-900 dark:text-gray-300",children:["Card ",u+1]})}),e.jsxs("div",{className:"flex flex-row justify-between items-start",children:[e.jsx("div",{className:"w-3/12 pr-4 border-r border-gray-300 m-4",children:e.jsx(M,{className:"block whitespace-pre-wrap text-lg text-gray-900 dark:text-gray-200",children:i.front})}),e.jsx("div",{className:"w-9/12 pl-4 m-4",children:e.jsx(M,{className:"block whitespace-pre-wrap text-lg text-gray-900 dark:text-gray-200",children:i.back})})]})]})},u))})})]})]})},la=()=>{const[s,a]=r.useState(!1),t=[{id:1,name:"Biology 101",students:25,sets:5,cardsMastered:85},{id:2,name:"Spanish Basics",students:18,sets:3,cardsMastered:78},{id:3,name:"World History",students:30,sets:7,cardsMastered:92}],n=t.length,c=t.reduce((l,x)=>l+x.students,0),d=t.reduce((l,x)=>l+x.sets,0),o=t.reduce((l,x)=>l+x.cardsMastered,0)/n;return e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Overview"}),e.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-4 mb-8",children:[e.jsxs(F,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Classes"})}),e.jsx(L,{children:e.jsx(M,{className:"text-2xl font-bold",children:n})})]}),e.jsxs(F,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Students"})}),e.jsx(L,{children:e.jsx(M,{className:"text-2xl font-bold",children:c})})]}),e.jsxs(F,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Total Sets"})}),e.jsx(L,{children:e.jsx(M,{className:"text-2xl font-bold",children:d})})]}),e.jsxs(F,{className:"rounded-lg border shadow-sm",children:[e.jsx(R,{className:"flex flex-col space-y-1.5 p-6",children:e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:"Average Cards Mastered"})}),e.jsx(L,{children:e.jsx(M,{className:"text-2xl font-bold",children:o.toFixed(1)})})]})]}),e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Classes"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:t.map(l=>e.jsx(ae,{to:`/class/${l.id}`,children:e.jsxs(F,{className:"cursor-pointer hover:shadow-lg hover:-translate-y-1 transition-transform-shadow duration-200 rounded-lg border shadow-sm",children:[e.jsxs(R,{className:"flex flex-col space-y-1.5 p-6",children:[e.jsx(U,{className:"text-2xl font-semibold leading-none tracking-tight",children:l.name}),e.jsxs(M,{className:"text-sm text-gray-600",children:[l.students," students enrolled"]})]}),e.jsxs(L,{className:"flex flex-col gap-0 p-6 pt-0",children:[e.jsxs(M,{className:"text-sm text-gray-600",children:[l.sets," sets"]}),e.jsxs(M,{className:"text-sm text-gray-600",children:["Cards mastered: ",l.cardsMastered]})]})]})},l.id))})]})]})},he=s=>e.jsxs("div",{children:[e.jsx(G,{children:e.jsx(Ie,{type:"text",label:s.label,name:s.name,value:s.value,onIonChange:s.onChange})}),s.error&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.error})]}),J=s=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"font-medium",children:[s.label,":"]}),e.jsx("span",{children:s.value})]}),oa=s=>{var a,t,n,c,d,o,l,x,i,u,h,N,j,m;return e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs(F,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Information"})}),e.jsx(L,{className:"p-6 pt-0",children:s.isEditing?e.jsxs("div",{className:"space-y-4",children:[e.jsx(he,{label:"First Name",name:"first_name",value:((a=s.updatedInfo)==null?void 0:a.first_name)||"",error:s.errors.first_name,onChange:s.handleChange}),e.jsx(he,{label:"Last Name",name:"last_name",value:((t=s.updatedInfo)==null?void 0:t.last_name)||"",error:s.errors.last_name,onChange:s.handleChange}),e.jsx(he,{label:"Username",name:"username",value:((n=s.updatedInfo)==null?void 0:n.username)||"",error:s.errors.username,onChange:s.handleChange}),e.jsx(he,{label:"Email",name:"email",value:((c=s.updatedInfo)==null?void 0:c.email)||"",error:s.errors.email,onChange:s.handleChange}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(v,{onClick:s.handleSave,children:"Save Changes"})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(J,{label:"First Name",value:(d=s.userInfo)==null?void 0:d.first_name}),e.jsx(J,{label:"Last Name",value:(o=s.userInfo)==null?void 0:o.last_name}),e.jsx(J,{label:"Username",value:(l=s.userInfo)==null?void 0:l.username}),e.jsx(J,{label:"Email",value:(x=s.userInfo)==null?void 0:x.email}),e.jsxs(v,{fill:"outline",onClick:s.handleEdit,className:"mt-4",children:[e.jsx(_,{slot:"start",icon:us}),"Edit Info"]})]})})]}),e.jsxs(F,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Stats"})}),e.jsx(L,{className:"p-6 pt-0",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(J,{label:"Account Created",value:(i=s.userInfo)==null?void 0:i.created_at}),e.jsx(J,{label:"Login Streak",value:(u=s.userInfo)==null?void 0:u.login_streak}),e.jsx(J,{label:"Classes Taken",value:(h=s.userInfo)==null?void 0:h.numClasses}),e.jsx(J,{label:"Cards Mastered/Studied",value:`${(N=s.userInfo)==null?void 0:N.cardsMastered} / ${(j=s.userInfo)==null?void 0:j.cardsStudied}`}),e.jsx(J,{label:"Total Card Views",value:(m=s.userInfo)==null?void 0:m.totalCardViews})]})})]})]})},ca=s=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-col md:flex-row gap-6 py-6",children:e.jsxs(F,{className:"w-full md:w-1/2 rounded-lg border shadow-sm",children:[e.jsx(R,{className:"p-6",children:e.jsx(U,{className:"text-xl font-semibold text-primary",children:"Account Options"})}),e.jsx(L,{className:"p-6 pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(G,{children:e.jsxs(ft,{label:"Theme",value:s.theme,onIonChange:a=>s.setTheme(a.detail.value),interface:"popover",placeholder:"Select Theme",children:[e.jsx(qe,{value:"light",children:"Light"}),e.jsx(qe,{value:"dark",children:"Dark"})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Change Your Password"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Reset your account password."})]}),e.jsx(v,{onClick:()=>s.setShowPasswordAlert(!0),children:"Change Password"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Delete Your Account"}),e.jsx("p",{className:"text-xs text-gray-600",children:"This will delete all account data and can't be undone."})]}),e.jsx(v,{color:"danger",onClick:()=>s.setShowDeleteAlert(!0),children:"Delete Account"})]})]})})]})}),e.jsx(je,{isOpen:s.showPasswordAlert,onDidDismiss:()=>s.setShowPasswordAlert(!1),header:"Change Password",inputs:[{name:"oldPassword",type:"password",placeholder:"Old Password"},{name:"newPassword",type:"password",placeholder:"New Password"},{name:"confirmPassword",type:"password",placeholder:"Confirm New Password"}],buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Save",handler:a=>a.newPassword!==a.confirmPassword?(s.presentToast({message:"Passwords do not match",duration:2e3,color:"danger"}),!0):(console.log("Password changed"),!0)}]}),e.jsx(je,{isOpen:s.showDeleteAlert,onDidDismiss:()=>s.setShowDeleteAlert(!1),header:"Confirm Deletion",message:"Are you sure you want to delete your account? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Delete",handler:()=>{console.log("Account deleted")}}]})]}),Ze="https://cowboy-cards.dsouth.org",ia=()=>{const{theme:s,setTheme:a}=Ss(),[t,n]=r.useState(),[c,d]=r.useState(!0),[o,l]=r.useState(null),[x,i]=r.useState(null),[u,h]=r.useState(!1),[N,j]=r.useState(!1),[m,w]=r.useState(!1),[g,P]=r.useState(t),T=A=>{i(x===A?null:A)},K=()=>{P(t),w(!0)},Y=async()=>{if(!f())return;const A=["first_name","last_name","username","email"];try{const C=A.filter(B=>g[B]!==t[B]).map(B=>D(`${Ze}/api/users/${B}`,{method:"PUT",headers:{[B]:g[B]}}));await Promise.all(C),n(g),w(!1)}catch(C){console.error(C),alert("Failed to update some fields. Please try again.")}},f=()=>{const A={};let C=!0;return g.first_name||(A.first_name="First name is required",C=!1),g.last_name||(A.last_name="Last name is required",C=!1),g.email?/\S+@\S+\.\S+/.test(g.email)||(A.email="Email is invalid",C=!1):(A.email="Email is required",C=!1),g.username||(A.username="Username is required",C=!1),g.first_name=g.first_name.trim(),g.last_name=g.last_name.trim(),g.email=g.email.trim(),g.username=g.username.trim(),S(A),C},[y,S]=r.useState({}),p=A=>{const{name:C}=A.target,B=A.detail.value;P(ve=>({...ve,[C]:B}))};r.useEffect(()=>{(async()=>{d(!0),l(null);try{const C=await D(`${Ze}/api/users/`,{method:"GET",headers:{}});n(C),P(C),console.log("data",C)}catch(C){console.log(`Failed to fetch User Data: ${C.message}`),l(`Failed to fetch User Data: ${C.message}`)}finally{d(!1)}})()},[]);const[b]=pt();return e.jsxs(z,{children:[e.jsx(V,{}),e.jsxs("div",{id:"main-content",className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("p",{className:"text-xl font-semibold text-primary",children:["Welcome back, ",(t==null?void 0:t.username)||"User","!"]})}),e.jsxs(v,{onClick:()=>window.history.back(),fill:"outline",className:"mb-6",children:[e.jsx(_,{slot:"start",icon:Ee}),"Back"]}),c&&e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx(re,{name:"circular"}),e.jsx("span",{className:"ml-2",children:"Loading account details..."})]}),o&&!c&&e.jsx("div",{className:"text-red-500 text-center p-4 border border-red-500 rounded-md",children:o}),!c&&!o&&t&&e.jsxs(e.Fragment,{children:[e.jsx(oa,{isEditing:m,errors:y,handleChange:p,handleSave:Y,updatedInfo:g,userInfo:t,handleEdit:K}),e.jsx(ca,{isEditing:m,errors:y,handleChange:p,handleSave:Y,updatedInfo:g,userInfo:t,expandedClass:x,toggleClassDetails:T,showPasswordAlert:u,setShowPasswordAlert:h,showDeleteAlert:N,setShowDeleteAlert:j,theme:s,setTheme:a,presentToast:b})]})]})]})};jt();const da=new gt;function ma(){return e.jsx(Nt,{client:da,children:e.jsx(qt,{children:e.jsxs(Mt,{children:[e.jsx(yt,{children:e.jsx(wt,{children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsxs(bt,{children:[e.jsx(O,{exact:!0,path:"/",component:ea}),e.jsx(O,{exact:!0,path:"/home",component:Zt}),e.jsx(O,{exact:!0,path:"/class/:id",component:Wt}),e.jsx(O,{exact:!0,path:"/teacher",component:la}),e.jsx(O,{exact:!0,path:"/auth",component:js}),e.jsx(O,{exact:!0,path:"/reset-password",component:Ft}),e.jsx(O,{exact:!0,path:"/public-cards",component:aa}),e.jsx(O,{exact:!0,path:"/user-account",component:ia}),e.jsx(O,{exact:!0,path:"/flashcards/:id",component:Xt}),e.jsx(O,{exact:!0,path:"/create-set",component:Ye}),e.jsx(O,{exact:!0,path:"/edit-set/:id",component:Ye}),e.jsx(O,{exact:!0,path:"/class/create",component:Qt}),e.jsx(O,{exact:!0,path:"/public-classes",component:ra}),e.jsx(O,{exact:!0,path:"/set-overview/:id",component:na}),e.jsx(O,{component:sa})]})})})}),e.jsx(Bt,{}),e.jsx(Lt,{})]})})})}const ua=document.getElementById("root"),ha=vt(ua);ha.render(e.jsx(ma,{}));export{ja as _,pa as g};
//# sourceMappingURL=index-DDWFvaQP.js.map
